var an=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wn(dt){return dt&&dt.__esModule&&Object.prototype.hasOwnProperty.call(dt,"default")?dt.default:dt}var _n={exports:{}};/*! For license information please see lsplugin.user.js.LICENSE.txt */(function(dt,Lt){(function(vn,De){dt.exports=De()})(self,()=>(()=>{var vn={227:(P,f,O)=>{var F=O(155);f.formatArgs=function(E){if(E[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+E[0]+(this.useColors?"%c ":" ")+"+"+P.exports.humanize(this.diff),!this.useColors)return;const U="color: "+this.color;E.splice(1,0,U,"color: inherit");let y=0,u=0;E[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(y++,g==="%c"&&(u=y))}),E.splice(u,0,U)},f.save=function(E){try{E?f.storage.setItem("debug",E):f.storage.removeItem("debug")}catch{}},f.load=function(){let E;try{E=f.storage.getItem("debug")}catch{}return!E&&F!==void 0&&"env"in F&&(E=F.env.DEBUG),E},f.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer"&&!window.process.__nwjs)||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},f.storage=function(){try{return localStorage}catch{}}(),f.destroy=(()=>{let E=!1;return()=>{E||(E=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),f.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],f.log=console.debug||console.log||(()=>{}),P.exports=O(447)(f);const{formatters:x}=P.exports;x.j=function(E){try{return JSON.stringify(E)}catch(U){return"[UnexpectedJSONParseError]: "+U.message}}},447:(P,f,O)=>{P.exports=function(F){function x(y){let u,g=null;function m(...M){if(!m.enabled)return;const I=m,L=Number(new Date),H=L-(u||L);I.diff=H,I.prev=u,I.curr=L,u=L,M[0]=x.coerce(M[0]),typeof M[0]!="string"&&M.unshift("%O");let A=0;M[0]=M[0].replace(/%([a-zA-Z%])/g,(N,i)=>{if(N==="%%")return"%";A++;const a=x.formatters[i];if(typeof a=="function"){const d=M[A];N=a.call(I,d),M.splice(A,1),A--}return N}),x.formatArgs.call(I,M),(I.log||x.log).apply(I,M)}return m.namespace=y,m.useColors=x.useColors(),m.color=x.selectColor(y),m.extend=E,m.destroy=x.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>g===null?x.enabled(y):g,set:M=>{g=M}}),typeof x.init=="function"&&x.init(m),m}function E(y,u){const g=x(this.namespace+(u===void 0?":":u)+y);return g.log=this.log,g}function U(y){return y.toString().substring(2,y.toString().length-2).replace(/\.\*\?$/,"*")}return x.debug=x,x.default=x,x.coerce=function(y){return y instanceof Error?y.stack||y.message:y},x.disable=function(){const y=[...x.names.map(U),...x.skips.map(U).map(u=>"-"+u)].join(",");return x.enable(""),y},x.enable=function(y){let u;x.save(y),x.names=[],x.skips=[];const g=(typeof y=="string"?y:"").split(/[\s,]+/),m=g.length;for(u=0;u<m;u++)g[u]&&((y=g[u].replace(/\*/g,".*?"))[0]==="-"?x.skips.push(new RegExp("^"+y.substr(1)+"$")):x.names.push(new RegExp("^"+y+"$")))},x.enabled=function(y){if(y[y.length-1]==="*")return!0;let u,g;for(u=0,g=x.skips.length;u<g;u++)if(x.skips[u].test(y))return!1;for(u=0,g=x.names.length;u<g;u++)if(x.names[u].test(y))return!0;return!1},x.humanize=O(824),x.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(F).forEach(y=>{x[y]=F[y]}),x.names=[],x.skips=[],x.formatters={},x.selectColor=function(y){let u=0;for(let g=0;g<y.length;g++)u=(u<<5)-u+y.charCodeAt(g),u|=0;return x.colors[Math.abs(u)%x.colors.length]},x.enable(x.load()),x}},856:function(P){P.exports=function(){function f(D){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(D)}function O(D,_){return(O=Object.setPrototypeOf||function(T,G){return T.__proto__=G,T})(D,_)}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x(D,_,T){return(x=F()?Reflect.construct:function(G,X,bt){var Bt=[null];Bt.push.apply(Bt,X);var Dt=new(Function.bind.apply(G,Bt));return bt&&O(Dt,bt.prototype),Dt}).apply(null,arguments)}function E(D){return function(_){if(Array.isArray(_))return U(_)}(D)||function(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}(D)||function(_,T){if(_){if(typeof _=="string")return U(_,T);var G=Object.prototype.toString.call(_).slice(8,-1);return G==="Object"&&_.constructor&&(G=_.constructor.name),G==="Map"||G==="Set"?Array.from(_):G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G)?U(_,T):void 0}}(D)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function U(D,_){(_==null||_>D.length)&&(_=D.length);for(var T=0,G=new Array(_);T<_;T++)G[T]=D[T];return G}var y=Object.hasOwnProperty,u=Object.setPrototypeOf,g=Object.isFrozen,m=Object.getPrototypeOf,M=Object.getOwnPropertyDescriptor,I=Object.freeze,L=Object.seal,H=Object.create,A=typeof Reflect<"u"&&Reflect,N=A.apply,i=A.construct;N||(N=function(D,_,T){return D.apply(_,T)}),I||(I=function(D){return D}),L||(L=function(D){return D}),i||(i=function(D,_){return x(D,E(_))});var a,d=c(Array.prototype.forEach),C=c(Array.prototype.pop),$=c(Array.prototype.push),W=c(String.prototype.toLowerCase),K=c(String.prototype.match),tt=c(String.prototype.replace),gt=c(String.prototype.indexOf),mt=c(String.prototype.trim),et=c(RegExp.prototype.test),$t=(a=TypeError,function(){for(var D=arguments.length,_=new Array(D),T=0;T<D;T++)_[T]=arguments[T];return i(a,_)});function c(D){return function(_){for(var T=arguments.length,G=new Array(T>1?T-1:0),X=1;X<T;X++)G[X-1]=arguments[X];return N(D,_,G)}}function p(D,_){u&&u(D,null);for(var T=_.length;T--;){var G=_[T];if(typeof G=="string"){var X=W(G);X!==G&&(g(_)||(_[T]=X),G=X)}D[G]=!0}return D}function j(D){var _,T=H(null);for(_ in D)N(y,D,[_])&&(T[_]=D[_]);return T}function V(D,_){for(;D!==null;){var T=M(D,_);if(T){if(T.get)return c(T.get);if(typeof T.value=="function")return c(T.value)}D=m(D)}return function(G){return console.warn("fallback value for",G),null}}var ht=I(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),at=I(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),q=I(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),nt=I(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),lt=I(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),ut=I(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Nt=I(["#text"]),yt=I(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),rt=I(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Y=I(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),st=I(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ot=L(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ht=L(/<%[\w\W]*|[\w\W]*%>/gm),Mt=L(/^data-[\-\w.\u00B7-\uFFFF]/),Rt=L(/^aria-[\-\w]+$/),re=L(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Vt=L(/^(?:\w+script|data):/i),Pe=L(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),cn=L(/^html$/i),Ue=function(){return typeof window>"u"?null:window},ln=function(D,_){if(f(D)!=="object"||typeof D.createPolicy!="function")return null;var T=null,G="data-tt-policy-suffix";_.currentScript&&_.currentScript.hasAttribute(G)&&(T=_.currentScript.getAttribute(G));var X="dompurify"+(T?"#"+T:"");try{return D.createPolicy(X,{createHTML:function(bt){return bt}})}catch{return console.warn("TrustedTypes policy "+X+" could not be created."),null}};return function D(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ue(),T=function(r){return D(r)};if(T.version="2.3.8",T.removed=[],!_||!_.document||_.document.nodeType!==9)return T.isSupported=!1,T;var G=_.document,X=_.document,bt=_.DocumentFragment,Bt=_.HTMLTemplateElement,Dt=_.Node,ze=_.Element,de=_.NodeFilter,oe=_.NamedNodeMap,me=oe===void 0?_.NamedNodeMap||_.MozNamedAttrMap:oe,$e=_.HTMLFormElement,ge=_.DOMParser,He=_.trustedTypes,Yt=ze.prototype,Be=V(Yt,"cloneNode"),qe=V(Yt,"nextSibling"),un=V(Yt,"childNodes"),ye=V(Yt,"parentNode");if(typeof Bt=="function"){var ie=X.createElement("template");ie.content&&ie.content.ownerDocument&&(X=ie.content.ownerDocument)}var Tt=ln(He,G),Ge=Tt?Tt.createHTML(""):"",J=X,ae=J.implementation,Kt=J.createNodeIterator,be=J.createDocumentFragment,We=J.getElementsByTagName,Je=G.importNode,ve={};try{ve=j(X).documentMode?X.documentMode:{}}catch{}var vt={};T.isSupported=typeof ye=="function"&&ae&&ae.createHTMLDocument!==void 0&&ve!==9;var Xt,Pt,_e=Ot,se=Ht,pn=Mt,fn=Rt,hn=Vt,Ze=Pe,ce=re,ct=null,Ve=p({},[].concat(E(ht),E(at),E(q),E(lt),E(Nt))),pt=null,we=p({},[].concat(E(yt),E(rt),E(Y),E(st))),ot=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),qt=null,xe=null,Ye=!0,Ce=!0,Ke=!1,kt=!1,At=!1,Se=!1,Oe=!1,Gt=!1,Qt=!1,te=!1,ee=!0,Ae=!0,Ut=!1,Wt={},Jt=null,Ee=p({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),jt=null,Xe=p({},["audio","video","img","source","image","track"]),Te=null,le=p({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ke="http://www.w3.org/1998/Math/MathML",je="http://www.w3.org/2000/svg",It="http://www.w3.org/1999/xhtml",ue=It,Ie=!1,Fe=["application/xhtml+xml","text/html"],dn="text/html",Zt=null,mn=X.createElement("form"),Qe=function(r){return r instanceof RegExp||r instanceof Function},Ct=function(r){Zt&&Zt===r||(r&&f(r)==="object"||(r={}),r=j(r),ct="ALLOWED_TAGS"in r?p({},r.ALLOWED_TAGS):Ve,pt="ALLOWED_ATTR"in r?p({},r.ALLOWED_ATTR):we,Te="ADD_URI_SAFE_ATTR"in r?p(j(le),r.ADD_URI_SAFE_ATTR):le,jt="ADD_DATA_URI_TAGS"in r?p(j(Xe),r.ADD_DATA_URI_TAGS):Xe,Jt="FORBID_CONTENTS"in r?p({},r.FORBID_CONTENTS):Ee,qt="FORBID_TAGS"in r?p({},r.FORBID_TAGS):{},xe="FORBID_ATTR"in r?p({},r.FORBID_ATTR):{},Wt="USE_PROFILES"in r&&r.USE_PROFILES,Ye=r.ALLOW_ARIA_ATTR!==!1,Ce=r.ALLOW_DATA_ATTR!==!1,Ke=r.ALLOW_UNKNOWN_PROTOCOLS||!1,kt=r.SAFE_FOR_TEMPLATES||!1,At=r.WHOLE_DOCUMENT||!1,Gt=r.RETURN_DOM||!1,Qt=r.RETURN_DOM_FRAGMENT||!1,te=r.RETURN_TRUSTED_TYPE||!1,Oe=r.FORCE_BODY||!1,ee=r.SANITIZE_DOM!==!1,Ae=r.KEEP_CONTENT!==!1,Ut=r.IN_PLACE||!1,ce=r.ALLOWED_URI_REGEXP||ce,ue=r.NAMESPACE||It,r.CUSTOM_ELEMENT_HANDLING&&Qe(r.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ot.tagNameCheck=r.CUSTOM_ELEMENT_HANDLING.tagNameCheck),r.CUSTOM_ELEMENT_HANDLING&&Qe(r.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ot.attributeNameCheck=r.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),r.CUSTOM_ELEMENT_HANDLING&&typeof r.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ot.allowCustomizedBuiltInElements=r.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Xt=Xt=Fe.indexOf(r.PARSER_MEDIA_TYPE)===-1?dn:r.PARSER_MEDIA_TYPE,Pt=Xt==="application/xhtml+xml"?function(w){return w}:W,kt&&(Ce=!1),Qt&&(Gt=!0),Wt&&(ct=p({},E(Nt)),pt=[],Wt.html===!0&&(p(ct,ht),p(pt,yt)),Wt.svg===!0&&(p(ct,at),p(pt,rt),p(pt,st)),Wt.svgFilters===!0&&(p(ct,q),p(pt,rt),p(pt,st)),Wt.mathMl===!0&&(p(ct,lt),p(pt,Y),p(pt,st))),r.ADD_TAGS&&(ct===Ve&&(ct=j(ct)),p(ct,r.ADD_TAGS)),r.ADD_ATTR&&(pt===we&&(pt=j(pt)),p(pt,r.ADD_ATTR)),r.ADD_URI_SAFE_ATTR&&p(Te,r.ADD_URI_SAFE_ATTR),r.FORBID_CONTENTS&&(Jt===Ee&&(Jt=j(Jt)),p(Jt,r.FORBID_CONTENTS)),Ae&&(ct["#text"]=!0),At&&p(ct,["html","head","body"]),ct.table&&(p(ct,["tbody"]),delete qt.tbody),I&&I(r),Zt=r)},ne=p({},["mi","mo","mn","ms","mtext"]),Le=p({},["foreignobject","desc","title","annotation-xml"]),pe=p({},["title","style","font","a","script"]),fe=p({},at);p(fe,q),p(fe,nt);var Ne=p({},lt);p(Ne,ut);var gn=function(r){var w=ye(r);w&&w.tagName||(w={namespaceURI:It,tagName:"template"});var b=W(r.tagName),Z=W(w.tagName);return r.namespaceURI===je?w.namespaceURI===It?b==="svg":w.namespaceURI===ke?b==="svg"&&(Z==="annotation-xml"||ne[Z]):Boolean(fe[b]):r.namespaceURI===ke?w.namespaceURI===It?b==="math":w.namespaceURI===je?b==="math"&&Le[Z]:Boolean(Ne[b]):r.namespaceURI===It&&!(w.namespaceURI===je&&!Le[Z])&&!(w.namespaceURI===ke&&!ne[Z])&&!Ne[b]&&(pe[b]||!fe[b])},St=function(r){$(T.removed,{element:r});try{r.parentNode.removeChild(r)}catch{try{r.outerHTML=Ge}catch{r.remove()}}},tn=function(r,w){try{$(T.removed,{attribute:w.getAttributeNode(r),from:w})}catch{$(T.removed,{attribute:null,from:w})}if(w.removeAttribute(r),r==="is"&&!pt[r])if(Gt||Qt)try{St(w)}catch{}else try{w.setAttribute(r,"")}catch{}},he=function(r){var w,b;if(Oe)r="<remove></remove>"+r;else{var Z=K(r,/^[\r\n\t ]+/);b=Z&&Z[0]}Xt==="application/xhtml+xml"&&(r='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+r+"</body></html>");var e=Tt?Tt.createHTML(r):r;if(ue===It)try{w=new ge().parseFromString(e,Xt)}catch{}if(!w||!w.documentElement){w=ae.createDocument(ue,"template",null);try{w.documentElement.innerHTML=Ie?"":e}catch{}}var t=w.body||w.documentElement;return r&&b&&t.insertBefore(X.createTextNode(b),t.childNodes[0]||null),ue===It?We.call(w,At?"html":"body")[0]:At?w.documentElement:t},en=function(r){return Kt.call(r.ownerDocument||r,r,de.SHOW_ELEMENT|de.SHOW_COMMENT|de.SHOW_TEXT,null,!1)},yn=function(r){return r instanceof $e&&(typeof r.nodeName!="string"||typeof r.textContent!="string"||typeof r.removeChild!="function"||!(r.attributes instanceof me)||typeof r.removeAttribute!="function"||typeof r.setAttribute!="function"||typeof r.namespaceURI!="string"||typeof r.insertBefore!="function")},Et=function(r){return f(Dt)==="object"?r instanceof Dt:r&&f(r)==="object"&&typeof r.nodeType=="number"&&typeof r.nodeName=="string"},_t=function(r,w,b){vt[r]&&d(vt[r],function(Z){Z.call(T,w,b,Zt)})},nn=function(r){var w;if(_t("beforeSanitizeElements",r,null),yn(r)||et(/[\u0080-\uFFFF]/,r.nodeName))return St(r),!0;var b=Pt(r.nodeName);if(_t("uponSanitizeElement",r,{tagName:b,allowedTags:ct}),r.hasChildNodes()&&!Et(r.firstElementChild)&&(!Et(r.content)||!Et(r.content.firstElementChild))&&et(/<[/\w]/g,r.innerHTML)&&et(/<[/\w]/g,r.textContent)||b==="select"&&et(/<template/i,r.innerHTML))return St(r),!0;if(!ct[b]||qt[b]){if(!qt[b]&&rn(b)&&(ot.tagNameCheck instanceof RegExp&&et(ot.tagNameCheck,b)||ot.tagNameCheck instanceof Function&&ot.tagNameCheck(b)))return!1;if(Ae&&!Jt[b]){var Z=ye(r)||r.parentNode,e=un(r)||r.childNodes;if(e&&Z)for(var t=e.length-1;t>=0;--t)Z.insertBefore(Be(e[t],!0),qe(r))}return St(r),!0}return r instanceof ze&&!gn(r)?(St(r),!0):b!=="noscript"&&b!=="noembed"||!et(/<\/no(script|embed)/i,r.innerHTML)?(kt&&r.nodeType===3&&(w=r.textContent,w=tt(w,_e," "),w=tt(w,se," "),r.textContent!==w&&($(T.removed,{element:r.cloneNode()}),r.textContent=w)),_t("afterSanitizeElements",r,null),!1):(St(r),!0)},Me=function(r,w,b){if(ee&&(w==="id"||w==="name")&&(b in X||b in mn))return!1;if(!(Ce&&!xe[w]&&et(pn,w))){if(!(Ye&&et(fn,w))){if(!pt[w]||xe[w]){if(!(rn(r)&&(ot.tagNameCheck instanceof RegExp&&et(ot.tagNameCheck,r)||ot.tagNameCheck instanceof Function&&ot.tagNameCheck(r))&&(ot.attributeNameCheck instanceof RegExp&&et(ot.attributeNameCheck,w)||ot.attributeNameCheck instanceof Function&&ot.attributeNameCheck(w))||w==="is"&&ot.allowCustomizedBuiltInElements&&(ot.tagNameCheck instanceof RegExp&&et(ot.tagNameCheck,b)||ot.tagNameCheck instanceof Function&&ot.tagNameCheck(b))))return!1}else if(!Te[w]){if(!et(ce,tt(b,Ze,""))){if((w!=="src"&&w!=="xlink:href"&&w!=="href"||r==="script"||gt(b,"data:")!==0||!jt[r])&&!(Ke&&!et(hn,tt(b,Ze,"")))){if(b)return!1}}}}}return!0},rn=function(r){return r.indexOf("-")>0},on=function(r){var w,b,Z,e;_t("beforeSanitizeAttributes",r,null);var t=r.attributes;if(t){var n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:pt};for(e=t.length;e--;){var o=w=t[e],s=o.name,l=o.namespaceURI;if(b=s==="value"?w.value:mt(w.value),Z=Pt(s),n.attrName=Z,n.attrValue=b,n.keepAttr=!0,n.forceKeepAttr=void 0,_t("uponSanitizeAttribute",r,n),b=n.attrValue,!n.forceKeepAttr&&(tn(s,r),n.keepAttr))if(et(/\/>/i,b))tn(s,r);else{kt&&(b=tt(b,_e," "),b=tt(b,se," "));var h=Pt(r.nodeName);if(Me(h,Z,b))try{l?r.setAttributeNS(l,s,b):r.setAttribute(s,b),C(T.removed)}catch{}}}_t("afterSanitizeAttributes",r,null)}},bn=function r(w){var b,Z=en(w);for(_t("beforeSanitizeShadowDOM",w,null);b=Z.nextNode();)_t("uponSanitizeShadowNode",b,null),nn(b)||(b.content instanceof bt&&r(b.content),on(b));_t("afterSanitizeShadowDOM",w,null)};return T.sanitize=function(r,w){var b,Z,e,t,n;if((Ie=!r)&&(r="<!-->"),typeof r!="string"&&!Et(r)){if(typeof r.toString!="function")throw $t("toString is not a function");if(typeof(r=r.toString())!="string")throw $t("dirty is not a string, aborting")}if(!T.isSupported){if(f(_.toStaticHTML)==="object"||typeof _.toStaticHTML=="function"){if(typeof r=="string")return _.toStaticHTML(r);if(Et(r))return _.toStaticHTML(r.outerHTML)}return r}if(Se||Ct(w),T.removed=[],typeof r=="string"&&(Ut=!1),Ut){if(r.nodeName){var o=Pt(r.nodeName);if(!ct[o]||qt[o])throw $t("root node is forbidden and cannot be sanitized in-place")}}else if(r instanceof Dt)(Z=(b=he("<!---->")).ownerDocument.importNode(r,!0)).nodeType===1&&Z.nodeName==="BODY"||Z.nodeName==="HTML"?b=Z:b.appendChild(Z);else{if(!Gt&&!kt&&!At&&r.indexOf("<")===-1)return Tt&&te?Tt.createHTML(r):r;if(!(b=he(r)))return Gt?null:te?Ge:""}b&&Oe&&St(b.firstChild);for(var s=en(Ut?r:b);e=s.nextNode();)e.nodeType===3&&e===t||nn(e)||(e.content instanceof bt&&bn(e.content),on(e),t=e);if(t=null,Ut)return r;if(Gt){if(Qt)for(n=be.call(b.ownerDocument);b.firstChild;)n.appendChild(b.firstChild);else n=b;return pt.shadowroot&&(n=Je.call(G,n,!0)),n}var l=At?b.outerHTML:b.innerHTML;return At&&ct["!doctype"]&&b.ownerDocument&&b.ownerDocument.doctype&&b.ownerDocument.doctype.name&&et(cn,b.ownerDocument.doctype.name)&&(l="<!DOCTYPE "+b.ownerDocument.doctype.name+`>
`+l),kt&&(l=tt(l,_e," "),l=tt(l,se," ")),Tt&&te?Tt.createHTML(l):l},T.setConfig=function(r){Ct(r),Se=!0},T.clearConfig=function(){Zt=null,Se=!1},T.isValidAttribute=function(r,w,b){Zt||Ct({});var Z=Pt(r),e=Pt(w);return Me(Z,e,b)},T.addHook=function(r,w){typeof w=="function"&&(vt[r]=vt[r]||[],$(vt[r],w))},T.removeHook=function(r){if(vt[r])return C(vt[r])},T.removeHooks=function(r){vt[r]&&(vt[r]=[])},T.removeAllHooks=function(){vt={}},T}()}()},729:P=>{var f=Object.prototype.hasOwnProperty,O="~";function F(){}function x(u,g,m){this.fn=u,this.context=g,this.once=m||!1}function E(u,g,m,M,I){if(typeof m!="function")throw new TypeError("The listener must be a function");var L=new x(m,M||u,I),H=O?O+g:g;return u._events[H]?u._events[H].fn?u._events[H]=[u._events[H],L]:u._events[H].push(L):(u._events[H]=L,u._eventsCount++),u}function U(u,g){--u._eventsCount==0?u._events=new F:delete u._events[g]}function y(){this._events=new F,this._eventsCount=0}Object.create&&(F.prototype=Object.create(null),new F().__proto__||(O=!1)),y.prototype.eventNames=function(){var u,g,m=[];if(this._eventsCount===0)return m;for(g in u=this._events)f.call(u,g)&&m.push(O?g.slice(1):g);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(u)):m},y.prototype.listeners=function(u){var g=O?O+u:u,m=this._events[g];if(!m)return[];if(m.fn)return[m.fn];for(var M=0,I=m.length,L=new Array(I);M<I;M++)L[M]=m[M].fn;return L},y.prototype.listenerCount=function(u){var g=O?O+u:u,m=this._events[g];return m?m.fn?1:m.length:0},y.prototype.emit=function(u,g,m,M,I,L){var H=O?O+u:u;if(!this._events[H])return!1;var A,N,i=this._events[H],a=arguments.length;if(i.fn){switch(i.once&&this.removeListener(u,i.fn,void 0,!0),a){case 1:return i.fn.call(i.context),!0;case 2:return i.fn.call(i.context,g),!0;case 3:return i.fn.call(i.context,g,m),!0;case 4:return i.fn.call(i.context,g,m,M),!0;case 5:return i.fn.call(i.context,g,m,M,I),!0;case 6:return i.fn.call(i.context,g,m,M,I,L),!0}for(N=1,A=new Array(a-1);N<a;N++)A[N-1]=arguments[N];i.fn.apply(i.context,A)}else{var d,C=i.length;for(N=0;N<C;N++)switch(i[N].once&&this.removeListener(u,i[N].fn,void 0,!0),a){case 1:i[N].fn.call(i[N].context);break;case 2:i[N].fn.call(i[N].context,g);break;case 3:i[N].fn.call(i[N].context,g,m);break;case 4:i[N].fn.call(i[N].context,g,m,M);break;default:if(!A)for(d=1,A=new Array(a-1);d<a;d++)A[d-1]=arguments[d];i[N].fn.apply(i[N].context,A)}}return!0},y.prototype.on=function(u,g,m){return E(this,u,g,m,!1)},y.prototype.once=function(u,g,m){return E(this,u,g,m,!0)},y.prototype.removeListener=function(u,g,m,M){var I=O?O+u:u;if(!this._events[I])return this;if(!g)return U(this,I),this;var L=this._events[I];if(L.fn)L.fn!==g||M&&!L.once||m&&L.context!==m||U(this,I);else{for(var H=0,A=[],N=L.length;H<N;H++)(L[H].fn!==g||M&&!L[H].once||m&&L[H].context!==m)&&A.push(L[H]);A.length?this._events[I]=A.length===1?A[0]:A:U(this,I)}return this},y.prototype.removeAllListeners=function(u){var g;return u?(g=O?O+u:u,this._events[g]&&U(this,g)):(this._events=new F,this._eventsCount=0),this},y.prototype.off=y.prototype.removeListener,y.prototype.addListener=y.prototype.on,y.prefixed=O,y.EventEmitter=y,P.exports=y},717:P=>{typeof Object.create=="function"?P.exports=function(f,O){f.super_=O,f.prototype=Object.create(O.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}})}:P.exports=function(f,O){f.super_=O;var F=function(){};F.prototype=O.prototype,f.prototype=new F,f.prototype.constructor=f}},824:P=>{var f=1e3,O=60*f,F=60*O,x=24*F;function E(U,y,u,g){var m=y>=1.5*u;return Math.round(U/u)+" "+g+(m?"s":"")}P.exports=function(U,y){y=y||{};var u,g,m=typeof U;if(m==="string"&&U.length>0)return function(M){if(!((M=String(M)).length>100)){var I=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(M);if(I){var L=parseFloat(I[1]);switch((I[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*L;case"weeks":case"week":case"w":return 6048e5*L;case"days":case"day":case"d":return L*x;case"hours":case"hour":case"hrs":case"hr":case"h":return L*F;case"minutes":case"minute":case"mins":case"min":case"m":return L*O;case"seconds":case"second":case"secs":case"sec":case"s":return L*f;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return L;default:return}}}}(U);if(m==="number"&&isFinite(U))return y.long?(u=U,(g=Math.abs(u))>=x?E(u,g,x,"day"):g>=F?E(u,g,F,"hour"):g>=O?E(u,g,O,"minute"):g>=f?E(u,g,f,"second"):u+" ms"):function(M){var I=Math.abs(M);return I>=x?Math.round(M/x)+"d":I>=F?Math.round(M/F)+"h":I>=O?Math.round(M/O)+"m":I>=f?Math.round(M/f)+"s":M+"ms"}(U);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(U))}},520:(P,f,O)=>{var F=O(155),x=F.platform==="win32",E=O(539);function U(i,a){for(var d=[],C=0;C<i.length;C++){var $=i[C];$&&$!=="."&&($===".."?d.length&&d[d.length-1]!==".."?d.pop():a&&d.push(".."):d.push($))}return d}function y(i){for(var a=i.length-1,d=0;d<=a&&!i[d];d++);for(var C=a;C>=0&&!i[C];C--);return d===0&&C===a?i:d>C?[]:i.slice(d,C+1)}var u=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,g=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,m={};function M(i){var a=u.exec(i),d=(a[1]||"")+(a[2]||""),C=a[3]||"",$=g.exec(C);return[d,$[1],$[2],$[3]]}function I(i){var a=u.exec(i),d=a[1]||"",C=!!d&&d[1]!==":";return{device:d,isUnc:C,isAbsolute:C||!!a[2],tail:a[3]}}function L(i){return"\\\\"+i.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}m.resolve=function(){for(var i="",a="",d=!1,C=arguments.length-1;C>=-1;C--){var $;if(C>=0?$=arguments[C]:i?($=F.env["="+i])&&$.substr(0,3).toLowerCase()===i.toLowerCase()+"\\"||($=i+"\\"):$=F.cwd(),!E.isString($))throw new TypeError("Arguments to path.resolve must be strings");if($){var W=I($),K=W.device,tt=W.isUnc,gt=W.isAbsolute,mt=W.tail;if((!K||!i||K.toLowerCase()===i.toLowerCase())&&(i||(i=K),d||(a=mt+"\\"+a,d=gt),i&&d))break}}return tt&&(i=L(i)),i+(d?"\\":"")+(a=U(a.split(/[\\\/]+/),!d).join("\\"))||"."},m.normalize=function(i){var a=I(i),d=a.device,C=a.isUnc,$=a.isAbsolute,W=a.tail,K=/[\\\/]$/.test(W);return(W=U(W.split(/[\\\/]+/),!$).join("\\"))||$||(W="."),W&&K&&(W+="\\"),C&&(d=L(d)),d+($?"\\":"")+W},m.isAbsolute=function(i){return I(i).isAbsolute},m.join=function(){for(var i=[],a=0;a<arguments.length;a++){var d=arguments[a];if(!E.isString(d))throw new TypeError("Arguments to path.join must be strings");d&&i.push(d)}var C=i.join("\\");return/^[\\\/]{2}[^\\\/]/.test(i[0])||(C=C.replace(/^[\\\/]{2,}/,"\\")),m.normalize(C)},m.relative=function(i,a){i=m.resolve(i),a=m.resolve(a);for(var d=i.toLowerCase(),C=a.toLowerCase(),$=y(a.split("\\")),W=y(d.split("\\")),K=y(C.split("\\")),tt=Math.min(W.length,K.length),gt=tt,mt=0;mt<tt;mt++)if(W[mt]!==K[mt]){gt=mt;break}if(gt==0)return a;var et=[];for(mt=gt;mt<W.length;mt++)et.push("..");return(et=et.concat($.slice(gt))).join("\\")},m._makeLong=function(i){if(!E.isString(i))return i;if(!i)return"";var a=m.resolve(i);return/^[a-zA-Z]\:\\/.test(a)?"\\\\?\\"+a:/^\\\\[^?.]/.test(a)?"\\\\?\\UNC\\"+a.substring(2):i},m.dirname=function(i){var a=M(i),d=a[0],C=a[1];return d||C?(C&&(C=C.substr(0,C.length-1)),d+C):"."},m.basename=function(i,a){var d=M(i)[2];return a&&d.substr(-1*a.length)===a&&(d=d.substr(0,d.length-a.length)),d},m.extname=function(i){return M(i)[3]},m.format=function(i){if(!E.isObject(i))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof i);var a=i.root||"";if(!E.isString(a))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof i.root);var d=i.dir,C=i.base||"";return d?d[d.length-1]===m.sep?d+C:d+m.sep+C:C},m.parse=function(i){if(!E.isString(i))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof i);var a=M(i);if(!a||a.length!==4)throw new TypeError("Invalid path '"+i+"'");return{root:a[0],dir:a[0]+a[1].slice(0,-1),base:a[2],ext:a[3],name:a[2].slice(0,a[2].length-a[3].length)}},m.sep="\\",m.delimiter=";";var H=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,A={};function N(i){return H.exec(i).slice(1)}A.resolve=function(){for(var i="",a=!1,d=arguments.length-1;d>=-1&&!a;d--){var C=d>=0?arguments[d]:F.cwd();if(!E.isString(C))throw new TypeError("Arguments to path.resolve must be strings");C&&(i=C+"/"+i,a=C[0]==="/")}return(a?"/":"")+(i=U(i.split("/"),!a).join("/"))||"."},A.normalize=function(i){var a=A.isAbsolute(i),d=i&&i[i.length-1]==="/";return(i=U(i.split("/"),!a).join("/"))||a||(i="."),i&&d&&(i+="/"),(a?"/":"")+i},A.isAbsolute=function(i){return i.charAt(0)==="/"},A.join=function(){for(var i="",a=0;a<arguments.length;a++){var d=arguments[a];if(!E.isString(d))throw new TypeError("Arguments to path.join must be strings");d&&(i+=i?"/"+d:d)}return A.normalize(i)},A.relative=function(i,a){i=A.resolve(i).substr(1),a=A.resolve(a).substr(1);for(var d=y(i.split("/")),C=y(a.split("/")),$=Math.min(d.length,C.length),W=$,K=0;K<$;K++)if(d[K]!==C[K]){W=K;break}var tt=[];for(K=W;K<d.length;K++)tt.push("..");return(tt=tt.concat(C.slice(W))).join("/")},A._makeLong=function(i){return i},A.dirname=function(i){var a=N(i),d=a[0],C=a[1];return d||C?(C&&(C=C.substr(0,C.length-1)),d+C):"."},A.basename=function(i,a){var d=N(i)[2];return a&&d.substr(-1*a.length)===a&&(d=d.substr(0,d.length-a.length)),d},A.extname=function(i){return N(i)[3]},A.format=function(i){if(!E.isObject(i))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof i);var a=i.root||"";if(!E.isString(a))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof i.root);return(i.dir?i.dir+A.sep:"")+(i.base||"")},A.parse=function(i){if(!E.isString(i))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof i);var a=N(i);if(!a||a.length!==4)throw new TypeError("Invalid path '"+i+"'");return a[1]=a[1]||"",a[2]=a[2]||"",a[3]=a[3]||"",{root:a[0],dir:a[0]+a[1].slice(0,-1),base:a[2],ext:a[3],name:a[2].slice(0,a[2].length-a[3].length)}},A.sep="/",A.delimiter=":",P.exports=x?m:A,P.exports.posix=A,P.exports.win32=m},155:P=>{var f,O,F=P.exports={};function x(){throw new Error("setTimeout has not been defined")}function E(){throw new Error("clearTimeout has not been defined")}function U(A){if(f===setTimeout)return setTimeout(A,0);if((f===x||!f)&&setTimeout)return f=setTimeout,setTimeout(A,0);try{return f(A,0)}catch{try{return f.call(null,A,0)}catch{return f.call(this,A,0)}}}(function(){try{f=typeof setTimeout=="function"?setTimeout:x}catch{f=x}try{O=typeof clearTimeout=="function"?clearTimeout:E}catch{O=E}})();var y,u=[],g=!1,m=-1;function M(){g&&y&&(g=!1,y.length?u=y.concat(u):m=-1,u.length&&I())}function I(){if(!g){var A=U(M);g=!0;for(var N=u.length;N;){for(y=u,u=[];++m<N;)y&&y[m].run();m=-1,N=u.length}y=null,g=!1,function(i){if(O===clearTimeout)return clearTimeout(i);if((O===E||!O)&&clearTimeout)return O=clearTimeout,clearTimeout(i);try{O(i)}catch{try{return O.call(null,i)}catch{return O.call(this,i)}}}(A)}}function L(A,N){this.fun=A,this.array=N}function H(){}F.nextTick=function(A){var N=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)N[i-1]=arguments[i];u.push(new L(A,N)),u.length!==1||g||U(I)},L.prototype.run=function(){this.fun.apply(null,this.array)},F.title="browser",F.browser=!0,F.env={},F.argv=[],F.version="",F.versions={},F.on=H,F.addListener=H,F.once=H,F.off=H,F.removeListener=H,F.removeAllListeners=H,F.emit=H,F.prependListener=H,F.prependOnceListener=H,F.listeners=function(A){return[]},F.binding=function(A){throw new Error("process.binding is not supported")},F.cwd=function(){return"/"},F.chdir=function(A){throw new Error("process.chdir is not supported")},F.umask=function(){return 0}},384:P=>{P.exports=function(f){return f&&typeof f=="object"&&typeof f.copy=="function"&&typeof f.fill=="function"&&typeof f.readUInt8=="function"}},539:(P,f,O)=>{var F=O(155),x=/%[sdj%]/g;f.format=function(c){if(!i(c)){for(var p=[],j=0;j<arguments.length;j++)p.push(y(arguments[j]));return p.join(" ")}j=1;for(var V=arguments,ht=V.length,at=String(c).replace(x,function(nt){if(nt==="%%")return"%";if(j>=ht)return nt;switch(nt){case"%s":return String(V[j++]);case"%d":return Number(V[j++]);case"%j":try{return JSON.stringify(V[j++])}catch{return"[Circular]"}default:return nt}}),q=V[j];j<ht;q=V[++j])A(q)||!C(q)?at+=" "+q:at+=" "+y(q);return at},f.deprecate=function(c,p){if(a(O.g.process))return function(){return f.deprecate(c,p).apply(this,arguments)};if(F.noDeprecation===!0)return c;var j=!1;return function(){if(!j){if(F.throwDeprecation)throw new Error(p);F.traceDeprecation?console.trace(p):console.error(p),j=!0}return c.apply(this,arguments)}};var E,U={};function y(c,p){var j={seen:[],stylize:g};return arguments.length>=3&&(j.depth=arguments[2]),arguments.length>=4&&(j.colors=arguments[3]),H(p)?j.showHidden=p:p&&f._extend(j,p),a(j.showHidden)&&(j.showHidden=!1),a(j.depth)&&(j.depth=2),a(j.colors)&&(j.colors=!1),a(j.customInspect)&&(j.customInspect=!0),j.colors&&(j.stylize=u),m(j,c,j.depth)}function u(c,p){var j=y.styles[p];return j?"\x1B["+y.colors[j][0]+"m"+c+"\x1B["+y.colors[j][1]+"m":c}function g(c,p){return c}function m(c,p,j){if(c.customInspect&&p&&K(p.inspect)&&p.inspect!==f.inspect&&(!p.constructor||p.constructor.prototype!==p)){var V=p.inspect(j,c);return i(V)||(V=m(c,V,j)),V}var ht=function(rt,Y){if(a(Y))return rt.stylize("undefined","undefined");if(i(Y)){var st="'"+JSON.stringify(Y).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return rt.stylize(st,"string")}return N(Y)?rt.stylize(""+Y,"number"):H(Y)?rt.stylize(""+Y,"boolean"):A(Y)?rt.stylize("null","null"):void 0}(c,p);if(ht)return ht;var at=Object.keys(p),q=function(rt){var Y={};return rt.forEach(function(st,Ot){Y[st]=!0}),Y}(at);if(c.showHidden&&(at=Object.getOwnPropertyNames(p)),W(p)&&(at.indexOf("message")>=0||at.indexOf("description")>=0))return M(p);if(at.length===0){if(K(p)){var nt=p.name?": "+p.name:"";return c.stylize("[Function"+nt+"]","special")}if(d(p))return c.stylize(RegExp.prototype.toString.call(p),"regexp");if($(p))return c.stylize(Date.prototype.toString.call(p),"date");if(W(p))return M(p)}var lt,ut="",Nt=!1,yt=["{","}"];return L(p)&&(Nt=!0,yt=["[","]"]),K(p)&&(ut=" [Function"+(p.name?": "+p.name:"")+"]"),d(p)&&(ut=" "+RegExp.prototype.toString.call(p)),$(p)&&(ut=" "+Date.prototype.toUTCString.call(p)),W(p)&&(ut=" "+M(p)),at.length!==0||Nt&&p.length!=0?j<0?d(p)?c.stylize(RegExp.prototype.toString.call(p),"regexp"):c.stylize("[Object]","special"):(c.seen.push(p),lt=Nt?function(rt,Y,st,Ot,Ht){for(var Mt=[],Rt=0,re=Y.length;Rt<re;++Rt)$t(Y,String(Rt))?Mt.push(I(rt,Y,st,Ot,String(Rt),!0)):Mt.push("");return Ht.forEach(function(Vt){Vt.match(/^\d+$/)||Mt.push(I(rt,Y,st,Ot,Vt,!0))}),Mt}(c,p,j,q,at):at.map(function(rt){return I(c,p,j,q,rt,Nt)}),c.seen.pop(),function(rt,Y,st){return rt.reduce(function(Ot,Ht){return Ht.indexOf(`
`),Ot+Ht.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?st[0]+(Y===""?"":Y+`
 `)+" "+rt.join(`,
  `)+" "+st[1]:st[0]+Y+" "+rt.join(", ")+" "+st[1]}(lt,ut,yt)):yt[0]+ut+yt[1]}function M(c){return"["+Error.prototype.toString.call(c)+"]"}function I(c,p,j,V,ht,at){var q,nt,lt;if((lt=Object.getOwnPropertyDescriptor(p,ht)||{value:p[ht]}).get?nt=lt.set?c.stylize("[Getter/Setter]","special"):c.stylize("[Getter]","special"):lt.set&&(nt=c.stylize("[Setter]","special")),$t(V,ht)||(q="["+ht+"]"),nt||(c.seen.indexOf(lt.value)<0?(nt=A(j)?m(c,lt.value,null):m(c,lt.value,j-1)).indexOf(`
`)>-1&&(nt=at?nt.split(`
`).map(function(ut){return"  "+ut}).join(`
`).substr(2):`
`+nt.split(`
`).map(function(ut){return"   "+ut}).join(`
`)):nt=c.stylize("[Circular]","special")),a(q)){if(at&&ht.match(/^\d+$/))return nt;(q=JSON.stringify(""+ht)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(q=q.substr(1,q.length-2),q=c.stylize(q,"name")):(q=q.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),q=c.stylize(q,"string"))}return q+": "+nt}function L(c){return Array.isArray(c)}function H(c){return typeof c=="boolean"}function A(c){return c===null}function N(c){return typeof c=="number"}function i(c){return typeof c=="string"}function a(c){return c===void 0}function d(c){return C(c)&&tt(c)==="[object RegExp]"}function C(c){return typeof c=="object"&&c!==null}function $(c){return C(c)&&tt(c)==="[object Date]"}function W(c){return C(c)&&(tt(c)==="[object Error]"||c instanceof Error)}function K(c){return typeof c=="function"}function tt(c){return Object.prototype.toString.call(c)}function gt(c){return c<10?"0"+c.toString(10):c.toString(10)}f.debuglog=function(c){if(a(E)&&(E=F.env.NODE_DEBUG||""),c=c.toUpperCase(),!U[c])if(new RegExp("\\b"+c+"\\b","i").test(E)){var p=F.pid;U[c]=function(){var j=f.format.apply(f,arguments);console.error("%s %d: %s",c,p,j)}}else U[c]=function(){};return U[c]},f.inspect=y,y.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},y.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},f.isArray=L,f.isBoolean=H,f.isNull=A,f.isNullOrUndefined=function(c){return c==null},f.isNumber=N,f.isString=i,f.isSymbol=function(c){return typeof c=="symbol"},f.isUndefined=a,f.isRegExp=d,f.isObject=C,f.isDate=$,f.isError=W,f.isFunction=K,f.isPrimitive=function(c){return c===null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||typeof c=="symbol"||c===void 0},f.isBuffer=O(384);var mt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function et(){var c=new Date,p=[gt(c.getHours()),gt(c.getMinutes()),gt(c.getSeconds())].join(":");return[c.getDate(),mt[c.getMonth()],p].join(" ")}function $t(c,p){return Object.prototype.hasOwnProperty.call(c,p)}f.log=function(){console.log("%s - %s",et(),f.format.apply(f,arguments))},f.inherits=O(717),f._extend=function(c,p){if(!p||!C(p))return c;for(var j=Object.keys(p),V=j.length;V--;)c[j[V]]=p[j[V]];return c}}},De={};function ft(P){var f=De[P];if(f!==void 0)return f.exports;var O=De[P]={exports:{}};return vn[P].call(O.exports,O,O.exports,ft),O.exports}ft.n=P=>{var f=P&&P.__esModule?()=>P.default:()=>P;return ft.d(f,{a:f}),f},ft.d=(P,f)=>{for(var O in f)ft.o(f,O)&&!ft.o(P,O)&&Object.defineProperty(P,O,{enumerable:!0,get:f[O]})},ft.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),ft.o=(P,f)=>Object.prototype.hasOwnProperty.call(P,f),ft.r=P=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(P,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(P,"__esModule",{value:!0})};var sn={};return(()=>{ft.r(sn),ft.d(sn,{LSPluginUser:()=>b,setupPluginUserInstance:()=>Z});var P=ft(520);ft(856);const f=function(e,t){return e===t||e!=e&&t!=t},O=function(e,t){for(var n=e.length;n--;)if(f(e[n][0],t))return n;return-1};var F=Array.prototype.splice;function x(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}x.prototype.clear=function(){this.__data__=[],this.size=0},x.prototype.delete=function(e){var t=this.__data__,n=O(t,e);return!(n<0||(n==t.length-1?t.pop():F.call(t,n,1),--this.size,0))},x.prototype.get=function(e){var t=this.__data__,n=O(t,e);return n<0?void 0:t[n][1]},x.prototype.has=function(e){return O(this.__data__,e)>-1},x.prototype.set=function(e,t){var n=this.__data__,o=O(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this};const E=x,U=typeof an=="object"&&an&&an.Object===Object&&an;var y=typeof self=="object"&&self&&self.Object===Object&&self;const u=U||y||Function("return this")(),g=u.Symbol;var m=Object.prototype,M=m.hasOwnProperty,I=m.toString,L=g?g.toStringTag:void 0,H=Object.prototype.toString,A=g?g.toStringTag:void 0;const N=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":A&&A in Object(e)?function(t){var n=M.call(t,L),o=t[L];try{t[L]=void 0;var s=!0}catch{}var l=I.call(t);return s&&(n?t[L]=o:delete t[L]),l}(e):function(t){return H.call(t)}(e)},i=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},a=function(e){if(!i(e))return!1;var t=N(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},d=u["__core-js_shared__"];var C,$=(C=/[^.]+$/.exec(d&&d.keys&&d.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",W=Function.prototype.toString,K=/^\[object .+?Constructor\]$/,tt=Function.prototype,gt=Object.prototype,mt=tt.toString,et=gt.hasOwnProperty,$t=RegExp("^"+mt.call(et).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const c=function(e){return!(!i(e)||(t=e,$&&$ in t))&&(a(e)?$t:K).test(function(n){if(n!=null){try{return W.call(n)}catch{}try{return n+""}catch{}}return""}(e));var t},p=function(e,t){var n=function(o,s){return o?.[s]}(e,t);return c(n)?n:void 0},j=p(u,"Map"),V=p(Object,"create");var ht=Object.prototype.hasOwnProperty,at=Object.prototype.hasOwnProperty;function q(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}q.prototype.clear=function(){this.__data__=V?V(null):{},this.size=0},q.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},q.prototype.get=function(e){var t=this.__data__;if(V){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return ht.call(t,e)?t[e]:void 0},q.prototype.has=function(e){var t=this.__data__;return V?t[e]!==void 0:at.call(t,e)},q.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=V&&t===void 0?"__lodash_hash_undefined__":t,this};const nt=q,lt=function(e,t){var n,o,s=e.__data__;return((o=typeof(n=t))=="string"||o=="number"||o=="symbol"||o=="boolean"?n!=="__proto__":n===null)?s[typeof t=="string"?"string":"hash"]:s.map};function ut(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}ut.prototype.clear=function(){this.size=0,this.__data__={hash:new nt,map:new(j||E),string:new nt}},ut.prototype.delete=function(e){var t=lt(this,e).delete(e);return this.size-=t?1:0,t},ut.prototype.get=function(e){return lt(this,e).get(e)},ut.prototype.has=function(e){return lt(this,e).has(e)},ut.prototype.set=function(e,t){var n=lt(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this};const Nt=ut;function yt(e){var t=this.__data__=new E(e);this.size=t.size}yt.prototype.clear=function(){this.__data__=new E,this.size=0},yt.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},yt.prototype.get=function(e){return this.__data__.get(e)},yt.prototype.has=function(e){return this.__data__.has(e)},yt.prototype.set=function(e,t){var n=this.__data__;if(n instanceof E){var o=n.__data__;if(!j||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new Nt(o)}return n.set(e,t),this.size=n.size,this};const rt=yt,Y=function(){try{var e=p(Object,"defineProperty");return e({},"",{}),e}catch{}}(),st=function(e,t,n){t=="__proto__"&&Y?Y(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Ot=function(e,t,n){(n!==void 0&&!f(e[t],n)||n===void 0&&!(t in e))&&st(e,t,n)},Ht=function(e,t,n){for(var o=-1,s=Object(e),l=n(e),h=l.length;h--;){var S=l[++o];if(t(s[S],S,s)===!1)break}return e};var Mt=Lt&&!Lt.nodeType&&Lt,Rt=Mt&&!0&&dt&&!dt.nodeType&&dt,re=Rt&&Rt.exports===Mt?u.Buffer:void 0,Vt=re?re.allocUnsafe:void 0;const Pe=u.Uint8Array,cn=function(e,t){var n,o,s=t?(n=e.buffer,o=new n.constructor(n.byteLength),new Pe(o).set(new Pe(n)),o):e.buffer;return new e.constructor(s,e.byteOffset,e.length)};var Ue=Object.create;const ln=function(){function e(){}return function(t){if(!i(t))return{};if(Ue)return Ue(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),D=(_=Object.getPrototypeOf,T=Object,function(e){return _(T(e))});var _,T,G=Object.prototype;const X=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||G)},bt=function(e){return e!=null&&typeof e=="object"},Bt=function(e){return bt(e)&&N(e)=="[object Arguments]"};var Dt=Object.prototype,ze=Dt.hasOwnProperty,de=Dt.propertyIsEnumerable;const oe=Bt(function(){return arguments}())?Bt:function(e){return bt(e)&&ze.call(e,"callee")&&!de.call(e,"callee")},me=Array.isArray,$e=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},ge=function(e){return e!=null&&$e(e.length)&&!a(e)};var He=Lt&&!Lt.nodeType&&Lt,Yt=He&&!0&&dt&&!dt.nodeType&&dt,Be=Yt&&Yt.exports===He?u.Buffer:void 0;const qe=(Be?Be.isBuffer:void 0)||function(){return!1};var un=Function.prototype,ye=Object.prototype,ie=un.toString,Tt=ye.hasOwnProperty,Ge=ie.call(Object),J={};J["[object Float32Array]"]=J["[object Float64Array]"]=J["[object Int8Array]"]=J["[object Int16Array]"]=J["[object Int32Array]"]=J["[object Uint8Array]"]=J["[object Uint8ClampedArray]"]=J["[object Uint16Array]"]=J["[object Uint32Array]"]=!0,J["[object Arguments]"]=J["[object Array]"]=J["[object ArrayBuffer]"]=J["[object Boolean]"]=J["[object DataView]"]=J["[object Date]"]=J["[object Error]"]=J["[object Function]"]=J["[object Map]"]=J["[object Number]"]=J["[object Object]"]=J["[object RegExp]"]=J["[object Set]"]=J["[object String]"]=J["[object WeakMap]"]=!1;var ae=Lt&&!Lt.nodeType&&Lt,Kt=ae&&!0&&dt&&!dt.nodeType&&dt,be=Kt&&Kt.exports===ae&&U.process,We=function(){try{return Kt&&Kt.require&&Kt.require("util").types||be&&be.binding&&be.binding("util")}catch{}}(),Je=We&&We.isTypedArray;const ve=Je?function(e){return function(t){return e(t)}}(Je):function(e){return bt(e)&&$e(e.length)&&!!J[N(e)]},vt=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]};var Xt=Object.prototype.hasOwnProperty;const Pt=function(e,t,n){var o=e[t];Xt.call(e,t)&&f(o,n)&&(n!==void 0||t in e)||st(e,t,n)};var _e=/^(?:0|[1-9]\d*)$/;const se=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&_e.test(e))&&e>-1&&e%1==0&&e<t};var pn=Object.prototype.hasOwnProperty;const fn=function(e,t){var n=me(e),o=!n&&oe(e),s=!n&&!o&&qe(e),l=!n&&!o&&!s&&ve(e),h=n||o||s||l,S=h?function(z,R){for(var B=-1,it=Array(z);++B<z;)it[B]=R(B);return it}(e.length,String):[],k=S.length;for(var v in e)!t&&!pn.call(e,v)||h&&(v=="length"||s&&(v=="offset"||v=="parent")||l&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||se(v,k))||S.push(v);return S};var hn=Object.prototype.hasOwnProperty;const Ze=function(e){if(!i(e))return function(s){var l=[];if(s!=null)for(var h in Object(s))l.push(h);return l}(e);var t=X(e),n=[];for(var o in e)(o!="constructor"||!t&&hn.call(e,o))&&n.push(o);return n},ce=function(e){return ge(e)?fn(e,!0):Ze(e)},ct=function(e){return function(t,n,o,s){var l=!o;o||(o={});for(var h=-1,S=n.length;++h<S;){var k=n[h],v=s?s(o[k],t[k],k,o,t):void 0;v===void 0&&(v=t[k]),l?st(o,k,v):Pt(o,k,v)}return o}(e,ce(e))},Ve=function(e,t,n,o,s,l,h){var S,k=vt(e,n),v=vt(t,n),z=h.get(v);if(z)Ot(e,n,z);else{var R=l?l(k,v,n+"",e,t,h):void 0,B=R===void 0;if(B){var it=me(v),Ft=!it&&qe(v),zt=!it&&!Ft&&ve(v);R=v,it||Ft||zt?me(k)?R=k:bt(S=k)&&ge(S)?R=function(Q,xt){var wt=-1,Re=Q.length;for(xt||(xt=Array(Re));++wt<Re;)xt[wt]=Q[wt];return xt}(k):Ft?(B=!1,R=function(Q,xt){if(xt)return Q.slice();var wt=Q.length,Re=Vt?Vt(wt):new Q.constructor(wt);return Q.copy(Re),Re}(v,!0)):zt?(B=!1,R=cn(v,!0)):R=[]:function(Q){if(!bt(Q)||N(Q)!="[object Object]")return!1;var xt=D(Q);if(xt===null)return!0;var wt=Tt.call(xt,"constructor")&&xt.constructor;return typeof wt=="function"&&wt instanceof wt&&ie.call(wt)==Ge}(v)||oe(v)?(R=k,oe(k)?R=ct(k):i(k)&&!a(k)||(R=function(Q){return typeof Q.constructor!="function"||X(Q)?{}:ln(D(Q))}(v))):B=!1}B&&(h.set(v,R),s(R,v,o,l,h),h.delete(v)),Ot(e,n,R)}},pt=function e(t,n,o,s,l){t!==n&&Ht(n,function(h,S){if(l||(l=new rt),i(h))Ve(t,n,S,o,e,s,l);else{var k=s?s(vt(t,S),h,S+"",t,n,l):void 0;k===void 0&&(k=h),Ot(t,S,k)}},ce)},we=function(e){return e},ot=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var qt=Math.max;const xe=Y?function(e,t){return Y(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:we;var Ye=Date.now;const Ce=function(e){var t=0,n=0;return function(){var o=Ye(),s=16-(o-n);if(n=o,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(xe),Ke=(kt=function(e,t,n){pt(e,t,n)},function(e,t){return Ce(function(n,o,s){return o=qt(o===void 0?n.length-1:o,0),function(){for(var l=arguments,h=-1,S=qt(l.length-o,0),k=Array(S);++h<S;)k[h]=l[o+h];h=-1;for(var v=Array(o+1);++h<o;)v[h]=l[h];return v[o]=s(k),ot(n,this,v)}}(e,t,we),e+"")}(function(e,t){var n=-1,o=t.length,s=o>1?t[o-1]:void 0,l=o>2?t[2]:void 0;for(s=kt.length>3&&typeof s=="function"?(o--,s):void 0,l&&function(S,k,v){if(!i(v))return!1;var z=typeof k;return!!(z=="number"?ge(v)&&se(k,v.length):z=="string"&&k in v)&&f(v[k],S)}(t[0],t[1],l)&&(s=o<3?void 0:s,o=1),e=Object(e);++n<o;){var h=t[n];h&&kt(e,h,n)}return e}));var kt,At=function(){return(At=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function Se(e){return e.toLowerCase()}var Oe=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Gt=/[^A-Z0-9]+/gi;function Qt(e,t,n){return t instanceof RegExp?e.replace(t,n):t.reduce(function(o,s){return o.replace(s,n)},e)}const te=navigator.platform.toLowerCase()==="win32"?P.win32:P.posix,ee=function(e,t){return t===void 0&&(t={}),function(n,o){return o===void 0&&(o={}),function(s,l){l===void 0&&(l={});for(var h=l.splitRegexp,S=h===void 0?Oe:h,k=l.stripRegexp,v=k===void 0?Gt:k,z=l.transform,R=z===void 0?Se:z,B=l.delimiter,it=B===void 0?" ":B,Ft=Qt(Qt(s,S,"$1\0$2"),v,"\0"),zt=0,Q=Ft.length;Ft.charAt(zt)==="\0";)zt++;for(;Ft.charAt(Q-1)==="\0";)Q--;return Ft.slice(zt,Q).split("\0").map(R).join(it)}(n,At({delimiter:"."},o))}(e,At({delimiter:"_"},t))},Ae=Ke;function Ut(e,t){let n,o,s=!1;const l=S=>k=>{e&&clearTimeout(e),S(k),s=!0},h=new Promise((S,k)=>{n=l(S),o=l(k),e&&(e=setTimeout(()=>o(new Error(`[deferred timeout] ${t}`)),e))});return{created:Date.now(),setTag:S=>t=S,resolve:n,reject:o,promise:h,get settled(){return s}}}const Wt=new Map;window.__injectedUIEffects=Wt;var Jt=ft(227),Ee=ft.n(Jt);const jt="application/x-postmate-v1+json";let Xe=0;const Te={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},le=(e,t)=>!(typeof t=="string"&&e.origin!==t||!e.data||typeof e.data=="object"&&!("postmate"in e.data)||e.data.type!==jt||!Te[e.data.postmate]);class ke{parent;frame;child;events={};childOrigin;listener;constructor(t){this.parent=t.parent,this.frame=t.frame,this.child=t.child,this.childOrigin=t.childOrigin,this.listener=n=>{if(!le(n,this.childOrigin))return!1;const{data:o,name:s}=((n||{}).data||{}).value||{};n.data.postmate==="emit"&&s in this.events&&this.events[s].forEach(l=>{l.call(this,o)})},this.parent.addEventListener("message",this.listener,!1)}get(t){return new Promise(n=>{const o=++Xe,s=l=>{l.data.uid===o&&l.data.postmate==="reply"&&(this.parent.removeEventListener("message",s,!1),n(l.data.value))};this.parent.addEventListener("message",s,!1),this.child.postMessage({postmate:"request",type:jt,property:t,uid:o},this.childOrigin)})}call(t,n){this.child.postMessage({postmate:"call",type:jt,property:t,data:n},this.childOrigin)}on(t,n){this.events[t]||(this.events[t]=[]),this.events[t].push(n)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class je{model;parent;parentOrigin;child;constructor(t){this.model=t.model,this.parent=t.parent,this.parentOrigin=t.parentOrigin,this.child=t.child,this.child.addEventListener("message",n=>{if(!le(n,this.parentOrigin))return;const{property:o,uid:s,data:l}=n.data;n.data.postmate!=="call"?((h,S)=>{const k=typeof h[S]=="function"?h[S]():h[S];return Promise.resolve(k)})(this.model,o).then(h=>{n.source.postMessage({property:o,postmate:"reply",type:jt,uid:s,value:h},n.origin)}):o in this.model&&typeof this.model[o]=="function"&&this.model[o](l)})}emit(t,n){this.parent.postMessage({postmate:"emit",type:jt,value:{name:t,data:n}},this.parentOrigin)}}class It{static debug=!1;container;parent;frame;child;childOrigin;url;model;static Model;constructor(t){this.container=t.container,this.url=t.url,this.parent=window,this.frame=document.createElement("iframe"),t.id&&(this.frame.id=t.id),t.name&&(this.frame.name=t.name),this.frame.classList.add.apply(this.frame.classList,t.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=t.model||{}}sendHandshake(t){const n=(l=>{const h=document.createElement("a");h.href=l;const S=h.protocol.length>4?h.protocol:window.location.protocol,k=h.host.length?h.port==="80"||h.port==="443"?h.hostname:h.host:window.location.host;return h.origin||`${S}//${k}`})(t=t||this.url);let o,s=0;return new Promise((l,h)=>{const S=v=>!!le(v,n)&&(v.data.postmate==="handshake-reply"?(clearInterval(o),this.parent.removeEventListener("message",S,!1),this.childOrigin=v.origin,l(new ke(this))):h("Failed handshake"));this.parent.addEventListener("message",S,!1);const k=()=>{s++,this.child.postMessage({postmate:"handshake",type:jt,model:this.model},n),s===5&&clearInterval(o)};this.frame.addEventListener("load",()=>{k(),o=setInterval(k,500)}),this.frame.src=t})}}class ue{child;model;parent;parentOrigin;constructor(t){this.child=window,this.model=t,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((t,n)=>{const o=s=>{if(s.data.postmate){if(s.data.postmate==="handshake"){this.child.removeEventListener("message",o,!1),s.source.postMessage({postmate:"handshake-reply",type:jt},s.origin),this.parentOrigin=s.origin;const l=s.data.model;return l&&Object.keys(l).forEach(h=>{this.model[h]=l[h]}),t(new je(this))}return n("Handshake Reply Failed")}};this.child.addEventListener("message",o,!1)})}}var Ie=ft(729),Fe=ft.n(Ie);const{importHTML:dn,createSandboxContainer:Zt}=window.QSandbox||{};function mn(e,t){return e.startsWith("http")?fetch(e,t):(e=e.replace("file://",""),new Promise(async(n,o)=>{try{const s=await window.apis.doAction(["readFile",e]);n({text:()=>s})}catch(s){console.error(s),o(s)}}))}class Qe extends Fe(){_pluginLocal;_frame;_root;_loaded=!1;_unmountFns=[];constructor(t){super(),this._pluginLocal=t,t._dispose(()=>{this._unmount()})}async load(){const{name:t,entry:n}=this._pluginLocal.options;if(this.loaded||!n)return;const{template:o,execScripts:s}=await dn(n,{fetch:mn});this._mount(o,document.body);const l=Zt(t,{elementGetter:()=>this._root?.firstChild}).instance.proxy;l.__shadow_mode__=!0,l.LSPluginLocal=this._pluginLocal,l.LSPluginShadow=this,l.LSPluginUser=l.logseq=new b(this._pluginLocal.toJSON(),this._pluginLocal.caller);const h=await s(l,!0);this._unmountFns.push(h.unmount),this._loaded=!0}_mount(t,n){const o=this._frame=document.createElement("div");o.classList.add("lsp-shadow-sandbox"),o.id=this._pluginLocal.id,this._root=o.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${t}</div>`,n.appendChild(o),this.emit("mounted")}_unmount(){for(const t of this._unmountFns)t&&t.call(null)}destroy(){this.frame?.parentNode?.removeChild(this.frame)}get loaded(){return this._loaded}get document(){return this._root?.firstChild}get frame(){return this._frame}}const Ct=Ee()("LSPlugin:caller"),ne="#await#response#",Le="#lspmsg#error#",pe=e=>`#lspmsg#${e}`;class fe extends Fe(){_pluginLocal;_connected=!1;_parent;_child;_shadow;_status;_userModel={};_call;_callUserModel;_debugTag="";constructor(t){super(),this._pluginLocal=t,t&&(this._debugTag=t.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:t}=this._pluginLocal;t?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(t={}){if(this._connected)return;const n=this,o=this._pluginLocal!=null;let s=0;const l=new Map,h=Ut(5e3),S=this._extendUserModel({"#lspmsg#ready#":async v=>{S[pe(v?.pid)]=({type:z,payload:R})=>{Ct(`[host (_call) -> *user] ${this._debugTag}`,z,R),n.emit(z,R)},await h.resolve()},"#lspmsg#beforeunload#":async v=>{const z=Ut(1e4);n.emit("beforeunload",Object.assign({actor:z},v)),await z.promise},"#lspmsg#settings#":async({type:v,payload:z})=>{n.emit("settings:changed",z)},"#lspmsg#":async({ns:v,type:z,payload:R})=>{Ct(`[host (async) -> *user] ${this._debugTag} ns=${v} type=${z}`,R),v&&v.startsWith("hook")?n.emit(`${v}:${z}`,R):n.emit(z,R)},"#lspmsg#reply#":({_sync:v,result:z})=>{if(Ct(`[sync host -> *user] #${v}`,z),l.has(v)){const R=l.get(v);R&&(z?.hasOwnProperty(Le)?R.reject(z[Le]):R.resolve(z),l.delete(v))}},...t});if(o)return await h.promise,JSON.parse(JSON.stringify(this._pluginLocal?.toJSON()));const k=new ue(S).sendHandshakeReply();return this._status="pending",await k.then(v=>{this._child=v,this._connected=!0,this._call=async(z,R={},B)=>{if(B){const it=++s;l.set(it,B),R._sync=it,B.setTag(`async call #${it}`),Ct(`async call #${it}`)}return v.emit(pe(S.baseInfo.id),{type:z,payload:R}),B?.promise},this._callUserModel=async(z,R)=>{try{S[z](R)}catch{Ct(`[model method] #${z} not existed`)}},setInterval(()=>{if(l.size>100)for(const[z,R]of l)R.settled&&l.delete(z)},18e5)}).finally(()=>{this._status=void 0}),await h.promise,S.baseInfo}async call(t,n={}){return this._call?.call(this,t,n)}async callAsync(t,n={}){const o=Ut(1e4);return this._call?.call(this,t,n,o)}async callUserModel(t,n={}){return this._callUserModel?.call(this,t,n)}async _setupIframeSandbox(){const t=this._pluginLocal,n=t.id,o=`${n}_lsp_main`,s=new URL(t.options.entry);s.searchParams.set("__v__",t.options.version);const l=document.querySelector(`#${o}`);l&&l.parentElement.removeChild(l);const h=document.createElement("div");h.classList.add("lsp-iframe-sandbox-container"),h.id=o,h.dataset.pid=n;try{const v=(await this._pluginLocal._loadLayoutsData())?.$$0;if(v){h.dataset.inited_layout="true";const{width:z,height:R,left:B,top:it}=v;Object.assign(h.style,{width:z+"px",height:R+"px",left:B+"px",top:it+"px"})}}catch(v){console.error("[Restore Layout Error]",v)}document.body.appendChild(h);let S,k=new It({id:n+"_iframe",container:h,url:s.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(t.toJSON()))}}).sendHandshake();return this._status="pending",new Promise((v,z)=>{S=setTimeout(()=>{z(new Error("handshake Timeout"))},8e3),k.then(R=>{this._parent=R,this._connected=!0,this.emit("connected"),R.on(pe(t.id),({type:B,payload:it})=>{Ct("[user -> *host] ",B,it),this._pluginLocal?.emit(B,it||{})}),this._call=async(...B)=>{await R.call(pe(t.id),{type:B[0],payload:Object.assign(B[1]||{},{$$pid:t.id})})},this._callUserModel=async(B,it)=>{if(B.startsWith(ne))return await R.get(B.replace(ne,""));R.call(B,it)},v(null)}).catch(R=>{z(R)}).finally(()=>{clearTimeout(S)})}).catch(v=>{throw Ct("[iframe sandbox] error",v),v}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){const t=this._pluginLocal,n=this._shadow=new Qe(t);try{this._status="pending",await n.load(),this._connected=!0,this.emit("connected"),this._call=async(o,s={},l)=>(l&&(s.actor=l),this._pluginLocal?.emit(o,Object.assign(s,{$$pid:t.id})),l?.promise),this._callUserModel=async(...o)=>{let s=o[0];s?.startsWith(ne)&&(s=s.replace(ne,""));const l=o[1]||{},h=this._userModel[s];typeof h=="function"&&await h.call(null,l)}}catch(o){throw Ct("[shadow sandbox] error",o),o}finally{this._status=void 0}}_extendUserModel(t){return Object.assign(this._userModel,t)}_getSandboxIframeContainer(){return this._parent?.frame.parentNode}_getSandboxShadowContainer(){return this._shadow?.frame.parentNode}_getSandboxIframeRoot(){return this._parent?.frame}_getSandboxShadowRoot(){return this._shadow?.frame}set debugTag(t){this._debugTag=t}async destroy(){let t=null;this._parent&&(t=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(t=this._getSandboxShadowContainer(),this._shadow.destroy()),t?.parentNode.removeChild(t)}}class Ne{ctx;constructor(t){this.ctx=t}get ctxId(){return this.ctx.baseInfo.id}setItem(t,n){return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,t,n]})}getItem(t){return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,t]})}removeItem(t){return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,t]})}clear(){return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId]})}hasItem(t){return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,t]})}}class gn{ctx;constructor(t){this.ctx=t}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(t,...n){const o=this.ensureHostScope();return t=ee(t)?.toLowerCase(),o.logseq.api["exper_"+t]?.apply(o,n)}async loadScripts(...t){(t=t.map(n=>n?.startsWith("http")?n:this.ctx.resolveResourceFullUrl(n))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...t)}registerFencedCodeRenderer(t,n){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,t,n)}registerExtensionsEnhancer(t,n){const o=this.ensureHostScope();switch(t){case"katex":o.katex&&n(o.katex).catch(console.error)}return o.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,t,n)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}const St=e=>`task_callback_${e}`;class tn{_client;_requestId;_requestOptions;_promise;_aborted=!1;constructor(t,n,o={}){this._client=t,this._requestId=n,this._requestOptions=o,this._promise=new Promise((S,k)=>{if(!this._requestId)return k(null);this._client.once(St(this._requestId),v=>{v&&v instanceof Error?k(v):S(v)})});const{success:s,fail:l,final:h}=this._requestOptions;this._promise.then(S=>{s?.(S)}).catch(S=>{l?.(S)}).finally(()=>{h?.()})}abort(){this._requestOptions.abortable&&!this._aborted&&(this._client.ctx._execCallableAPI("http_request_abort",this._requestId),this._aborted=!0)}get promise(){return this._promise}get client(){return this._client}get requestId(){return this._requestId}}class he extends Ie.EventEmitter{_ctx;constructor(t){super(),this._ctx=t,this.ctx.caller.on("#lsp#request#callback",n=>{const o=n?.requestId;o&&this.emit(St(o),n?.payload)})}static createRequestTask(t,n,o){return new tn(t,n,o)}async _request(t){const n=this.ctx.baseInfo.id,{success:o,fail:s,final:l,...h}=t,S=this.ctx.Experiments.invokeExperMethod("request",n,h),k=he.createRequestTask(this.ctx.Request,S,t);return h.abortable?k:k.promise}get ctx(){return this._ctx}}const en=Symbol.for("proxy-continue"),yn=Ee()("LSPlugin:user");function Et(e,t,n){if(typeof n!="function")return!1;const{key:o,label:s,desc:l,palette:h,keybinding:S}=t,k=`SimpleCommandHook${o}${++Me}`;this.Editor["on"+k](n),this.caller?.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:o,label:s,type:e,desc:l,keybinding:S},["editor/hook",k]],h]})}let _t=null;const nn={async getInfo(e){return _t||(_t=await this._execCallableAPIAsync("get-app-info")),typeof e=="string"?_t[e]:_t},registerCommand:Et,registerCommandPalette(e,t){const{key:n,label:o,keybinding:s}=e;return Et.call(this,"$palette$",{key:n,label:o,palette:!0,keybinding:s},t)},registerCommandShortcut(e,t){const{binding:n}=e,o="$shortcut$",s=o+ee(n);return Et.call(this,o,{key:s,palette:!1,keybinding:e},t)},registerUIItem(e,t){const n=this.baseInfo.id;this.caller?.call("api:call",{method:"register-plugin-ui-item",args:[n,e,t]})},registerPageMenuItem(e,t){if(typeof t!="function")return!1;const n=e+"_"+this.baseInfo.id,o=e;Et.call(this,"page-menu-item",{key:n,label:o},t)},setFullScreen(e){const t=(...n)=>this._callWin("setFullScreen",...n);e==="toggle"?this._callWin("isFullScreen").then(n=>{n?t():t(!0)}):e?t(!0):t()}};let Me=0;const rn={newBlockUUID(){return this._execCallableAPIAsync("new_block_uuid")},registerSlashCommand(e,t){yn("Register slash command #",this.baseInfo.id,e,t),typeof t=="function"&&(t=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",t]]),t=t.map(n=>{const[o,...s]=n;switch(o){case"editor/hook":let l=s[0],h=()=>{this.caller?.callUserModel(l)};typeof l=="function"&&(h=l);const S=`SlashCommandHook${o}${++Me}`;n[1]=S,this.Editor["on"+S](h)}return n}),this.caller?.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[e,t]]})},registerBlockContextMenuItem(e,t){if(typeof t!="function")return!1;const n=e+"_"+this.baseInfo.id,o=e;Et.call(this,"block-context-menu-item",{key:n,label:o},t)},scrollToBlockInPage(e,t,n){const o="block-content-"+t;n?.replaceState?this.App.replaceState("page",{name:e},{anchor:o}):this.App.pushState("page",{name:e},{anchor:o})}},on={onBlockChanged(e,t){const n=this.baseInfo.id,o=`hook:db:${ee(`block:${e}`)}`,s=({block:l,txData:h,txMeta:S})=>{l.uuid===e&&t(l,h,S)};return this.caller.on(o,s),this.App._installPluginHook(n,o),()=>{this.caller.off(o,s),this.App._uninstallPluginHook(n,o)}}},bn={},r={},w={};class b extends Fe(){_baseInfo;_caller;_version="0.0.8";_debugTag="";_settingsSchema;_connected=!1;_ui=new Map;_mFileStorage;_mRequest;_mExperiments;_beforeunloadCallback;constructor(t,n){super(),this._baseInfo=t,this._caller=n,n.on("sys:ui:visible",o=>{o?.toggle&&this.toggleMainUI()}),n.on("settings:changed",o=>{const s=Object.assign({},this.settings),l=Object.assign(this._baseInfo.settings,o);this.emit("settings:changed",{...l},s)}),n.on("beforeunload",async o=>{const{actor:s,...l}=o,h=this._beforeunloadCallback;try{h&&await h(l),s?.resolve(null)}catch(S){console.debug(`${n.debugTag} [beforeunload] `,S),s?.reject(S)}})}async ready(t,n){if(!this._connected)try{typeof t=="function"&&(n=t,t={});let o=await this._caller.connectToParent(t);this._connected=!0,o=Ae(this._baseInfo,o),this._settingsSchema&&(o.settings=function(s,l){const h=(l||[]).reduce((S,k)=>("default"in k&&(S[k.key]=k.default),S),{});return Object.assign(h,s)}(o.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema)),o?.id&&(this._debugTag=this._caller.debugTag=`#${o.id} [${o.name}]`);try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(s){console.warn(s)}n&&n.call(this,o)}catch(o){console.error(`${this._debugTag} [Ready Error]`,o)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(t){typeof t=="function"&&(this._beforeunloadCallback=t)}provideModel(t){return this.caller._extendUserModel(t),this}provideTheme(t){return this.caller.call("provider:theme",t),this}provideStyle(t){return this.caller.call("provider:style",t),this}provideUI(t){return this.caller.call("provider:ui",t),this}useSettingsSchema(t){return this.connected&&this.caller.call("settings:schema",{schema:t,isSync:!0}),this._settingsSchema=t,this}updateSettings(t){this.caller.call("settings:update",t)}onSettingsChanged(t){const n="settings:changed";return this.on(n,t),()=>this.off(n,t)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(t){this.caller.call("main-ui:attrs",t)}setMainUIInlineStyle(t){this.caller.call("main-ui:style",t)}hideMainUI(t){const n={key:0,visible:!1,cursor:t?.restoreEditingCursor};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}showMainUI(t){const n={key:0,visible:!0,autoFocus:t?.autoFocus};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}toggleMainUI(){const t=this._ui.get(0);t&&t.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const t=this._ui.get(0);return Boolean(t&&t.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get settings(){return this.baseInfo?.settings}get caller(){return this._caller}resolveResourceFullUrl(t){if(this.ensureConnected(),t)return t=t.replace(/^[.\\/]+/,""),function(n,...o){try{const s=new URL(n);if(!s.origin)throw new Error(null);const l=te.join(n.substr(s.origin.length),...o);return s.origin+l}catch{return te.join(n,...o)}}(this._baseInfo.lsr,t)}_makeUserProxy(t,n){const o=this,s=this.caller;return new Proxy(t,{get(l,h,S){const k=l[h];return function(...v){if(k){const R=k.apply(o,v.concat(n));if(R!==en)return R}if(n){const R=h.toString().match(/^(once|off|on)/i);if(R!=null){const B=R[0].toLowerCase(),it=R.input.slice(B.length),Ft=B==="off",zt=o.baseInfo.id,Q=`hook:${n}:${ee(it)}`,xt=v[0];s[B](Q,xt);const wt=()=>{s.off(Q,xt),s.listenerCount(Q)||o.App._uninstallPluginHook(zt,Q)};return Ft?void wt():(o.App._installPluginHook(zt,Q),wt)}}let z=h;return["git","ui","assets"].includes(n)&&(z=n+"_"+z),s.callAsync("api:call",{tag:n,method:z,args:v})}}})}_execCallableAPIAsync(t,...n){return this._caller.callAsync("api:call",{method:t,args:n})}_execCallableAPI(t,...n){this._caller.call("api:call",{method:t,args:n})}_callWin(...t){return this._execCallableAPIAsync("_callMainWin",...t)}get App(){return this._makeUserProxy(nn,"app")}get Editor(){return this._makeUserProxy(rn,"editor")}get DB(){return this._makeUserProxy(on,"db")}get Git(){return this._makeUserProxy(bn,"git")}get UI(){return this._makeUserProxy(r,"ui")}get Assets(){return this._makeUserProxy(w,"assets")}get FileStorage(){let t=this._mFileStorage;return t||(t=this._mFileStorage=new Ne(this)),t}get Request(){let t=this._mRequest;return t||(t=this._mRequest=new he(this)),t}get Experiments(){let t=this._mExperiments;return t||(t=this._mExperiments=new gn(this)),t}}function Z(e,t){return new b(e,t)}if(window.__LSP__HOST__==null){const e=new fe(null);window.logseq=Z({},e)}})(),sn})())})(_n,_n.exports);export{an as c,wn as g};
