var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function t(e){return e&&e.__esModule?e.default:e}var n={},r={},o=e.parcelRequire834a;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},e.parcelRequire834a=o),o.register("cVm5l",(function(t,n){
/*! For license information please see lsplugin.user.js.LICENSE.txt */self,t.exports=(()=>{var r={227:(e,t,n)=>{var r=n(155);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(447)(t);const{formatters:o}=e.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},447:(e,t,n)=>{e.exports=function(e){function t(e){let n,o=null;function a(...e){if(!a.enabled)return;const r=a,o=Number(new Date),i=o-(n||o);r.diff=i,r.prev=n,r.curr=o,n=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,o)=>{if("%%"===n)return"%";s++;const a=t.formatters[o];if("function"==typeof a){const t=e[s];n=a.call(r,t),e.splice(s,1),s--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null===o?t.enabled(e):o,set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},856:function(e){e.exports=function(){var e=Object.hasOwnProperty,t=Object.setPrototypeOf,n=Object.isFrozen,r=Object.getPrototypeOf,o=Object.getOwnPropertyDescriptor,a=Object.freeze,i=Object.seal,s=Object.create,l="undefined"!=typeof Reflect&&Reflect,c=l.apply,u=l.construct;c||(c=function(e,t,n){return e.apply(t,n)}),a||(a=function(e){return e}),i||(i=function(e){return e}),u||(u=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var d,h=x(Array.prototype.forEach),p=x(Array.prototype.pop),f=x(Array.prototype.push),g=x(String.prototype.toLowerCase),m=x(String.prototype.match),y=x(String.prototype.replace),v=x(String.prototype.indexOf),b=x(String.prototype.trim),w=x(RegExp.prototype.test),_=(d=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return u(d,t)});function x(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return c(e,t,r)}}function S(e,r){t&&t(e,null);for(var o=r.length;o--;){var a=r[o];if("string"==typeof a){var i=g(a);i!==a&&(n(r)||(r[o]=i),a=i)}e[a]=!0}return e}function T(t){var n=s(null),r=void 0;for(r in t)c(e,t,[r])&&(n[r]=t[r]);return n}function C(e,t){for(;null!==e;){var n=o(e,t);if(n){if(n.get)return x(n.get);if("function"==typeof n.value)return x(n.value)}e=r(e)}return function(e){return console.warn("fallback value for",e),null}}var A=a(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),D=a(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),k=a(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),M=a(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),E=a(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),O=a(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),F=a(["#text"]),j=a(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),L=a(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),I=a(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),R=a(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$=i(/\{\{[\s\S]*|[\s\S]*\}\}/gm),P=i(/<%[\s\S]*|[\s\S]*%>/gm),N=i(/^data-[\-\w.\u00B7-\uFFFF]/),U=i(/^aria-[\-\w]+$/),z=i(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),H=i(/^(?:\w+script|data):/i),Y=i(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function B(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var W=function(){return"undefined"==typeof window?null:window},G=function(e,t){if("object"!==(void 0===e?"undefined":q(e))||"function"!=typeof e.createPolicy)return null;var n=null,r="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(r)&&(n=t.currentScript.getAttribute(r));var o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}};return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W(),n=function(t){return e(t)};if(n.version="2.3.1",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var r=t.document,o=t.document,i=t.DocumentFragment,s=t.HTMLTemplateElement,l=t.Node,c=t.Element,u=t.NodeFilter,d=t.NamedNodeMap,x=void 0===d?t.NamedNodeMap||t.MozNamedAttrMap:d,J=t.Text,K=t.Comment,V=t.DOMParser,Z=t.trustedTypes,Q=c.prototype,X=C(Q,"cloneNode"),ee=C(Q,"nextSibling"),te=C(Q,"childNodes"),ne=C(Q,"parentNode");if("function"==typeof s){var re=o.createElement("template");re.content&&re.content.ownerDocument&&(o=re.content.ownerDocument)}var oe=G(Z,r),ae=oe&&$e?oe.createHTML(""):"",ie=o,se=ie.implementation,le=ie.createNodeIterator,ce=ie.createDocumentFragment,ue=ie.getElementsByTagName,de=r.importNode,he={};try{he=T(o).documentMode?o.documentMode:{}}catch(e){}var pe={};n.isSupported="function"==typeof ne&&se&&void 0!==se.createHTMLDocument&&9!==he;var fe=$,ge=P,me=N,ye=U,ve=H,be=Y,we=z,_e=null,xe=S({},[].concat(B(A),B(D),B(k),B(E),B(F))),Se=null,Te=S({},[].concat(B(j),B(L),B(I),B(R))),Ce=null,Ae=null,De=!0,ke=!0,Me=!1,Ee=!1,Oe=!1,Fe=!1,je=!1,Le=!1,Ie=!1,Re=!0,$e=!1,Pe=!0,Ne=!0,Ue=!1,ze={},He=null,Ye=S({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),qe=null,Be=S({},["audio","video","img","source","image","track"]),We=null,Ge=S({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Je="http://www.w3.org/1998/Math/MathML",Ke="http://www.w3.org/2000/svg",Ve="http://www.w3.org/1999/xhtml",Ze=Ve,Qe=!1,Xe=null,et=o.createElement("form"),tt=function(e){Xe&&Xe===e||(e&&"object"===(void 0===e?"undefined":q(e))||(e={}),e=T(e),_e="ALLOWED_TAGS"in e?S({},e.ALLOWED_TAGS):xe,Se="ALLOWED_ATTR"in e?S({},e.ALLOWED_ATTR):Te,We="ADD_URI_SAFE_ATTR"in e?S(T(Ge),e.ADD_URI_SAFE_ATTR):Ge,qe="ADD_DATA_URI_TAGS"in e?S(T(Be),e.ADD_DATA_URI_TAGS):Be,He="FORBID_CONTENTS"in e?S({},e.FORBID_CONTENTS):Ye,Ce="FORBID_TAGS"in e?S({},e.FORBID_TAGS):{},Ae="FORBID_ATTR"in e?S({},e.FORBID_ATTR):{},ze="USE_PROFILES"in e&&e.USE_PROFILES,De=!1!==e.ALLOW_ARIA_ATTR,ke=!1!==e.ALLOW_DATA_ATTR,Me=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Ee=e.SAFE_FOR_TEMPLATES||!1,Oe=e.WHOLE_DOCUMENT||!1,Le=e.RETURN_DOM||!1,Ie=e.RETURN_DOM_FRAGMENT||!1,Re=!1!==e.RETURN_DOM_IMPORT,$e=e.RETURN_TRUSTED_TYPE||!1,je=e.FORCE_BODY||!1,Pe=!1!==e.SANITIZE_DOM,Ne=!1!==e.KEEP_CONTENT,Ue=e.IN_PLACE||!1,we=e.ALLOWED_URI_REGEXP||we,Ze=e.NAMESPACE||Ve,Ee&&(ke=!1),Ie&&(Le=!0),ze&&(_e=S({},[].concat(B(F))),Se=[],!0===ze.html&&(S(_e,A),S(Se,j)),!0===ze.svg&&(S(_e,D),S(Se,L),S(Se,R)),!0===ze.svgFilters&&(S(_e,k),S(Se,L),S(Se,R)),!0===ze.mathMl&&(S(_e,E),S(Se,I),S(Se,R))),e.ADD_TAGS&&(_e===xe&&(_e=T(_e)),S(_e,e.ADD_TAGS)),e.ADD_ATTR&&(Se===Te&&(Se=T(Se)),S(Se,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&S(We,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(He===Ye&&(He=T(He)),S(He,e.FORBID_CONTENTS)),Ne&&(_e["#text"]=!0),Oe&&S(_e,["html","head","body"]),_e.table&&(S(_e,["tbody"]),delete Ce.tbody),a&&a(e),Xe=e)},nt=S({},["mi","mo","mn","ms","mtext"]),rt=S({},["foreignobject","desc","title","annotation-xml"]),ot=S({},D);S(ot,k),S(ot,M);var at=S({},E);S(at,O);var it=function(e){var t=ne(e);t&&t.tagName||(t={namespaceURI:Ve,tagName:"template"});var n=g(e.tagName),r=g(t.tagName);if(e.namespaceURI===Ke)return t.namespaceURI===Ve?"svg"===n:t.namespaceURI===Je?"svg"===n&&("annotation-xml"===r||nt[r]):Boolean(ot[n]);if(e.namespaceURI===Je)return t.namespaceURI===Ve?"math"===n:t.namespaceURI===Ke?"math"===n&&rt[r]:Boolean(at[n]);if(e.namespaceURI===Ve){if(t.namespaceURI===Ke&&!rt[r])return!1;if(t.namespaceURI===Je&&!nt[r])return!1;var o=S({},["title","style","font","a","script"]);return!at[n]&&(o[n]||!ot[n])}return!1},st=function(e){f(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=ae}catch(t){e.remove()}}},lt=function(e,t){try{f(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){f(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Se[e])if(Le||Ie)try{st(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},ct=function(e){var t=void 0,n=void 0;if(je)e="<remove></remove>"+e;else{var r=m(e,/^[\r\n\t ]+/);n=r&&r[0]}var a=oe?oe.createHTML(e):e;if(Ze===Ve)try{t=(new V).parseFromString(a,"text/html")}catch(e){}if(!t||!t.documentElement){t=se.createDocument(Ze,"template",null);try{t.documentElement.innerHTML=Qe?"":a}catch(e){}}var i=t.body||t.documentElement;return e&&n&&i.insertBefore(o.createTextNode(n),i.childNodes[0]||null),Ze===Ve?ue.call(t,Oe?"html":"body")[0]:Oe?t.documentElement:i},ut=function(e){return le.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},dt=function(e){return!(e instanceof J||e instanceof K||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof x&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore)},ht=function(e){return"object"===(void 0===l?"undefined":q(l))?e instanceof l:e&&"object"===(void 0===e?"undefined":q(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},pt=function(e,t,r){pe[e]&&h(pe[e],(function(e){e.call(n,t,r,Xe)}))},ft=function(e){var t=void 0;if(pt("beforeSanitizeElements",e,null),dt(e))return st(e),!0;if(m(e.nodeName,/[\u0080-\uFFFF]/))return st(e),!0;var r=g(e.nodeName);if(pt("uponSanitizeElement",e,{tagName:r,allowedTags:_e}),!ht(e.firstElementChild)&&(!ht(e.content)||!ht(e.content.firstElementChild))&&w(/<[/\w]/g,e.innerHTML)&&w(/<[/\w]/g,e.textContent))return st(e),!0;if("select"===r&&w(/<template/i,e.innerHTML))return st(e),!0;if(!_e[r]||Ce[r]){if(Ne&&!He[r]){var o=ne(e)||e.parentNode,a=te(e)||e.childNodes;if(a&&o)for(var i=a.length-1;i>=0;--i)o.insertBefore(X(a[i],!0),ee(e))}return st(e),!0}return e instanceof c&&!it(e)?(st(e),!0):"noscript"!==r&&"noembed"!==r||!w(/<\/no(script|embed)/i,e.innerHTML)?(Ee&&3===e.nodeType&&(t=e.textContent,t=y(t,fe," "),t=y(t,ge," "),e.textContent!==t&&(f(n.removed,{element:e.cloneNode()}),e.textContent=t)),pt("afterSanitizeElements",e,null),!1):(st(e),!0)},gt=function(e,t,n){if(Pe&&("id"===t||"name"===t)&&(n in o||n in et))return!1;if(ke&&!Ae[t]&&w(me,t));else if(De&&w(ye,t));else{if(!Se[t]||Ae[t])return!1;if(We[t]);else if(w(we,y(n,be,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==v(n,"data:")||!qe[e])if(Me&&!w(ve,y(n,be,"")));else if(n)return!1}return!0},mt=function(e){var t=void 0,r=void 0,o=void 0,a=void 0;pt("beforeSanitizeAttributes",e,null);var i=e.attributes;if(i){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Se};for(a=i.length;a--;){var l=t=i[a],c=l.name,u=l.namespaceURI;if(r=b(t.value),o=g(c),s.attrName=o,s.attrValue=r,s.keepAttr=!0,s.forceKeepAttr=void 0,pt("uponSanitizeAttribute",e,s),r=s.attrValue,!s.forceKeepAttr&&(lt(c,e),s.keepAttr))if(w(/\/>/i,r))lt(c,e);else{Ee&&(r=y(r,fe," "),r=y(r,ge," "));var d=e.nodeName.toLowerCase();if(gt(d,o,r))try{u?e.setAttributeNS(u,c,r):e.setAttribute(c,r),p(n.removed)}catch(e){}}}pt("afterSanitizeAttributes",e,null)}},yt=function e(t){var n=void 0,r=ut(t);for(pt("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)pt("uponSanitizeShadowNode",n,null),ft(n)||(n.content instanceof i&&e(n.content),mt(n));pt("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e,o){var a=void 0,s=void 0,c=void 0,u=void 0,d=void 0;if((Qe=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!ht(e)){if("function"!=typeof e.toString)throw _("toString is not a function");if("string"!=typeof(e=e.toString()))throw _("dirty is not a string, aborting")}if(!n.isSupported){if("object"===q(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(ht(e))return t.toStaticHTML(e.outerHTML)}return e}if(Fe||tt(o),n.removed=[],"string"==typeof e&&(Ue=!1),Ue);else if(e instanceof l)1===(s=(a=ct("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?a=s:a.appendChild(s);else{if(!Le&&!Ee&&!Oe&&-1===e.indexOf("<"))return oe&&$e?oe.createHTML(e):e;if(!(a=ct(e)))return Le?null:ae}a&&je&&st(a.firstChild);for(var h=ut(Ue?e:a);c=h.nextNode();)3===c.nodeType&&c===u||ft(c)||(c.content instanceof i&&yt(c.content),mt(c),u=c);if(u=null,Ue)return e;if(Le){if(Ie)for(d=ce.call(a.ownerDocument);a.firstChild;)d.appendChild(a.firstChild);else d=a;return Re&&(d=de.call(r,d,!0)),d}var p=Oe?a.outerHTML:a.innerHTML;return Ee&&(p=y(p,fe," "),p=y(p,ge," ")),oe&&$e?oe.createHTML(p):p},n.setConfig=function(e){tt(e),Fe=!0},n.clearConfig=function(){Xe=null,Fe=!1},n.isValidAttribute=function(e,t,n){Xe||tt({});var r=g(e),o=g(t);return gt(r,o,n)},n.addHook=function(e,t){"function"==typeof t&&(pe[e]=pe[e]||[],f(pe[e],t))},n.removeHook=function(e){pe[e]&&p(pe[e])},n.removeHooks=function(e){pe[e]&&(pe[e]=[])},n.removeAllHooks=function(){pe={}},n}()}()},729:e=>{var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new o(r,a||e,i),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function i(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,a=r.length,i=new Array(a);o<a;o++)i[o]=r[o].fn;return i},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,o,a,i){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,o),!0;case 5:return u.fn.call(u.context,t,r,o,a),!0;case 6:return u.fn.call(u.context,t,r,o,a,i),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,o);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,o){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return i(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||o&&!s.once||r&&s.context!==r||i(this,a);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||o&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[a]=1===c.length?c[0]:c:i(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&i(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},717:e=>{"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},824:e=>{var t=1e3,n=60*t,r=60*n,o=24*r;function a(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}e.exports=function(e,i){i=i||{};var s,l,c=typeof e;if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(a){var i=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"weeks":case"week":case"w":return 6048e5*i;case"days":case"day":case"d":return i*o;case"hours":case"hour":case"hrs":case"hr":case"h":return i*r;case"minutes":case"minute":case"mins":case"min":case"m":return i*n;case"seconds":case"second":case"secs":case"sec":case"s":return i*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(e);if("number"===c&&isFinite(e))return i.long?(s=e,(l=Math.abs(s))>=o?a(s,l,o,"day"):l>=r?a(s,l,r,"hour"):l>=n?a(s,l,n,"minute"):l>=t?a(s,l,t,"second"):s+" ms"):function(e){var a=Math.abs(e);return a>=o?Math.round(e/o)+"d":a>=r?Math.round(e/r)+"h":a>=n?Math.round(e/n)+"m":a>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},520:(e,t,n)=>{var r=n(155),o="win32"===r.platform,a=n(539);function i(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];o&&"."!==o&&(".."===o?n.length&&".."!==n[n.length-1]?n.pop():t&&n.push(".."):n.push(o))}return n}function s(e){for(var t=e.length-1,n=0;n<=t&&!e[n];n++);for(var r=t;r>=0&&!e[r];r--);return 0===n&&r===t?e:n>r?[]:e.slice(n,r+1)}var l=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,c=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,u={};function d(e){var t=l.exec(e),n=(t[1]||"")+(t[2]||""),r=t[3]||"",o=c.exec(r);return[n,o[1],o[2],o[3]]}function h(e){var t=l.exec(e),n=t[1]||"",r=!!n&&":"!==n[1];return{device:n,isUnc:r,isAbsolute:r||!!t[2],tail:t[3]}}function p(e){return"\\\\"+e.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}u.resolve=function(){for(var e="",t="",n=!1,o=arguments.length-1;o>=-1;o--){var s;if(o>=0?s=arguments[o]:e?(s=r.env["="+e])&&s.substr(0,3).toLowerCase()===e.toLowerCase()+"\\"||(s=e+"\\"):s=r.cwd(),!a.isString(s))throw new TypeError("Arguments to path.resolve must be strings");if(s){var l=h(s),c=l.device,u=l.isUnc,d=l.isAbsolute,f=l.tail;if((!c||!e||c.toLowerCase()===e.toLowerCase())&&(e||(e=c),n||(t=f+"\\"+t,n=d),e&&n))break}}return u&&(e=p(e)),e+(n?"\\":"")+(t=i(t.split(/[\\\/]+/),!n).join("\\"))||"."},u.normalize=function(e){var t=h(e),n=t.device,r=t.isUnc,o=t.isAbsolute,a=t.tail,s=/[\\\/]$/.test(a);return(a=i(a.split(/[\\\/]+/),!o).join("\\"))||o||(a="."),a&&s&&(a+="\\"),r&&(n=p(n)),n+(o?"\\":"")+a},u.isAbsolute=function(e){return h(e).isAbsolute},u.join=function(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(!a.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&e.push(n)}var r=e.join("\\");return/^[\\\/]{2}[^\\\/]/.test(e[0])||(r=r.replace(/^[\\\/]{2,}/,"\\")),u.normalize(r)},u.relative=function(e,t){e=u.resolve(e),t=u.resolve(t);for(var n=e.toLowerCase(),r=t.toLowerCase(),o=s(t.split("\\")),a=s(n.split("\\")),i=s(r.split("\\")),l=Math.min(a.length,i.length),c=l,d=0;d<l;d++)if(a[d]!==i[d]){c=d;break}if(0==c)return t;var h=[];for(d=c;d<a.length;d++)h.push("..");return(h=h.concat(o.slice(c))).join("\\")},u._makeLong=function(e){if(!a.isString(e))return e;if(!e)return"";var t=u.resolve(e);return/^[a-zA-Z]\:\\/.test(t)?"\\\\?\\"+t:/^\\\\[^?.]/.test(t)?"\\\\?\\UNC\\"+t.substring(2):e},u.dirname=function(e){var t=d(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},u.basename=function(e,t){var n=d(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},u.extname=function(e){return d(e)[3]},u.format=function(e){if(!a.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!a.isString(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);var n=e.dir,r=e.base||"";return n?n[n.length-1]===u.sep?n+r:n+u.sep+r:r},u.parse=function(e){if(!a.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=d(e);if(!t||4!==t.length)throw new TypeError("Invalid path '"+e+"'");return{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},u.sep="\\",u.delimiter=";";var f=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,g={};function m(e){return f.exec(e).slice(1)}g.resolve=function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var o=n>=0?arguments[n]:r.cwd();if(!a.isString(o))throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,t="/"===o[0])}return(t?"/":"")+(e=i(e.split("/"),!t).join("/"))||"."},g.normalize=function(e){var t=g.isAbsolute(e),n=e&&"/"===e[e.length-1];return(e=i(e.split("/"),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},g.isAbsolute=function(e){return"/"===e.charAt(0)},g.join=function(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];if(!a.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&(e+=e?"/"+n:n)}return g.normalize(e)},g.relative=function(e,t){e=g.resolve(e).substr(1),t=g.resolve(t).substr(1);for(var n=s(e.split("/")),r=s(t.split("/")),o=Math.min(n.length,r.length),a=o,i=0;i<o;i++)if(n[i]!==r[i]){a=i;break}var l=[];for(i=a;i<n.length;i++)l.push("..");return(l=l.concat(r.slice(a))).join("/")},g._makeLong=function(e){return e},g.dirname=function(e){var t=m(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},g.basename=function(e,t){var n=m(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},g.extname=function(e){return m(e)[3]},g.format=function(e){if(!a.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!a.isString(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);return(e.dir?e.dir+g.sep:"")+(e.base||"")},g.parse=function(e){if(!a.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=m(e);if(!t||4!==t.length)throw new TypeError("Invalid path '"+e+"'");return t[1]=t[1]||"",t[2]=t[2]||"",t[3]=t[3]||"",{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},g.sep="/",g.delimiter=":",e.exports=o?u:g,e.exports.posix=g,e.exports.win32=u},155:e=>{var t,n,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var s,l=[],c=!1,u=-1;function d(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length&&h())}function h(){if(!c){var e=i(d);c=!0;for(var t=l.length;t;){for(s=l,l=[];++u<t;)s&&s[u].run();u=-1,t=l.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||i(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},384:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},539:(e,t,n)=>{var r=n(155),o=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,a=r.length,i=String(e).replace(o,(function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),l=r[n];n<a;l=r[++n])g(l)||!w(l)?i+=" "+l:i+=" "+s(l);return i},t.deprecate=function(e,o){if(v(n.g.process))return function(){return t.deprecate(e,o).apply(this,arguments)};if(!0===r.noDeprecation)return e;var a=!1;return function(){if(!a){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?console.trace(o):console.error(o),a=!0}return e.apply(this,arguments)}};var a,i={};function s(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(n)?r.showHidden=n:n&&t._extend(r,n),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),u(r,e,r.depth)}function l(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function c(e,t){return e}function u(e,n,r){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return y(o)||(o=u(e,o,r)),o}var a=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return m(t)?e.stylize(""+t,"number"):f(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}(e,n);if(a)return a;var i=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(n)),x(n)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return d(n);if(0===i.length){if(S(n)){var l=n.name?": "+n.name:"";return e.stylize("[Function"+l+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return e.stylize(Date.prototype.toString.call(n),"date");if(x(n))return d(n)}var c,w,T,C,A="",D=!1,M=["{","}"];return p(n)&&(D=!0,M=["[","]"]),S(n)&&(A=" [Function"+(n.name?": "+n.name:"")+"]"),b(n)&&(A=" "+RegExp.prototype.toString.call(n)),_(n)&&(A=" "+Date.prototype.toUTCString.call(n)),x(n)&&(A=" "+d(n)),0!==i.length||D&&0!=n.length?r<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=D?function(e,t,n,r,o){for(var a=[],i=0,s=t.length;i<s;++i)k(t,String(i))?a.push(h(e,t,n,r,String(i),!0)):a.push("");return o.forEach((function(o){o.match(/^\d+$/)||a.push(h(e,t,n,r,o,!0))})),a}(e,n,r,s,i):i.map((function(t){return h(e,n,r,s,t,D)})),e.seen.pop(),T=A,C=M,(w=c).reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?C[0]+(""===T?"":T+"\n ")+" "+w.join(",\n  ")+" "+C[1]:C[0]+T+" "+w.join(", ")+" "+C[1]):M[0]+A+M[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,o,a){var i,s,l;if((l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),k(r,o)||(i="["+o+"]"),s||(e.seen.indexOf(l.value)<0?(s=g(n)?u(e,l.value,null):u(e,l.value,n-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),v(i)){if(a&&o.match(/^\d+$/))return s;(i=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+s}function p(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function g(e){return null===e}function m(e){return"number"==typeof e}function y(e){return"string"==typeof e}function v(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===T(e)}function w(e){return"object"==typeof e&&null!==e}function _(e){return w(e)&&"[object Date]"===T(e)}function x(e){return w(e)&&("[object Error]"===T(e)||e instanceof Error)}function S(e){return"function"==typeof e}function T(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(v(a)&&(a=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!i[e])if(new RegExp("\\b"+e+"\\b","i").test(a)){var n=r.pid;i[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else i[e]=function(){};return i[e]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=f,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=b,t.isObject=w,t.isDate=_,t.isError=x,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(384);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),A[e.getMonth()],t].join(" ")}function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",D(),t.format.apply(t,arguments))},t.inherits=n(717),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e].call(n.exports,n,n.exports,a),n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{a.r(i),a.d(i,{LSPluginUser:()=>Bt,setupPluginUserInstance:()=>Wt});var r=a(520);a(856);const o=function(e,t){return e===t||e!=e&&t!=t},s=function(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1};var l=Array.prototype.splice;function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=function(){this.__data__=[],this.size=0},c.prototype.delete=function(e){var t=this.__data__,n=s(t,e);return!(n<0||(n==t.length-1?t.pop():l.call(t,n,1),--this.size,0))},c.prototype.get=function(e){var t=this.__data__,n=s(t,e);return n<0?void 0:t[n][1]},c.prototype.has=function(e){return s(this.__data__,e)>-1},c.prototype.set=function(e,t){var n=this.__data__,r=s(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};const u=c,d="object"==typeof e&&e&&e.Object===Object&&e;var h="object"==typeof self&&self&&self.Object===Object&&self;const p=d||h||Function("return this")(),f=p.Symbol;var g=Object.prototype,m=g.hasOwnProperty,y=g.toString,v=f?f.toStringTag:void 0,b=Object.prototype.toString,w=f?f.toStringTag:void 0;const _=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":w&&w in Object(e)?function(e){var t=m.call(e,v),n=e[v];try{e[v]=void 0;var r=!0}catch(e){}var o=y.call(e);return r&&(t?e[v]=n:delete e[v]),o}(e):function(e){return b.call(e)}(e)},x=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},S=function(e){if(!x(e))return!1;var t=_(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},T=p["__core-js_shared__"];var C,A=(C=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",D=Function.prototype.toString,k=/^\[object .+?Constructor\]$/,M=Function.prototype,E=Object.prototype,O=M.toString,F=E.hasOwnProperty,j=RegExp("^"+O.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const L=function(e){var t;return!(!x(e)||(t=e,A&&A in t))&&(S(e)?j:k).test(function(e){if(null!=e){try{return D.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))},I=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return L(n)?n:void 0},R=I(p,"Map"),$=I(Object,"create");var P=Object.prototype.hasOwnProperty,N=Object.prototype.hasOwnProperty;function U(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}U.prototype.clear=function(){this.__data__=$?$(null):{},this.size=0},U.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},U.prototype.get=function(e){var t=this.__data__;if($){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return P.call(t,e)?t[e]:void 0},U.prototype.has=function(e){var t=this.__data__;return $?void 0!==t[e]:N.call(t,e)},U.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=$&&void 0===t?"__lodash_hash_undefined__":t,this};const z=U,H=function(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map};function Y(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Y.prototype.clear=function(){this.size=0,this.__data__={hash:new z,map:new(R||u),string:new z}},Y.prototype.delete=function(e){var t=H(this,e).delete(e);return this.size-=t?1:0,t},Y.prototype.get=function(e){return H(this,e).get(e)},Y.prototype.has=function(e){return H(this,e).has(e)},Y.prototype.set=function(e,t){var n=H(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};const q=Y;function B(e){var t=this.__data__=new u(e);this.size=t.size}B.prototype.clear=function(){this.__data__=new u,this.size=0},B.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},B.prototype.get=function(e){return this.__data__.get(e)},B.prototype.has=function(e){return this.__data__.has(e)},B.prototype.set=function(e,t){var n=this.__data__;if(n instanceof u){var r=n.__data__;if(!R||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new q(r)}return n.set(e,t),this.size=n.size,this};const W=B,G=function(){try{var e=I(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),J=function(e,t,n){"__proto__"==t&&G?G(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},K=function(e,t,n){(void 0!==n&&!o(e[t],n)||void 0===n&&!(t in e))&&J(e,t,n)},V=function(e,t,n){for(var r=-1,o=Object(e),a=n(e),i=a.length;i--;){var s=a[++r];if(!1===t(o[s],s,o))break}return e};var Z=n&&!n.nodeType&&n,Q=Z&&t&&!t.nodeType&&t,X=Q&&Q.exports===Z?p.Buffer:void 0;X&&X.allocUnsafe;const ee=p.Uint8Array,te=function(e,t){var n,r,o=t?(r=new(n=e.buffer).constructor(n.byteLength),new ee(r).set(new ee(n)),r):e.buffer;return new e.constructor(o,e.byteOffset,e.length)};var ne=Object.create;const re=function(){function e(){}return function(t){if(!x(t))return{};if(ne)return ne(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),oe=(ae=Object.getPrototypeOf,ie=Object,function(e){return ae(ie(e))});var ae,ie,se=Object.prototype;const le=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||se)},ce=function(e){return null!=e&&"object"==typeof e},ue=function(e){return ce(e)&&"[object Arguments]"==_(e)};var de=Object.prototype,he=de.hasOwnProperty,pe=de.propertyIsEnumerable;const fe=ue(function(){return arguments}())?ue:function(e){return ce(e)&&he.call(e,"callee")&&!pe.call(e,"callee")},ge=Array.isArray,me=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},ye=function(e){return null!=e&&me(e.length)&&!S(e)};var ve=n&&!n.nodeType&&n,be=ve&&t&&!t.nodeType&&t,we=be&&be.exports===ve?p.Buffer:void 0;const _e=(we?we.isBuffer:void 0)||function(){return!1};var xe=Function.prototype,Se=Object.prototype,Te=xe.toString,Ce=Se.hasOwnProperty,Ae=Te.call(Object),De={};De["[object Float32Array]"]=De["[object Float64Array]"]=De["[object Int8Array]"]=De["[object Int16Array]"]=De["[object Int32Array]"]=De["[object Uint8Array]"]=De["[object Uint8ClampedArray]"]=De["[object Uint16Array]"]=De["[object Uint32Array]"]=!0,De["[object Arguments]"]=De["[object Array]"]=De["[object ArrayBuffer]"]=De["[object Boolean]"]=De["[object DataView]"]=De["[object Date]"]=De["[object Error]"]=De["[object Function]"]=De["[object Map]"]=De["[object Number]"]=De["[object Object]"]=De["[object RegExp]"]=De["[object Set]"]=De["[object String]"]=De["[object WeakMap]"]=!1;var ke=n&&!n.nodeType&&n,Me=ke&&t&&!t.nodeType&&t,Ee=Me&&Me.exports===ke&&d.process,Oe=function(){try{return Me&&Me.require&&Me.require("util").types||Ee&&Ee.binding&&Ee.binding("util")}catch(e){}}(),Fe=Oe&&Oe.isTypedArray;const je=Fe?function(e){return function(t){return e(t)}}(Fe):function(e){return ce(e)&&me(e.length)&&!!De[_(e)]},Le=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var Ie=Object.prototype.hasOwnProperty;const Re=function(e,t,n){var r=e[t];Ie.call(e,t)&&o(r,n)&&(void 0!==n||t in e)||J(e,t,n)};var $e=/^(?:0|[1-9]\d*)$/;const Pe=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&$e.test(e))&&e>-1&&e%1==0&&e<t};var Ne=Object.prototype.hasOwnProperty;const Ue=function(e,t){var n=ge(e),r=!n&&fe(e),o=!n&&!r&&_e(e),a=!n&&!r&&!o&&je(e),i=n||r||o||a,s=i?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!Ne.call(e,c)||i&&("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Pe(c,l))||s.push(c);return s};var ze=Object.prototype.hasOwnProperty;const He=function(e){if(!x(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=le(e),n=[];for(var r in e)("constructor"!=r||!t&&ze.call(e,r))&&n.push(r);return n},Ye=function(e){return ye(e)?Ue(e,!0):He(e)},qe=function(e){return function(e,t,n,r){var o=!n;n||(n={});for(var a=-1,i=t.length;++a<i;){var s=t[a],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),o?J(n,s,l):Re(n,s,l)}return n}(e,Ye(e))},Be=function(e,t,n,r,o,a,i){var s,l=Le(e,n),c=Le(t,n),u=i.get(c);if(u)K(e,n,u);else{var d=a?a(l,c,n+"",e,t,i):void 0,h=void 0===d;if(h){var p=ge(c),f=!p&&_e(c),g=!p&&!f&&je(c);d=c,p||f||g?ge(l)?d=l:ce(s=l)&&ye(s)?d=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(l):f?(h=!1,d=function(e,t){return e.slice()}(c)):g?(h=!1,d=te(c,!0)):d=[]:function(e){if(!ce(e)||"[object Object]"!=_(e))return!1;var t=oe(e);if(null===t)return!0;var n=Ce.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Te.call(n)==Ae}(c)||fe(c)?(d=l,fe(l)?d=qe(l):x(l)&&!S(l)||(d=function(e){return"function"!=typeof e.constructor||le(e)?{}:re(oe(e))}(c))):h=!1}h&&(i.set(c,d),o(d,c,r,a,i),i.delete(c)),K(e,n,d)}},We=function e(t,n,r,o,a){t!==n&&V(n,(function(i,s){if(a||(a=new W),x(i))Be(t,n,s,r,e,o,a);else{var l=o?o(Le(t,s),i,s+"",t,n,a):void 0;void 0===l&&(l=i),K(t,s,l)}}),Ye)},Ge=function(e){return e},Je=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var Ke=Math.max;const Ve=G?function(e,t){var n;return G(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0})}:Ge;var Ze=Date.now;const Qe=function(e){var t=0,n=0;return function(){var r=Ze(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Ve),Xe=(tt=function(e,t,n){We(e,t,n)},et=function(e,t){var n=-1,r=t.length,a=r>1?t[r-1]:void 0,i=r>2?t[2]:void 0;for(a=tt.length>3&&"function"==typeof a?(r--,a):void 0,i&&function(e,t,n){if(!x(n))return!1;var r=typeof t;return!!("number"==r?ye(n)&&Pe(t,n.length):"string"==r&&t in n)&&o(n[t],e)}(t[0],t[1],i)&&(a=r<3?void 0:a,r=1),e=Object(e);++n<r;){var s=t[n];s&&tt(e,s,n)}return e},Qe(function(e,t,n){return t=Ke(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,a=Ke(r.length-t,0),i=Array(a);++o<a;)i[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(i),Je(e,this,s)}}(et,void 0,Ge),et+""));var et,tt,nt=function(){return(nt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function rt(e){return e.toLowerCase()}Object.create,Object.create;var ot=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],at=/[^A-Z0-9]+/gi;function it(e,t,n){return t instanceof RegExp?e.replace(t,n):t.reduce((function(e,t){return e.replace(t,n)}),e)}const st="win32"===navigator.platform.toLowerCase()?r.win32:r.posix,lt=function(e,t){return void 0===t&&(t={}),n=e,void 0===(r=nt({delimiter:"_"},t))&&(r={}),function(e,t){void 0===t&&(t={});for(var n=t.splitRegexp,r=void 0===n?ot:n,o=t.stripRegexp,a=void 0===o?at:o,i=t.transform,s=void 0===i?rt:i,l=t.delimiter,c=void 0===l?" ":l,u=it(it(e,r,"$1\0$2"),a,"\0"),d=0,h=u.length;"\0"===u.charAt(d);)d++;for(;"\0"===u.charAt(h-1);)h--;return u.slice(d,h).split("\0").map(s).join(c)}(n,nt({delimiter:"."},r));var n,r},ct=Xe;function ut(e,t){let n,r,o=!1;const a=t=>n=>{e&&clearTimeout(e),t(n),o=!0},i=new Promise(((o,i)=>{n=a(o),r=a(i),e&&(e=setTimeout((()=>r(new Error(`[deferred timeout] ${t}`))),e))}));return{created:Date.now(),setTag:e=>t=e,resolve:n,reject:r,promise:i,get settled(){return o}}}new Map;var dt=a(227),ht=a.n(dt);const pt="application/x-postmate-v1+json";let ft=0;const gt={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},mt=(e,t)=>!("string"==typeof t&&e.origin!==t||!e.data||"object"==typeof e.data&&!("postmate"in e.data)||e.data.type!==pt||!gt[e.data.postmate]);class yt{parent;frame;child;events={};childOrigin;listener;constructor(e){this.parent=e.parent,this.frame=e.frame,this.child=e.child,this.childOrigin=e.childOrigin,this.listener=e=>{if(!mt(e,this.childOrigin))return!1;const{data:t,name:n}=((e||{}).data||{}).value||{};"emit"===e.data.postmate&&n in this.events&&this.events[n].forEach((e=>{e.call(this,t)}))},this.parent.addEventListener("message",this.listener,!1)}get(e){return new Promise((t=>{const n=++ft,r=e=>{e.data.uid===n&&"reply"===e.data.postmate&&(this.parent.removeEventListener("message",r,!1),t(e.data.value))};this.parent.addEventListener("message",r,!1),this.child.postMessage({postmate:"request",type:pt,property:e,uid:n},this.childOrigin)}))}call(e,t){this.child.postMessage({postmate:"call",type:pt,property:e,data:t},this.childOrigin)}on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class vt{model;parent;parentOrigin;child;constructor(e){this.model=e.model,this.parent=e.parent,this.parentOrigin=e.parentOrigin,this.child=e.child,this.child.addEventListener("message",(e=>{if(!mt(e,this.parentOrigin))return;const{property:t,uid:n,data:r}=e.data;"call"!==e.data.postmate?((e,t)=>{const n="function"==typeof e[t]?e[t]():e[t];return Promise.resolve(n)})(this.model,t).then((r=>{e.source.postMessage({property:t,postmate:"reply",type:pt,uid:n,value:r},e.origin)})):t in this.model&&"function"==typeof this.model[t]&&this.model[t](r)}))}emit(e,t){this.parent.postMessage({postmate:"emit",type:pt,value:{name:e,data:t}},this.parentOrigin)}}class bt{static debug=!1;container;parent;frame;child;childOrigin;url;model;static Model;constructor(e){this.container=e.container,this.url=e.url,this.parent=window,this.frame=document.createElement("iframe"),e.id&&(this.frame.id=e.id),e.name&&(this.frame.name=e.name),this.frame.classList.add.apply(this.frame.classList,e.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=e.model||{}}sendHandshake(e){const t=(e=>{const t=document.createElement("a");t.href=e;const n=t.protocol.length>4?t.protocol:window.location.protocol,r=t.host.length?"80"===t.port||"443"===t.port?t.hostname:t.host:window.location.host;return t.origin||`${n}//${r}`})(e=e||this.url);let n,r=0;return new Promise(((o,a)=>{const i=e=>!!mt(e,t)&&("handshake-reply"===e.data.postmate?(clearInterval(n),this.parent.removeEventListener("message",i,!1),this.childOrigin=e.origin,o(new yt(this))):a("Failed handshake"));this.parent.addEventListener("message",i,!1);const s=()=>{r++,this.child.postMessage({postmate:"handshake",type:pt,model:this.model},t),5===r&&clearInterval(n)};this.frame.addEventListener("load",(()=>{s(),n=setInterval(s,500)})),this.frame.src=e}))}}class wt{child;model;parent;parentOrigin;constructor(e){this.child=window,this.model=e,this.parent=this.child.parent}sendHandshakeReply(){return new Promise(((e,t)=>{const n=r=>{if(r.data.postmate){if("handshake"===r.data.postmate){this.child.removeEventListener("message",n,!1),r.source.postMessage({postmate:"handshake-reply",type:pt},r.origin),this.parentOrigin=r.origin;const t=r.data.model;return t&&Object.keys(t).forEach((e=>{this.model[e]=t[e]})),e(new vt(this))}return t("Handshake Reply Failed")}};this.child.addEventListener("message",n,!1)}))}}var _t=a(729),xt=a.n(_t);const{importHTML:St,createSandboxContainer:Tt}=window.QSandbox||{};function Ct(e,t){return e.startsWith("http")?fetch(e,t):(e=e.replace("file://",""),new Promise((async(t,n)=>{try{const n=await window.apis.doAction(["readFile",e]);t({text:()=>n})}catch(e){console.error(e),n(e)}})))}class At extends(xt()){_pluginLocal;_frame;_root;_loaded=!1;_unmountFns=[];constructor(e){super(),this._pluginLocal=e,e._dispose((()=>{this._unmount()}))}async load(){const{name:e,entry:t}=this._pluginLocal.options;if(this.loaded||!t)return;const{template:n,execScripts:r}=await St(t,{fetch:Ct});this._mount(n,document.body);const o=Tt(e,{elementGetter:()=>this._root?.firstChild}).instance.proxy;o.__shadow_mode__=!0,o.LSPluginLocal=this._pluginLocal,o.LSPluginShadow=this,o.LSPluginUser=o.logseq=new Bt(this._pluginLocal.toJSON(),this._pluginLocal.caller);const a=await r(o,!0);this._unmountFns.push(a.unmount),this._loaded=!0}_mount(e,t){const n=this._frame=document.createElement("div");n.classList.add("lsp-shadow-sandbox"),n.id=this._pluginLocal.id,this._root=n.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${e}</div>`,t.appendChild(n),this.emit("mounted")}_unmount(){for(const e of this._unmountFns)e&&e.call(null)}destroy(){this.frame?.parentNode?.removeChild(this.frame)}get loaded(){return this._loaded}get document(){return this._root?.firstChild}get frame(){return this._frame}}const Dt=ht()("LSPlugin:caller"),kt="#await#response#",Mt="#lspmsg#error#",Et=e=>`#lspmsg#${e}`;class Ot extends(xt()){_pluginLocal;_connected=!1;_parent;_child;_shadow;_status;_userModel={};_call;_callUserModel;_debugTag="";constructor(e){super(),this._pluginLocal=e,e&&(this._debugTag=e.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:e}=this._pluginLocal;e?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(e={}){if(this._connected)return;const t=this,n=null!=this._pluginLocal;let r=0,o=0;const a=new Map,i=ut(5e3),s=this._extendUserModel({"#lspmsg#ready#":async e=>{s[Et(e?.pid)]=({type:e,payload:n})=>{Dt(`[host (_call) -> *user] ${this._debugTag}`,e,n),t.emit(e,n)},await i.resolve()},"#lspmsg#beforeunload#":async e=>{const n=ut(1e4);t.emit("beforeunload",Object.assign({actor:n},e)),await n.promise},"#lspmsg#settings#":async({type:e,payload:n})=>{t.emit("settings:changed",n)},"#lspmsg#":async({ns:e,type:n,payload:r})=>{Dt(`[host (async) -> *user] ${this._debugTag} ns=${e} type=${n}`,r),e&&e.startsWith("hook")?t.emit(`${e}:${n}`,r):t.emit(n,r)},"#lspmsg#reply#":({_sync:e,result:t})=>{if(Dt(`[sync host -> *user] #${e}`,t),a.has(e)){const n=a.get(e);n&&(t?.hasOwnProperty(Mt)?n.reject(t[Mt]):n.resolve(t),a.delete(e))}},...e});if(n)return await i.promise,JSON.parse(JSON.stringify(this._pluginLocal?.toJSON()));const l=new wt(s).sendHandshakeReply();return this._status="pending",await l.then((e=>{this._child=e,this._connected=!0,this._call=async(t,n={},r)=>{if(r){const e=++o;a.set(e,r),n._sync=e,r.setTag(`async call #${e}`),Dt(`async call #${e}`)}return e.emit(Et(s.baseInfo.id),{type:t,payload:n}),r?.promise},this._callUserModel=async(e,t)=>{try{s[e](t)}catch(t){Dt(`[model method] #${e} not existed`)}},r=setInterval((()=>{if(a.size>100)for(const[e,t]of a)t.settled&&a.delete(e)}),18e5)})).finally((()=>{this._status=void 0})),await i.promise,s.baseInfo}async call(e,t={}){return this._call?.call(this,e,t)}async callAsync(e,t={}){const n=ut(1e4);return this._call?.call(this,e,t,n)}async callUserModel(e,t={}){return this._callUserModel?.call(this,e,t)}async _setupIframeSandbox(){const e=this._pluginLocal,t=e.id,n=`${t}_lsp_main`,r=new URL(e.options.entry);r.searchParams.set("__v__",e.options.version);const o=document.querySelector(`#${n}`);o&&o.parentElement.removeChild(o);const a=document.createElement("div");a.classList.add("lsp-iframe-sandbox-container"),a.id=n,a.dataset.pid=t;try{const e=(await this._pluginLocal._loadLayoutsData())?.$$0;if(e){a.dataset.inited_layout="true";const{width:t,height:n,left:r,top:o}=e;Object.assign(a.style,{width:t+"px",height:n+"px",left:r+"px",top:o+"px"})}}catch(e){console.error("[Restore Layout Error]",e)}document.body.appendChild(a);let i,s=new bt({id:t+"_iframe",container:a,url:r.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(e.toJSON()))}}).sendHandshake();return this._status="pending",new Promise(((t,n)=>{i=setTimeout((()=>{n(new Error("handshake Timeout"))}),3e3),s.then((n=>{this._parent=n,this._connected=!0,this.emit("connected"),n.on(Et(e.id),(({type:e,payload:t})=>{Dt("[user -> *host] ",e,t),this._pluginLocal?.emit(e,t||{})})),this._call=async(...t)=>{await n.call(Et(e.id),{type:t[0],payload:Object.assign(t[1]||{},{$$pid:e.id})})},this._callUserModel=async(e,t)=>{if(e.startsWith(kt))return await n.get(e.replace(kt,""));n.call(e,t)},t(null)})).catch((e=>{n(e)})).finally((()=>{clearTimeout(i)}))})).catch((e=>{throw Dt("[iframe sandbox] error",e),e})).finally((()=>{this._status=void 0}))}async _setupShadowSandbox(){const e=this._pluginLocal,t=this._shadow=new At(e);try{this._status="pending",await t.load(),this._connected=!0,this.emit("connected"),this._call=async(t,n={},r)=>(r&&(n.actor=r),this._pluginLocal?.emit(t,Object.assign(n,{$$pid:e.id})),r?.promise),this._callUserModel=async(...e)=>{let t=e[0];t?.startsWith(kt)&&(t=t.replace(kt,""));const n=e[1]||{},r=this._userModel[t];"function"==typeof r&&await r.call(null,n)}}catch(e){throw Dt("[shadow sandbox] error",e),e}finally{this._status=void 0}}_extendUserModel(e){return Object.assign(this._userModel,e)}_getSandboxIframeContainer(){return this._parent?.frame.parentNode}_getSandboxShadowContainer(){return this._shadow?.frame.parentNode}_getSandboxIframeRoot(){return this._parent?.frame}_getSandboxShadowRoot(){return this._shadow?.frame}set debugTag(e){this._debugTag=e}async destroy(){let e=null;this._parent&&(e=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(e=this._getSandboxShadowContainer(),this._shadow.destroy()),e?.parentNode.removeChild(e)}}class Ft{ctx;constructor(e){this.ctx=e}get ctxId(){return this.ctx.baseInfo.id}setItem(e,t){return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,e,t]})}getItem(e){return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,e]})}removeItem(e){return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,e]})}clear(){return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId]})}hasItem(e){return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,e]})}}class jt{ctx;constructor(e){this.ctx=e}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(e,...t){const n=this.ensureHostScope();return e=lt(e)?.toLowerCase(),n.logseq.api["exper_"+e]?.apply(n,t)}async loadScripts(...e){(e=e.map((e=>e?.startsWith("http")?e:this.ctx.resolveResourceFullUrl(e)))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...e)}registerFencedCodeRenderer(e,t){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,e,t)}registerExtensionsEnhancer(e,t){const n=this.ensureHostScope();return"katex"===e&&n.katex&&t(n.katex).catch(console.error),n.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,e,t)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}const Lt=Symbol.for("proxy-continue"),It=ht()("LSPlugin:user");function Rt(e,t,n){if("function"!=typeof n)return!1;const{key:r,label:o,desc:a,palette:i,keybinding:s}=t,l=`SimpleCommandHook${r}${++Nt}`;this.Editor["on"+l](n),this.caller?.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:r,label:o,type:e,desc:a,keybinding:s},["editor/hook",l]],i]})}let $t=null;const Pt={async getInfo(e){return $t||($t=await this._execCallableAPIAsync("get-app-info")),"string"==typeof e?$t[e]:$t},registerCommand:Rt,registerCommandPalette(e,t){const{key:n,label:r,keybinding:o}=e;return Rt.call(this,"$palette$",{key:n,label:r,palette:!0,keybinding:o},t)},registerCommandShortcut(e,t){const{binding:n}=e,r="$shortcut$",o=r+lt(n);return Rt.call(this,r,{key:o,palette:!1,keybinding:e},t)},registerUIItem(e,t){const n=this.baseInfo.id;this.caller?.call("api:call",{method:"register-plugin-ui-item",args:[n,e,t]})},registerPageMenuItem(e,t){if("function"!=typeof t)return!1;const n=e+"_"+this.baseInfo.id,r=e;Rt.call(this,"page-menu-item",{key:n,label:r},t)},setFullScreen(e){const t=(...e)=>this._callWin("setFullScreen",...e);"toggle"===e?this._callWin("isFullScreen").then((e=>{e?t():t(!0)})):e?t(!0):t()}};let Nt=0;const Ut={registerSlashCommand(e,t){It("Register slash command #",this.baseInfo.id,e,t),"function"==typeof t&&(t=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",t]]),t=t.map((e=>{const[t,...n]=e;if("editor/hook"===t){let r=n[0],o=()=>{this.caller?.callUserModel(r)};"function"==typeof r&&(o=r);const a=`SlashCommandHook${t}${++Nt}`;e[1]=a,this.Editor["on"+a](o)}return e})),this.caller?.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[e,t]]})},registerBlockContextMenuItem(e,t){if("function"!=typeof t)return!1;const n=e+"_"+this.baseInfo.id,r=e;Rt.call(this,"block-context-menu-item",{key:n,label:r},t)},scrollToBlockInPage(e,t,n){const r="block-content-"+t;n?.replaceState?this.App.replaceState("page",{name:e},{anchor:r}):this.App.pushState("page",{name:e},{anchor:r})}},zt={onBlockChanged(e,t){const n=this.baseInfo.id,r=`hook:db:${lt(`block:${e}`)}`,o=({block:n,txData:r,txMeta:o})=>{n.uuid===e&&t(n,r,o)};return this.caller.on(r,o),this.App._installPluginHook(n,r),()=>{this.caller.off(r,o),this.App._uninstallPluginHook(n,r)}}},Ht={},Yt={},qt={};class Bt extends(xt()){_baseInfo;_caller;_version="0.0.6";_debugTag="";_settingsSchema;_connected=!1;_ui=new Map;_mFileStorage;_mExperiments;_beforeunloadCallback;constructor(e,t){super(),this._baseInfo=e,this._caller=t,t.on("sys:ui:visible",(e=>{e?.toggle&&this.toggleMainUI()})),t.on("settings:changed",(e=>{const t=Object.assign({},this.settings),n=Object.assign(this._baseInfo.settings,e);this.emit("settings:changed",{...n},t)})),t.on("beforeunload",(async e=>{const{actor:n,...r}=e,o=this._beforeunloadCallback;try{o&&await o(r),n?.resolve(null)}catch(e){console.debug(`${t.debugTag} [beforeunload] `,e),n?.reject(e)}}))}async ready(e,t){if(!this._connected)try{"function"==typeof e&&(t=e,e={});let n=await this._caller.connectToParent(e);this._connected=!0,n=ct(this._baseInfo,n),this._settingsSchema&&(n.settings=function(e,t){const n=(t||[]).reduce(((e,t)=>("default"in t&&(e[t.key]=t.default),e)),{});return Object.assign(n,e)}(n.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema)),n?.id&&(this._debugTag=this._caller.debugTag=`#${n.id} [${n.name}]`);try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(e){console.warn(e)}t&&t.call(this,n)}catch(e){console.error(`${this._debugTag} [Ready Error]`,e)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(e){"function"==typeof e&&(this._beforeunloadCallback=e)}provideModel(e){return this.caller._extendUserModel(e),this}provideTheme(e){return this.caller.call("provider:theme",e),this}provideStyle(e){return this.caller.call("provider:style",e),this}provideUI(e){return this.caller.call("provider:ui",e),this}useSettingsSchema(e){return this.connected&&this.caller.call("settings:schema",{schema:e,isSync:!0}),this._settingsSchema=e,this}updateSettings(e){this.caller.call("settings:update",e)}onSettingsChanged(e){const t="settings:changed";return this.on(t,e),()=>this.off(t,e)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(e){this.caller.call("main-ui:attrs",e)}setMainUIInlineStyle(e){this.caller.call("main-ui:style",e)}hideMainUI(e){const t={key:0,visible:!1,cursor:e?.restoreEditingCursor};this.caller.call("main-ui:visible",t),this.emit("ui:visible:changed",t),this._ui.set(t.key,t)}showMainUI(e){const t={key:0,visible:!0,autoFocus:e?.autoFocus};this.caller.call("main-ui:visible",t),this.emit("ui:visible:changed",t),this._ui.set(t.key,t)}toggleMainUI(){const e=this._ui.get(0);e&&e.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const e=this._ui.get(0);return Boolean(e&&e.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get settings(){return this.baseInfo?.settings}get caller(){return this._caller}resolveResourceFullUrl(e){if(this.ensureConnected(),e)return e=e.replace(/^[.\\/]+/,""),function(e,...t){try{const n=new URL(e);if(!n.origin)throw new Error(null);const r=st.join(e.substr(n.origin.length),...t);return n.origin+r}catch(n){return st.join(e,...t)}}(this._baseInfo.lsr,e)}_makeUserProxy(e,t){const n=this,r=this.caller;return new Proxy(e,{get(e,o,a){const i=e[o];return function(...e){if(i){const r=i.apply(n,e.concat(t));if(r!==Lt)return r}if(t){const a=o.toString().match(/^(once|off|on)/i);if(null!=a){const o=a[0].toLowerCase(),i=a.input.slice(o.length),s="off"===o,l=n.baseInfo.id,c=`hook:${t}:${lt(i)}`,u=e[0];r[o](c,u);const d=()=>{r.off(c,u),r.listenerCount(c)||n.App._uninstallPluginHook(l,c)};return s?void d():(n.App._installPluginHook(l,c),d)}}let a=o;return["git","ui","assets"].includes(t)&&(a=t+"_"+a),r.callAsync("api:call",{tag:t,method:a,args:e})}}})}_execCallableAPIAsync(e,...t){return this._caller.callAsync("api:call",{method:e,args:t})}_execCallableAPI(e,...t){this._caller.call("api:call",{method:e,args:t})}_callWin(...e){return this._execCallableAPIAsync("_callMainWin",...e)}get App(){return this._makeUserProxy(Pt,"app")}get Editor(){return this._makeUserProxy(Ut,"editor")}get DB(){return this._makeUserProxy(zt,"db")}get Git(){return this._makeUserProxy(Ht,"git")}get UI(){return this._makeUserProxy(Yt,"ui")}get Assets(){return this._makeUserProxy(qt,"assets")}get FileStorage(){let e=this._mFileStorage;return e||(e=this._mFileStorage=new Ft(this)),e}get Experiments(){let e=this._mExperiments;return e||(e=this._mExperiments=new jt(this)),e}}function Wt(e,t){return new Bt(e,t)}if(null==window.__LSP__HOST__){const e=new Ot(null);window.logseq=Wt({},e)}})(),i})()})),o("cVm5l");var a,i,s,l,c,u,d,h,p={},f=(i=null,s=function(){return i?new Date(i.getTime()):new Date},l=function(e){return"undefined"!=typeof Watson&&Watson.config?Watson.config[e]:null},c=function(e,t,n){var r,o={},a=!1,i=h.strToNum(e);return(a=d(i,t,n))&&(i=i.replace(new RegExp(a),""),e=e.replace(new RegExp(h.numToStr(a)),"$DATE$")),(r=u(i,t,n))&&(e=e.replace(new RegExp(h.numToStr(r)),"$TIME$")),o.eventTitle=e,o.isAllDay=!(!a||r||a.match(/^(?:right )?now$|^tonight$/)),o.isValidDate=!(!a&&!r),o},u=function(e,t,n){var r,o,i,s,l=0,c=!1;if(r=e.match(new RegExp(a.explicitTime.source,"g")))if((r=r.sort((function(e,t){var n=e.trim().length,r=t.trim().length;return e.match(/(?:a|p).?m.?/)&&(n+=20),t.match(/(?:a|p).?m.?/)&&(r+=20),r-n}))[0].trim()).length<=2&&e.trim().length>2)l=0;else{l=r.length,r=r.match(a.explicitTime);var u=parseInt(r[1]),d=r[2]||0,h=r[3];!h&&r[1].startsWith("0")&&e.match(a.internationalTime)?l=0:h?(0===h.indexOf("p")&&12!=u?u+=12:0===h.indexOf("a")&&12==u&&(u=0),l+=20):u<12&&(u<7||u<=t.getHours())&&(u+=12),o=u,i=d,s=!!h,c=r[0]}var p=function(){return c&&(t.setHours(o,i,0),t.hasMeridian=s),c};if(!(l<4))return p();if(r=e.match(a.inRelativeTime))switch(isNaN(r[1])&&(r[1]=1),r[3]&&(r[1]=-1*parseInt(r[1])),r[2].substring(0,1)){case"h":return t.setHours(t.getHours()+parseInt(r[1])),r[0];case"m":return t.setMinutes(t.getMinutes()+parseInt(r[1])),r[0];default:return p()}else if(r=e.match(a.inMilliTime))switch(r[3]&&(r[1]=-1*parseInt(r[1])),r[2].substring(0,1)){case"s":return t.setSeconds(t.getSeconds()+parseInt(r[1])),r[0];case"m":return t.setMilliseconds(t.getMilliseconds()+parseInt(r[1])),r[0];default:return p()}else{if(!(r=e.match(a.midtime)))return(r=e.match(a.internationalTime))?(t.setHours(r[1],r[2],0),t.hasMeridian=!0,r[0]):p();switch(r[1]){case"dawn":return t.setHours(5,0,0),t.hasMeridian=!0,r[0];case"morn":case"morning":return t.setHours(8,0,0),t.hasMeridian=!0,r[0];case"noon":return t.setHours(12,0,0),t.hasMeridian=!0,r[0];case"afternoon":return t.setHours(14,0,0),t.hasMeridian=!0,r[0];case"evening":return t.setHours(19,0,0),t.hasMeridian=!0,r[0];case"night":return t.setHours(21,0,0),t.hasMeridian=!0,r[0];case"midnight":return t.setHours(0,0,0),t.hasMeridian=!0,r[0];default:return p()}}},d=function(e,t,n){var r;if(r=e.match(a.monthDay))return r[3]?(t.setFullYear(r[3],h.changeMonth(r[1]),r[2]),t.hasYear=!0):t.setMonth(h.changeMonth(r[1]),r[2]),r[0];if(r=e.match(a.dayMonth))return r[3]?(t.setFullYear(r[3],h.changeMonth(r[2]),r[1]),t.hasYear=!0):t.setMonth(h.changeMonth(r[2]),r[1]),r[0];if(r=e.match(a.shortForm)){var o=r[3],i=null;return o&&(i=parseInt(o)),i&&o.length<4&&(i+=i>50?1900:2e3),i?(t.setFullYear(i,r[1]-1,r[2]),t.hasYear=!0):t.setMonth(r[1]-1,r[2]),r[0]}if(r=e.match(a.oxtDays)||e.match(a.oxtDaysUK))switch(r[1].substr(0,3)){case"sun":return h.changeDay(t,0,"oxt"),r[0];case"mon":return h.changeDay(t,1,"oxt"),r[0];case"tue":return h.changeDay(t,2,"oxt"),r[0];case"wed":return h.changeDay(t,3,"oxt"),r[0];case"thu":return h.changeDay(t,4,"oxt"),r[0];case"fri":return h.changeDay(t,5,"oxt"),r[0];case"sat":return h.changeDay(t,6,"oxt"),r[0];default:return!1}else{if(!(r=e.match(a.weekdays))){if(r=e.match(a.inRelativeDateFromRelativeDate))return!(!h.relativeDateMatcher(r[4],t)||!h.inRelativeDateMatcher(r[1],r[2],r[3],t))&&r[0];if(r=e.match(a.relativeDate))return!!h.relativeDateMatcher(r[1],t)&&r[0];if(r=e.match(a.inRelativeDate))return!!h.inRelativeDateMatcher(r[1],r[2],r[3],t)&&r[0];if(r=e.match(new RegExp(a.days,"g"))){if(0!==(r=r.sort((function(e,t){return t.trim().length-e.trim().length}))[0].trim()).indexOf("on")&&(0!==r.indexOf("the")||-1===r.indexOf(",",r.length-1))&&-1===e.indexOf(r,e.length-r.length-1)||(!n||!n.isAllDay)&&r.length<=2)return!1;r=r.match(a.daysOnly);var s=t.getMonth(),l=r[1];return l<t.getDate()&&s++,t.setMonth(s,l),r[0]}return!1}switch(r[2].substr(0,3)){case"sun":return h.changeDay(t,0,r[1]),r[0];case"mon":return h.changeDay(t,1,r[1]),r[0];case"tue":return h.changeDay(t,2,r[1]),r[0];case"wed":return h.changeDay(t,3,r[1]),r[0];case"thu":return h.changeDay(t,4,r[1]),r[0];case"fri":return h.changeDay(t,5,r[1]),r[0];case"sat":return h.changeDay(t,6,r[1]),r[0];default:return!1}}},h={relativeDateMatcher:function(e,t){var n=s();switch(e){case"next week":return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()+7),t.hasYear=!0,!0;case"next month":return t.setFullYear(n.getFullYear(),n.getMonth()+1,n.getDate()),t.hasYear=!0,!0;case"next year":return t.setFullYear(n.getFullYear()+1,n.getMonth(),n.getDate()),t.hasYear=!0,!0;case"last week":return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()-7),t.hasYear=!0,!0;case"last month":return t.setFullYear(n.getFullYear(),n.getMonth()-1,n.getDate()),t.hasYear=!0,!0;case"last year":return t.setFullYear(n.getFullYear()-1,n.getMonth(),n.getDate()),t.hasYear=!0,!0;case"tom":case"tmrw":case"tomorrow":return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()+1),t.hasYear=!0,!0;case"day after tom":case"day after tmrw":case"day after tomorrow":return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()+2),t.hasYear=!0,!0;case"this week":case"this month":case"this year":case"tod":case"today":return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.hasYear=!0,!0;case"now":case"right now":case"tonight":return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),0),"tonight"===e&&t.getHours()<21&&t.setHours(21,0,0,0),t.hasMeridian=!0,t.hasYear=!0,!0;case"yest":case"yesterday":return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()-1),t.hasYear=!0,!0;case"day before yest":case"day before yesterday":return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()-2),t.hasYear=!0,!0;default:return!1}},inRelativeDateMatcher:function(e,t,n,r){switch(e=isNaN(e)?1:parseInt(e),n&&(e*=-1),t){case"day":return r.setDate(r.getDate()+e),r.hasYear=!0,!0;case"week":return r.setDate(r.getDate()+7*e),r.hasYear=!0,!0;case"month":return r.setMonth(r.getMonth()+e),r.hasYear=!0,!0;case"year":return r.setFullYear(r.getFullYear()+e),r.hasYear=!0,!0;default:return!1}},changeMonth:function(e){return this.monthToInt[e.substr(0,3)]},changeDay:function(e,t,n){var r=7-e.getDay()+t;(r>7&&void 0===n||"last"===n)&&(r-=7),r>=0&&"last"===n&&(r-=7),"oxt"===n&&(r+=7),e.setDate(e.getDate()+r)},monthDiff:function(e,t){var n;return n=12*(t.getFullYear()-e.getFullYear()),n-=e.getMonth()+1,(n+=t.getMonth()+1)<=0?0:n},escapeRegExp:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isSameDay:function(e,t){return e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()&&e.getFullYear()===t.getFullYear()},monthToInt:{jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},wordsToInt:{one:1,first:1,two:2,second:2,three:3,third:3,four:4,fourth:4,five:5,fifth:5,six:6,sixth:6,seven:7,seventh:7,eight:8,eighth:8,nine:9,ninth:9,ten:10,tenth:10},intToWords:["one|first","two|second","three|third","four|fourth","five|fifth","six|sixth","seven|seventh","eight|eighth","nine|ninth","ten|tenth"],strToNum:function(e){return e.replace(a.digit,(function(e){var t=h.wordsToInt[e];return-1!==e.indexOf("th",e.length-2)?t+="th":-1!==e.indexOf("st",e.length-2)?t+="st":-1!==e.indexOf("nd",e.length-2)?t+="nd":-1!==e.indexOf("rd",e.length-2)&&(t+="rd"),t}))},numToStr:function(e){return e.replace(/((?:[1-9]|10)(?:st|nd|rd|th)?)/g,(function(e){return"(?:"+e+"|"+h.intToWords[parseInt(e)-1]+")"}))}},(a={rangeSplitters:/(\bto\b|\-|\b(?:un)?till?\b|\bthrough\b|\bthru\b|\band\b|\bends?\b)/g,months:"\\b(jan(?:uary)?|feb(?:ruary)?|mar(?:ch)?|apr(?:il)?|may|jun(?:e)?|jul(?:y)?|aug(?:ust)?|sep(?:tember)?|oct(?:ober)?|nov(?:ember)?|dec(?:ember)?)\\b",days:"\\b(?:(?:(?:on )?the )(?=\\d\\d?(?:st|nd|rd|th)))?([1-2]\\d|3[0-1]|0?[1-9])(?:st|nd|rd|th)?(?:,|\\b)",years:"\\b(20\\d{2}|\\d{2}[6-9]\\d)\\b",shortForm:/\b(0?[1-9]|1[0-2])\/([1-2]\d|3[0-1]|0?[1-9])(?:\/(\d{2,4}))?\b/,shortFormD:/\b(0?[1-9]|1[0-2])\-([1-2]\d|3[0-1]|0?[1-9])\-(\d{2,4})\b/g,shortFormY:/\b(\d{4})[\/\-](0?[1-9]|1[0-2])[\/\-]([1-2]\d|3[0-1]|0?[1-9])\b/g,weekdaysStr:"\\b(sun|mon|tue(?:s)?|wed(?:nes)?|thu(?:rs?)?|fri|sat(?:ur)?)(?:day)?\\b",relativeDateStr:"((?:next|last|this) (?:week|month|year)|tom(?:orrow)?|tmrw|tod(?:ay)?|(?:right )?now|tonight|day after (?:tom(?:orrow)?|tmrw)|yest(?:erday)?|day before yest(?:erday)?)",inRelativeDateStr:"(\\d{1,4}|a) (day|week|month|year)s? ?(ago|old)?",inRelativeTime:/\b(\d{1,2} ?|a |an )(h(?:our|r)?|m(?:in(?:ute)?)?)s? ?(ago|old)?\b/,inMilliTime:/\b(\d+) ?(s(?:ec(?:ond)?)?|ms|millisecond)s? ?(ago|old)?\b/,midtime:/(?:@ ?)?\b(?:at )?(dawn|morn(?:ing)?|noon|afternoon|evening|night|midnight)\b/,internationalTime:/\b(?:(0[0-9]|1[3-9]|2[0-3]):?([0-5]\d))\b/,explicitTime:/(?:@ ?)?\b(?:at |from )?(1[0-2]|[0-2]?[1-9])(?::?([0-5]\d))? ?([ap]\.?m?\.?)?(?:o'clock)?\b/,more_than_comparator:/((?:more|greater|older|newer) than|after|before) \$(?:DATE|TIME)\$/i,less_than_comparator:/((?:less|fewer) than) \$(?:DATE|TIME)\$/i,fillerWords:/ (from|is|was|at|on|for|in|due(?! date)|(?:un)?till?)\b/,fillerWords2:/ (was|is|due(?! date))\b/}).monthDay=new RegExp(a.months+" "+a.days+"(?: "+a.years+")?"),a.dayMonth=new RegExp(a.days+"(?: (?:day )?of)? "+a.months+"(?: "+a.years+")?"),a.daysOnly=new RegExp(a.days),a.digit=new RegExp("\\b("+h.intToWords.join("|")+")\\b","g"),a.relativeDate=new RegExp("\\b"+a.relativeDateStr+"\\b"),a.inRelativeDate=new RegExp("\\b"+a.inRelativeDateStr+"\\b"),a.inRelativeDateFromRelativeDate=new RegExp("\\b"+a.inRelativeDateStr+" from "+a.relativeDateStr+"\\b"),a.weekdays=new RegExp("(?:(next|last) (?:week (?:on )?)?)?"+a.weekdaysStr),a.oxtDays=new RegExp("(?:\\boxt|\\bweek next) "+a.weekdaysStr),a.oxtDaysUK=new RegExp(a.weekdaysStr+" week\\b"),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),{parse:function(e){null===e&&(e="");var t=s(),n="undefined"!=typeof Watson?Watson.preprocess(e):[e,{}],r=(e=n[0],n[1]);e=(e=e.replace(a.shortFormD,"$1/$2/$3")).replace(a.shortFormY,"$2/$3/$1");var o=l("disableRanges")?[e.toLowerCase()]:e.toLowerCase().split(a.rangeSplitters);for(a.rangeSplitters.lastIndex=0,t.setMilliseconds(0);!r.startDate&&(null!==(n=c(o[0],t,null))&&(n.isAllDay&&t.setHours(0,0,0),r.isAllDay=n.isAllDay,r.eventTitle=n.eventTitle,r.startDate=n.isValidDate?t:null),!r.startDate&&o.length>=3);){for(var i=[o[0]+o[1]+o[2]],u=3;u<o.length;u++)i.push(o[u]);o=i}for(;!r.endDate;)if(o.length>1&&(t=new Date(t.getTime()),null!==(n=c(o[2],t,r))&&(r.isAllDay&&t.setHours(0,0,0),n.eventTitle.replace(/\$(?:DATE|TIME)\$/g,"").length>r.eventTitle.replace(/\$(?:DATE|TIME)\$/g,"").length&&(r.eventTitle=n.eventTitle),r.endDate=n.isValidDate?t:null)),!r.endDate){if(!(o.length>=4)){r.endDate=null;break}for(i=[o[0],o[1],o[2]+o[3]+o[4]],u=5;u<o.length;u++)i.push(o[u]);o=i}if(function(e,t,n,r,o){var i=s();t?e>t&&t>i&&h.isSameDay(e,t)&&h.isSameDay(e,i)?e.hasMeridian?e.setDate(e.getDate()-1):(e.setHours(e.getHours()-12),e>t&&e.setHours(e.getHours()-12)):e>t&&t<i&&h.monthDiff(t,e)>=3&&!t.hasYear?t.setFullYear(t.getFullYear()+1):e>t&&h.isSameDay(e,t)?t.setDate(e.getDate()+1):t<i&&-1===r.indexOf(" was ")&&h.monthDiff(t,i)>=3&&!t.hasYear&&!e.hasYear&&(t.setFullYear(t.getFullYear()+1),e.setFullYear(e.getFullYear()+1)):e&&(e<=i&&!e.hasYear&&!r.match(/was|ago|old\b/)&&(h.isSameDay(e,i)&&!n?e.hasMeridian||e.getHours()<19?e.setDate(e.getDate()+1):(e.setHours(e.getHours()+12),e<=i&&(e.setHours(e.getHours()-12),e.setDate(e.getDate()+1))):h.monthDiff(e,i)>=3&&e.setFullYear(e.getFullYear()+1)),o.eventTitle.match(a.more_than_comparator)?(e<=i&&(!h.isSameDay(e,i)||r.match(/ago|old\b/))&&!o.eventTitle.match(/after|newer/i)||o.eventTitle.match(/older|before/i)?(o.endDate=new Date(e.getTime()),o.startDate=new Date(1900,0,1,0,0,0,0)):o.endDate=new Date(3e3,0,1,0,0,0,0),o.eventTitle=o.eventTitle.replace(a.more_than_comparator,"")):o.eventTitle.match(a.less_than_comparator)&&(e<=i?h.isSameDay(e,i)&&!r.match(/ago|old\b/)?(o.endDate=new Date(e.getTime()),o.startDate=new Date(1900,0,1,0,0,0,0)):o.endDate=new Date(i.getTime()):(o.endDate=new Date(e.getTime()),o.startDate=new Date(i.getTime())),o.eventTitle=o.eventTitle.replace(a.less_than_comparator,"")))}(r.startDate,r.endDate,r.isAllDay,e,r),r.eventTitle){r.eventTitle=r.eventTitle.replace(/\$(?:DATE|TIME)\$/g,"");var d=l("disableRanges")?a.fillerWords2:a.fillerWords;r.eventTitle=r.eventTitle.split(d)[0].trim(),r.eventTitle=r.eventTitle.replace(/(?:^| )(?:\.|-$|by$|in$|at$|from$|on$|starts?$|for$|(?:un)?till?$|!|,|;)+/g,"").replace(/ +/g," ").trim();var p=e.match(new RegExp(h.escapeRegExp(r.eventTitle),"i"));p&&(r.eventTitle=p[0].replace(/ +/g," ").trim(),""==r.eventTitle&&(r.eventTitle=null))}else r.eventTitle=null;return"undefined"!=typeof Watson&&Watson.postprocess(r),r},_setNow:function(e){i=e}});
/*!
 * Sherlock
 * Copyright (c) 2021 Neil Gupta
 */"function"==typeof define&&define.amd?define(f):p&&(p=f);var g=function(e){return e+(e>0?["th","st","nd","rd"][e>3&&e<21||e%10>3?0:e%10]:"")},m=function(e,t){var n=e.getFullYear(),r=e.toString().substring(4,7),o=e.getMonth()+1,a=e.getDate(),i=e.toLocaleString("default",{month:"long"});if("MMM do yyyy"===t)return"[["+r+" "+g(a)+", "+n+"]]";if(t.includes("yyyy")&&t.includes("MM")&&t.includes("dd")&&(t.includes("EEEE")||t.includes("EEE")||t.includes("E"))){var s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l={yyyy:n,dd:("0"+a).slice(-2),MM:("0"+o).slice(-2),EEEE:s[e.getDay()],EEE:s[e.getDay()].substring(0,3),E:s[e.getDay()].substring(0,1)};return"[["+t.replace(/yyyy|dd|MM|EEEE|EEE|E/gi,(function(e){return l[e]}))+"]]"}if("do MMMM yyyy"===t||"MMMM do, yyyy"===t){var c={yyyy:n,do:g(a),MMMM:i};return"[["+t.replace(/yyyy|do|MMMM/gi,(function(e){return c[e]}))+"]]"}if(t.includes("yyyy")&&t.includes("MM")&&t.includes("dd")){var u={yyyy:n,dd:("0"+a).slice(-2),MM:("0"+o).slice(-2)};return"[["+t.replace(/yyyy|dd|MM/gi,(function(e){return u[e]}))+"]]"}return"[["+r+" "+g(a)+", "+n+"]]"};const y=e=>e=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");function v(e,t,n,r){let o=[],a=[],i=[],s=[];t=(t=(t=(t=t.replaceAll(/```([^`]|\n)*```/gim,(e=>(o.push(e),console.debug({LogseqAutomaticLinker:"code block found",match:e}),"71e46a9e-1150-49c3-a04b-0491ebe05922")))).replaceAll(/(?=`)`(?!`)[^`]*(?=`)`(?!`)/g,(e=>(a.push(e),console.debug({LogseqAutomaticLinker:"inline code found",match:e}),"164b97c2-beb7-4204-99b4-6ec2ddc93f9c")))).replaceAll(/ *[^\s]+:: /g,(e=>(i.push(e),console.debug({LogseqAutomaticLinker:"property found",match:e}),"50220b1c-63f0-4f57-aa73-08c4d936a419")))).replaceAll(/\[[^\[\]]+\]\([^\(\)]+\)/g,(e=>(s.push(e),console.debug({LogseqAutomaticLinker:"Markdown link found",match:e}),"53c65a4a-137d-44a8-8849-8ec6ca411942")));let l=!1;return e.forEach((e=>{const o=new RegExp(`(\\w*(?<!\\[{2}[^[\\]]*)\\w*(?<!\\#)\\w*(?<!\\w+:\\/\\/\\S*))(?<=[\\s,.:;"']|^)(${y(e)})(?![^[\\]]*\\]{2})(?=[\\s,.:;"']|$)`,"gi"),a=new RegExp(`(?<!\\[)${y(e)}(?!\\])`,"gm");e.match(/^[\u4e00-\u9fa5]{0,}$/gm)?(t=t.replaceAll(a,n?`#${e}`:`[[${e}]]`),l=!0):e.length>0&&t.toUpperCase().includes(e.toUpperCase())&&(t=t.replaceAll(o,(t=>{const o=/\s/g.test(t);let a=e==e.toLowerCase()?t:e;return n||r&&!o?o?`#[[${a}]]`:`#${a}`:`[[${a}]]`})),l=!0)})),o?.forEach(((e,n)=>{t=t.replace("71e46a9e-1150-49c3-a04b-0491ebe05922",e)})),a?.forEach(((e,n)=>{t=t.replace("164b97c2-beb7-4204-99b4-6ec2ddc93f9c",e)})),i?.forEach(((e,n)=>{t=t.replace("50220b1c-63f0-4f57-aa73-08c4d936a419",e)})),s?.forEach(((e,n)=>{t=t.replace("53c65a4a-137d-44a8-8849-8ec6ca411942",e)})),[t,l]}let b=[],w=[],_="";async function x(){const e=await async function(){return(await logseq.DB.datascriptQuery("\n  [:find (pull ?b [*])\n             :where\n             [?b :block/properties ?p]\n             [(get ?p :automatic-ignore)]]\n  ")).filter((e=>e[0]["original-name"]&&e[0].properties["automatic-ignore"])).map((e=>[e[0]["original-name"].toUpperCase(),e[0].properties.alias?.map((e=>e.toUpperCase()))??[]].flat())).flat()}();let t=logseq.settings?.pagesToIgnore.split(",").map((e=>e.toUpperCase().trim())).concat(e);t=[...new Set(t)];logseq.DB.datascriptQuery("[:find (pull ?p [*]) :where [?p :block/uuid ?u][?p :block/original-name]]").then((async e=>{b=e.filter((e=>!t.includes(e[0]["original-name"].toUpperCase()))).map((e=>e[0]["original-name"])).filter((e=>e)),b=b.concat((await async function(){let e=await logseq.DB.datascriptQuery("\n  [:find (pull ?b [*])\n             :where\n             [?b :block/properties ?p]\n             [(get ?p :alias)]]\n  "),t=e.map((e=>e[0].properties.alias));return console.log({LogseqAutomaticLinker:"fetchAliases",result:e,resultMap:t}),t}()).flat()),b.sort(((e,t)=>t.length-e.length)),console.log({LogseqAutomaticLinker:"getPages",results:e,pageList:b})}))}async function S(e){if(null!=e){let n=await logseq.Editor.getBlock(e);if(null==n)return;console.log({LogseqAutomaticLinker:"parseBlockForLink",block:n});let r=n.content.replaceAll(/{.*}/g,(e=>m(t(p).parse(e.slice(1,-1)).startDate,_))),o=!1;[r,o]=v(b,r,logseq.settings?.parseAsTags,logseq.settings?.parseSingleWordAsTag),o&&logseq.Editor.updateBlock(n.uuid,`${r}`)}}logseq.useSettingsSchema([{key:"enableAutoParse",description:"Automatically parse the block on enter",type:"boolean",default:!1,title:"Automatically parse the block on enter"},{key:"stateKeybinding",description:"Keybinding to toggle Automatic Parsing",type:"string",default:"mod+shift+l",title:"Keybinding for Automatic Parsing"},{key:"parseSingleBlockKeybinding",description:"Keybinding to parse a single block",type:"string",default:"mod+p",title:"Keybinding for Parsing a Single Block"},{key:"parseSingleWordAsTag",description:"Parse single words as tags",type:"boolean",default:!1,title:"Parse single words as tags"},{key:"parseAsTags",description:"Parse all links as tags",type:"boolean",default:!1,title:"Parse all links as tags"},{key:"pagesToIgnore",description:"Pages to ignore when generating links",type:"string",default:"a,b,c,card,now,later,todo,doing,done,wait,waiting,canceled,cancelled,started,in-progress",title:"Pages to ignore when generating links"}]);logseq.ready((async()=>{x(),_=(await logseq.App.getUserConfigs()).preferredDateFormat,logseq.DB.onChanged((e=>{if("insertBlocks"==e.txMeta?.outlinerOp)logseq.settings?.enableAutoParse&&w?.forEach(S),console.debug({LogseqAutomaticLinker:"Enter pressed"}),w=[];else{console.debug({LogseqAutomaticLinker:"Something changed"});const t=e.blocks[0].uuid;w.includes(t)||w.push(t)}})),logseq.App.onCurrentGraphChanged(x),logseq.Editor.registerBlockContextMenuItem("Parse Block for Links",(e=>S(e.uuid))),logseq.App.registerCommandShortcut({binding:logseq.settings?.stateKeybinding},(()=>{x(),w=[];const e=logseq.settings?.enableAutoParse?"disabled":"enabled";logseq.App.showMsg(`Auto Parse Links ${e}`),logseq.updateSettings({enableAutoParse:!logseq.settings?.enableAutoParse})})),logseq.App.registerCommandShortcut({binding:logseq.settings?.parseSingleBlockKeybinding},(e=>{x(),logseq.settings?.enableAutoParse||S(e.uuid)}))})).catch(console.error);