(function(){const x=document.createElement("link").relList;if(x&&x.supports&&x.supports("modulepreload"))return;for(const W of document.querySelectorAll('link[rel="modulepreload"]'))re(W);new MutationObserver(W=>{for(const he of W)if(he.type==="childList")for(const D of he.addedNodes)D.tagName==="LINK"&&D.rel==="modulepreload"&&re(D)}).observe(document,{childList:!0,subtree:!0});function Y(W){const he={};return W.integrity&&(he.integrity=W.integrity),W.referrerPolicy&&(he.referrerPolicy=W.referrerPolicy),W.crossOrigin==="use-credentials"?he.credentials="include":W.crossOrigin==="anonymous"?he.credentials="omit":he.credentials="same-origin",he}function re(W){if(W.ep)return;W.ep=!0;const he=Y(W);fetch(W.href,he)}})();var Mn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ur={},Ai={get exports(){return ur},set exports(g){ur=g}};/*! For license information please see lsplugin.user.js.LICENSE.txt */(function(g,x){(function(Y,re){g.exports=re()})(self,()=>(()=>{var Y={227:(D,h,E)=>{var U=E(155);h.formatArgs=function(P){if(P[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+P[0]+(this.useColors?"%c ":" ")+"+"+D.exports.humanize(this.diff),!this.useColors)return;const ee="color: "+this.color;P.splice(1,0,ee,"color: inherit");let y=0,p=0;P[0].replace(/%[a-zA-Z%]/g,v=>{v!=="%%"&&(y++,v==="%c"&&(p=y))}),P.splice(p,0,ee)},h.save=function(P){try{P?h.storage.setItem("debug",P):h.storage.removeItem("debug")}catch{}},h.load=function(){let P;try{P=h.storage.getItem("debug")}catch{}return!P&&U!==void 0&&"env"in U&&(P=U.env.DEBUG),P},h.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},h.storage=function(){try{return localStorage}catch{}}(),h.destroy=(()=>{let P=!1;return()=>{P||(P=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),h.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],h.log=console.debug||console.log||(()=>{}),D.exports=E(447)(h);const{formatters:O}=D.exports;O.j=function(P){try{return JSON.stringify(P)}catch(ee){return"[UnexpectedJSONParseError]: "+ee.message}}},447:(D,h,E)=>{D.exports=function(U){function O(y){let p,v,_,R=null;function M(...$){if(!M.enabled)return;const V=M,j=Number(new Date),N=j-(p||j);V.diff=N,V.prev=p,V.curr=j,p=j,$[0]=O.coerce($[0]),typeof $[0]!="string"&&$.unshift("%O");let a=0;$[0]=$[0].replace(/%([a-zA-Z%])/g,(l,m)=>{if(l==="%%")return"%";a++;const k=O.formatters[m];if(typeof k=="function"){const J=$[a];l=k.call(V,J),$.splice(a,1),a--}return l}),O.formatArgs.call(V,$),(V.log||O.log).apply(V,$)}return M.namespace=y,M.useColors=O.useColors(),M.color=O.selectColor(y),M.extend=P,M.destroy=O.destroy,Object.defineProperty(M,"enabled",{enumerable:!0,configurable:!1,get:()=>R!==null?R:(v!==O.namespaces&&(v=O.namespaces,_=O.enabled(y)),_),set:$=>{R=$}}),typeof O.init=="function"&&O.init(M),M}function P(y,p){const v=O(this.namespace+(p===void 0?":":p)+y);return v.log=this.log,v}function ee(y){return y.toString().substring(2,y.toString().length-2).replace(/\.\*\?$/,"*")}return O.debug=O,O.default=O,O.coerce=function(y){return y instanceof Error?y.stack||y.message:y},O.disable=function(){const y=[...O.names.map(ee),...O.skips.map(ee).map(p=>"-"+p)].join(",");return O.enable(""),y},O.enable=function(y){let p;O.save(y),O.namespaces=y,O.names=[],O.skips=[];const v=(typeof y=="string"?y:"").split(/[\s,]+/),_=v.length;for(p=0;p<_;p++)v[p]&&((y=v[p].replace(/\*/g,".*?"))[0]==="-"?O.skips.push(new RegExp("^"+y.slice(1)+"$")):O.names.push(new RegExp("^"+y+"$")))},O.enabled=function(y){if(y[y.length-1]==="*")return!0;let p,v;for(p=0,v=O.skips.length;p<v;p++)if(O.skips[p].test(y))return!1;for(p=0,v=O.names.length;p<v;p++)if(O.names[p].test(y))return!0;return!1},O.humanize=E(824),O.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(U).forEach(y=>{O[y]=U[y]}),O.names=[],O.skips=[],O.formatters={},O.selectColor=function(y){let p=0;for(let v=0;v<y.length;v++)p=(p<<5)-p+y.charCodeAt(v),p|=0;return O.colors[Math.abs(p)%O.colors.length]},O.enable(O.load()),O}},856:function(D){D.exports=function(){function h(S){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},h(S)}function E(S,T){return E=Object.setPrototypeOf||function(H,Q){return H.__proto__=Q,H},E(S,T)}function U(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O(S,T,H){return O=U()?Reflect.construct:function(Q,ce,Ne){var Xe=[null];Xe.push.apply(Xe,ce);var Fe=new(Function.bind.apply(Q,Xe));return Ne&&E(Fe,Ne.prototype),Fe},O.apply(null,arguments)}function P(S){return ee(S)||y(S)||p(S)||_()}function ee(S){if(Array.isArray(S))return v(S)}function y(S){if(typeof Symbol<"u"&&S[Symbol.iterator]!=null||S["@@iterator"]!=null)return Array.from(S)}function p(S,T){if(S){if(typeof S=="string")return v(S,T);var H=Object.prototype.toString.call(S).slice(8,-1);return H==="Object"&&S.constructor&&(H=S.constructor.name),H==="Map"||H==="Set"?Array.from(S):H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H)?v(S,T):void 0}}function v(S,T){(T==null||T>S.length)&&(T=S.length);for(var H=0,Q=new Array(T);H<T;H++)Q[H]=S[H];return Q}function _(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var R=Object.hasOwnProperty,M=Object.setPrototypeOf,$=Object.isFrozen,V=Object.getPrototypeOf,j=Object.getOwnPropertyDescriptor,N=Object.freeze,a=Object.seal,l=Object.create,m=typeof Reflect<"u"&&Reflect,k=m.apply,J=m.construct;k||(k=function(S,T,H){return S.apply(T,H)}),N||(N=function(S){return S}),a||(a=function(S){return S}),J||(J=function(S,T){return O(S,P(T))});var te=oe(Array.prototype.forEach),se=oe(Array.prototype.pop),ye=oe(Array.prototype.push),Ce=oe(String.prototype.toLowerCase),ke=oe(String.prototype.match),ge=oe(String.prototype.replace),Me=oe(String.prototype.indexOf),d=oe(String.prototype.trim),b=oe(RegExp.prototype.test),F=Oe(TypeError);function oe(S){return function(T){for(var H=arguments.length,Q=new Array(H>1?H-1:0),ce=1;ce<H;ce++)Q[ce-1]=arguments[ce];return k(S,T,Q)}}function Oe(S){return function(){for(var T=arguments.length,H=new Array(T),Q=0;Q<T;Q++)H[Q]=arguments[Q];return J(S,H)}}function q(S,T){M&&M(S,null);for(var H=T.length;H--;){var Q=T[H];if(typeof Q=="string"){var ce=Ce(Q);ce!==Q&&($(T)||(T[H]=ce),Q=ce)}S[Q]=!0}return S}function Z(S){var T,H=l(null);for(T in S)k(R,S,[T])&&(H[T]=S[T]);return H}function de(S,T){for(;S!==null;){var H=j(S,T);if(H){if(H.get)return oe(H.get);if(typeof H.value=="function")return oe(H.value)}S=V(S)}function Q(ce){return console.warn("fallback value for",ce),null}return Q}var Ae=N(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ee=N(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),We=N(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ot=N(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),me=N(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),pe=N(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Te=N(["#text"]),je=N(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Le=N(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Pe=N(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Be=N(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Pt=a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ct=a(/<%[\w\W]*|[\w\W]*%>/gm),Nn=a(/^data-[\-\w.\u00B7-\uFFFF]/),Fn=a(/^aria-[\-\w]+$/),qn=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Rn=a(/^(?:\w+script|data):/i),it=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),cn=a(/^html$/i),Bn=function(){return typeof window>"u"?null:window},Dn=function(S,T){if(h(S)!=="object"||typeof S.createPolicy!="function")return null;var H=null,Q="data-tt-policy-suffix";T.currentScript&&T.currentScript.hasAttribute(Q)&&(H=T.currentScript.getAttribute(Q));var ce="dompurify"+(H?"#"+H:"");try{return S.createPolicy(ce,{createHTML:function(Ne){return Ne}})}catch{return console.warn("TrustedTypes policy "+ce+" could not be created."),null}};function ht(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Bn(),T=function(o){return ht(o)};if(T.version="2.3.8",T.removed=[],!S||!S.document||S.document.nodeType!==9)return T.isSupported=!1,T;var H=S.document,Q=S.document,ce=S.DocumentFragment,Ne=S.HTMLTemplateElement,Xe=S.Node,Fe=S.Element,et=S.NodeFilter,ft=S.NamedNodeMap,kt=ft===void 0?S.NamedNodeMap||S.MozNamedAttrMap:ft,Nt=S.HTMLFormElement,un=S.DOMParser,dn=S.trustedTypes,gt=Fe.prototype,pn=de(gt,"cloneNode"),hn=de(gt,"nextSibling"),$n=de(gt,"childNodes"),at=de(gt,"parentNode");if(typeof Ne=="function"){var Ft=Q.createElement("template");Ft.content&&Ft.content.ownerDocument&&(Q=Ft.content.ownerDocument)}var Ge=Dn(dn,H),fn=Ge?Ge.createHTML(""):"",mt=Q,qt=mt.implementation,gn=mt.createNodeIterator,mn=mt.createDocumentFragment,zn=mt.getElementsByTagName,Rt=H.importNode,bn={};try{bn=Z(Q).documentMode?Q.documentMode:{}}catch{}var we={};T.isSupported=typeof at=="function"&&qt&&qt.createHTMLDocument!==void 0&&bn!==9;var st,Ve,Bt=Pt,Dt=Ct,Ot=Nn,Ue=Fn,$t=Rn,bt=it,zt=qn,ve=null,Ht=q({},[].concat(P(Ae),P(Ee),P(We),P(me),P(Te))),_e=null,Wt=q({},[].concat(P(je),P(Le),P(Pe),P(Be))),ue=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),yt=null,Gt=null,Vt=!0,Jt=!0,yn=!1,lt=!1,ne=!1,Zt=!1,Kt=!1,tt=!1,Je=!1,ct=!1,Yt=!0,Et=!0,nt=!1,Ze={},ut=null,vn=q({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),_n=null,wn=q({},["audio","video","img","source","image","track"]),Qt=null,Tt=q({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Xt="http://www.w3.org/1998/Math/MathML",jt="http://www.w3.org/2000/svg",Ke="http://www.w3.org/1999/xhtml",At=Ke,xn=!1,Sn=["application/xhtml+xml","text/html"],Hn="text/html",dt=null,Wn=Q.createElement("form"),It=function(o){return o instanceof RegExp||o instanceof Function},en=function(o){dt&&dt===o||(o&&h(o)==="object"||(o={}),o=Z(o),ve="ALLOWED_TAGS"in o?q({},o.ALLOWED_TAGS):Ht,_e="ALLOWED_ATTR"in o?q({},o.ALLOWED_ATTR):Wt,Qt="ADD_URI_SAFE_ATTR"in o?q(Z(Tt),o.ADD_URI_SAFE_ATTR):Tt,_n="ADD_DATA_URI_TAGS"in o?q(Z(wn),o.ADD_DATA_URI_TAGS):wn,ut="FORBID_CONTENTS"in o?q({},o.FORBID_CONTENTS):vn,yt="FORBID_TAGS"in o?q({},o.FORBID_TAGS):{},Gt="FORBID_ATTR"in o?q({},o.FORBID_ATTR):{},Ze="USE_PROFILES"in o&&o.USE_PROFILES,Vt=o.ALLOW_ARIA_ATTR!==!1,Jt=o.ALLOW_DATA_ATTR!==!1,yn=o.ALLOW_UNKNOWN_PROTOCOLS||!1,lt=o.SAFE_FOR_TEMPLATES||!1,ne=o.WHOLE_DOCUMENT||!1,tt=o.RETURN_DOM||!1,Je=o.RETURN_DOM_FRAGMENT||!1,ct=o.RETURN_TRUSTED_TYPE||!1,Kt=o.FORCE_BODY||!1,Yt=o.SANITIZE_DOM!==!1,Et=o.KEEP_CONTENT!==!1,nt=o.IN_PLACE||!1,zt=o.ALLOWED_URI_REGEXP||zt,At=o.NAMESPACE||Ke,o.CUSTOM_ELEMENT_HANDLING&&It(o.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ue.tagNameCheck=o.CUSTOM_ELEMENT_HANDLING.tagNameCheck),o.CUSTOM_ELEMENT_HANDLING&&It(o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ue.attributeNameCheck=o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),o.CUSTOM_ELEMENT_HANDLING&&typeof o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ue.allowCustomizedBuiltInElements=o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),st=st=Sn.indexOf(o.PARSER_MEDIA_TYPE)===-1?Hn:o.PARSER_MEDIA_TYPE,Ve=st==="application/xhtml+xml"?function(C){return C}:Ce,lt&&(Jt=!1),Je&&(tt=!0),Ze&&(ve=q({},P(Te)),_e=[],Ze.html===!0&&(q(ve,Ae),q(_e,je)),Ze.svg===!0&&(q(ve,Ee),q(_e,Le),q(_e,Be)),Ze.svgFilters===!0&&(q(ve,We),q(_e,Le),q(_e,Be)),Ze.mathMl===!0&&(q(ve,me),q(_e,Pe),q(_e,Be))),o.ADD_TAGS&&(ve===Ht&&(ve=Z(ve)),q(ve,o.ADD_TAGS)),o.ADD_ATTR&&(_e===Wt&&(_e=Z(_e)),q(_e,o.ADD_ATTR)),o.ADD_URI_SAFE_ATTR&&q(Qt,o.ADD_URI_SAFE_ATTR),o.FORBID_CONTENTS&&(ut===vn&&(ut=Z(ut)),q(ut,o.FORBID_CONTENTS)),Et&&(ve["#text"]=!0),ne&&q(ve,["html","head","body"]),ve.table&&(q(ve,["tbody"]),delete yt.tbody),N&&N(o),dt=o)},tn=q({},["mi","mo","mn","ms","mtext"]),Cn=q({},["foreignobject","desc","title","annotation-xml"]),Gn=q({},["title","style","font","a","script"]),Lt=q({},Ee);q(Lt,We),q(Lt,ot);var nn=q({},me);q(nn,pe);var Vn=function(o){var C=at(o);C&&C.tagName||(C={namespaceURI:Ke,tagName:"template"});var w=Ce(o.tagName),ie=Ce(C.tagName);return o.namespaceURI===jt?C.namespaceURI===Ke?w==="svg":C.namespaceURI===Xt?w==="svg"&&(ie==="annotation-xml"||tn[ie]):Boolean(Lt[w]):o.namespaceURI===Xt?C.namespaceURI===Ke?w==="math":C.namespaceURI===jt?w==="math"&&Cn[ie]:Boolean(nn[w]):o.namespaceURI===Ke&&!(C.namespaceURI===jt&&!Cn[ie])&&!(C.namespaceURI===Xt&&!tn[ie])&&!nn[w]&&(Gn[w]||!Lt[w])},De=function(o){ye(T.removed,{element:o});try{o.parentNode.removeChild(o)}catch{try{o.outerHTML=fn}catch{o.remove()}}},kn=function(o,C){try{ye(T.removed,{attribute:C.getAttributeNode(o),from:C})}catch{ye(T.removed,{attribute:null,from:C})}if(C.removeAttribute(o),o==="is"&&!_e[o])if(tt||Je)try{De(C)}catch{}else try{C.setAttribute(o,"")}catch{}},On=function(o){var C,w;if(Kt)o="<remove></remove>"+o;else{var ie=ke(o,/^[\r\n\t ]+/);w=ie&&ie[0]}st==="application/xhtml+xml"&&(o='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+o+"</body></html>");var fe=Ge?Ge.createHTML(o):o;if(At===Ke)try{C=new un().parseFromString(fe,st)}catch{}if(!C||!C.documentElement){C=qt.createDocument(At,"template",null);try{C.documentElement.innerHTML=xn?"":fe}catch{}}var xe=C.body||C.documentElement;return o&&w&&xe.insertBefore(Q.createTextNode(w),xe.childNodes[0]||null),At===Ke?zn.call(C,ne?"html":"body")[0]:ne?C.documentElement:xe},vt=function(o){return gn.call(o.ownerDocument||o,o,et.SHOW_ELEMENT|et.SHOW_COMMENT|et.SHOW_TEXT,null,!1)},Jn=function(o){return o instanceof Nt&&(typeof o.nodeName!="string"||typeof o.textContent!="string"||typeof o.removeChild!="function"||!(o.attributes instanceof kt)||typeof o.removeAttribute!="function"||typeof o.setAttribute!="function"||typeof o.namespaceURI!="string"||typeof o.insertBefore!="function")},_t=function(o){return h(Xe)==="object"?o instanceof Xe:o&&h(o)==="object"&&typeof o.nodeType=="number"&&typeof o.nodeName=="string"},$e=function(o,C,w){we[o]&&te(we[o],function(ie){ie.call(T,C,w,dt)})},rn=function(o){var C;if($e("beforeSanitizeElements",o,null),Jn(o)||b(/[\u0080-\uFFFF]/,o.nodeName))return De(o),!0;var w=Ve(o.nodeName);if($e("uponSanitizeElement",o,{tagName:w,allowedTags:ve}),o.hasChildNodes()&&!_t(o.firstElementChild)&&(!_t(o.content)||!_t(o.content.firstElementChild))&&b(/<[/\w]/g,o.innerHTML)&&b(/<[/\w]/g,o.textContent)||w==="select"&&b(/<template/i,o.innerHTML))return De(o),!0;if(!ve[w]||yt[w]){if(!yt[w]&&on(w)&&(ue.tagNameCheck instanceof RegExp&&b(ue.tagNameCheck,w)||ue.tagNameCheck instanceof Function&&ue.tagNameCheck(w)))return!1;if(Et&&!ut[w]){var ie=at(o)||o.parentNode,fe=$n(o)||o.childNodes;if(fe&&ie)for(var xe=fe.length-1;xe>=0;--xe)ie.insertBefore(pn(fe[xe],!0),hn(o))}return De(o),!0}return o instanceof Fe&&!Vn(o)?(De(o),!0):w!=="noscript"&&w!=="noembed"||!b(/<\/no(script|embed)/i,o.innerHTML)?(lt&&o.nodeType===3&&(C=o.textContent,C=ge(C,Bt," "),C=ge(C,Dt," "),o.textContent!==C&&(ye(T.removed,{element:o.cloneNode()}),o.textContent=C)),$e("afterSanitizeElements",o,null),!1):(De(o),!0)},En=function(o,C,w){if(Yt&&(C==="id"||C==="name")&&(w in Q||w in Wn))return!1;if(!(Jt&&!Gt[C]&&b(Ot,C))){if(!(Vt&&b(Ue,C))){if(!_e[C]||Gt[C]){if(!(on(o)&&(ue.tagNameCheck instanceof RegExp&&b(ue.tagNameCheck,o)||ue.tagNameCheck instanceof Function&&ue.tagNameCheck(o))&&(ue.attributeNameCheck instanceof RegExp&&b(ue.attributeNameCheck,C)||ue.attributeNameCheck instanceof Function&&ue.attributeNameCheck(C))||C==="is"&&ue.allowCustomizedBuiltInElements&&(ue.tagNameCheck instanceof RegExp&&b(ue.tagNameCheck,w)||ue.tagNameCheck instanceof Function&&ue.tagNameCheck(w))))return!1}else if(!Qt[C]){if(!b(zt,ge(w,bt,""))){if((C!=="src"&&C!=="xlink:href"&&C!=="href"||o==="script"||Me(w,"data:")!==0||!_n[o])&&!(yn&&!b($t,ge(w,bt,"")))){if(w)return!1}}}}}return!0},on=function(o){return o.indexOf("-")>0},wt=function(o){var C,w,ie,fe;$e("beforeSanitizeAttributes",o,null);var xe=o.attributes;if(xe){var Se={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_e};for(fe=xe.length;fe--;){var xt=C=xe[fe],ze=xt.name,X=xt.namespaceURI;if(w=ze==="value"?C.value:d(C.value),ie=Ve(ze),Se.attrName=ie,Se.attrValue=w,Se.keepAttr=!0,Se.forceKeepAttr=void 0,$e("uponSanitizeAttribute",o,Se),w=Se.attrValue,!Se.forceKeepAttr&&(kn(ze,o),Se.keepAttr))if(b(/\/>/i,w))kn(ze,o);else{lt&&(w=ge(w,Bt," "),w=ge(w,Dt," "));var rt=Ve(o.nodeName);if(En(rt,ie,w))try{X?o.setAttributeNS(X,ze,w):o.setAttribute(ze,w),se(T.removed)}catch{}}}$e("afterSanitizeAttributes",o,null)}},an=function o(C){var w,ie=vt(C);for($e("beforeSanitizeShadowDOM",C,null);w=ie.nextNode();)$e("uponSanitizeShadowNode",w,null),rn(w)||(w.content instanceof ce&&o(w.content),wt(w));$e("afterSanitizeShadowDOM",C,null)};return T.sanitize=function(o,C){var w,ie,fe,xe,Se;if((xn=!o)&&(o="<!-->"),typeof o!="string"&&!_t(o)){if(typeof o.toString!="function")throw F("toString is not a function");if(typeof(o=o.toString())!="string")throw F("dirty is not a string, aborting")}if(!T.isSupported){if(h(S.toStaticHTML)==="object"||typeof S.toStaticHTML=="function"){if(typeof o=="string")return S.toStaticHTML(o);if(_t(o))return S.toStaticHTML(o.outerHTML)}return o}if(Zt||en(C),T.removed=[],typeof o=="string"&&(nt=!1),nt){if(o.nodeName){var xt=Ve(o.nodeName);if(!ve[xt]||yt[xt])throw F("root node is forbidden and cannot be sanitized in-place")}}else if(o instanceof Xe)(ie=(w=On("<!---->")).ownerDocument.importNode(o,!0)).nodeType===1&&ie.nodeName==="BODY"||ie.nodeName==="HTML"?w=ie:w.appendChild(ie);else{if(!tt&&!lt&&!ne&&o.indexOf("<")===-1)return Ge&&ct?Ge.createHTML(o):o;if(!(w=On(o)))return tt?null:ct?fn:""}w&&Kt&&De(w.firstChild);for(var ze=vt(nt?o:w);fe=ze.nextNode();)fe.nodeType===3&&fe===xe||rn(fe)||(fe.content instanceof ce&&an(fe.content),wt(fe),xe=fe);if(xe=null,nt)return o;if(tt){if(Je)for(Se=mn.call(w.ownerDocument);w.firstChild;)Se.appendChild(w.firstChild);else Se=w;return _e.shadowroot&&(Se=Rt.call(H,Se,!0)),Se}var X=ne?w.outerHTML:w.innerHTML;return ne&&ve["!doctype"]&&w.ownerDocument&&w.ownerDocument.doctype&&w.ownerDocument.doctype.name&&b(cn,w.ownerDocument.doctype.name)&&(X="<!DOCTYPE "+w.ownerDocument.doctype.name+`>
`+X),lt&&(X=ge(X,Bt," "),X=ge(X,Dt," ")),Ge&&ct?Ge.createHTML(X):X},T.setConfig=function(o){en(o),Zt=!0},T.clearConfig=function(){dt=null,Zt=!1},T.isValidAttribute=function(o,C,w){dt||en({});var ie=Ve(o),fe=Ve(C);return En(ie,fe,w)},T.addHook=function(o,C){typeof C=="function"&&(we[o]=we[o]||[],ye(we[o],C))},T.removeHook=function(o){if(we[o])return se(we[o])},T.removeHooks=function(o){we[o]&&(we[o]=[])},T.removeAllHooks=function(){we={}},T}return ht()}()},729:D=>{var h=Object.prototype.hasOwnProperty,E="~";function U(){}function O(p,v,_){this.fn=p,this.context=v,this.once=_||!1}function P(p,v,_,R,M){if(typeof _!="function")throw new TypeError("The listener must be a function");var $=new O(_,R||p,M),V=E?E+v:v;return p._events[V]?p._events[V].fn?p._events[V]=[p._events[V],$]:p._events[V].push($):(p._events[V]=$,p._eventsCount++),p}function ee(p,v){--p._eventsCount==0?p._events=new U:delete p._events[v]}function y(){this._events=new U,this._eventsCount=0}Object.create&&(U.prototype=Object.create(null),new U().__proto__||(E=!1)),y.prototype.eventNames=function(){var p,v,_=[];if(this._eventsCount===0)return _;for(v in p=this._events)h.call(p,v)&&_.push(E?v.slice(1):v);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(p)):_},y.prototype.listeners=function(p){var v=E?E+p:p,_=this._events[v];if(!_)return[];if(_.fn)return[_.fn];for(var R=0,M=_.length,$=new Array(M);R<M;R++)$[R]=_[R].fn;return $},y.prototype.listenerCount=function(p){var v=E?E+p:p,_=this._events[v];return _?_.fn?1:_.length:0},y.prototype.emit=function(p,v,_,R,M,$){var V=E?E+p:p;if(!this._events[V])return!1;var j,N,a=this._events[V],l=arguments.length;if(a.fn){switch(a.once&&this.removeListener(p,a.fn,void 0,!0),l){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,v),!0;case 3:return a.fn.call(a.context,v,_),!0;case 4:return a.fn.call(a.context,v,_,R),!0;case 5:return a.fn.call(a.context,v,_,R,M),!0;case 6:return a.fn.call(a.context,v,_,R,M,$),!0}for(N=1,j=new Array(l-1);N<l;N++)j[N-1]=arguments[N];a.fn.apply(a.context,j)}else{var m,k=a.length;for(N=0;N<k;N++)switch(a[N].once&&this.removeListener(p,a[N].fn,void 0,!0),l){case 1:a[N].fn.call(a[N].context);break;case 2:a[N].fn.call(a[N].context,v);break;case 3:a[N].fn.call(a[N].context,v,_);break;case 4:a[N].fn.call(a[N].context,v,_,R);break;default:if(!j)for(m=1,j=new Array(l-1);m<l;m++)j[m-1]=arguments[m];a[N].fn.apply(a[N].context,j)}}return!0},y.prototype.on=function(p,v,_){return P(this,p,v,_,!1)},y.prototype.once=function(p,v,_){return P(this,p,v,_,!0)},y.prototype.removeListener=function(p,v,_,R){var M=E?E+p:p;if(!this._events[M])return this;if(!v)return ee(this,M),this;var $=this._events[M];if($.fn)$.fn!==v||R&&!$.once||_&&$.context!==_||ee(this,M);else{for(var V=0,j=[],N=$.length;V<N;V++)($[V].fn!==v||R&&!$[V].once||_&&$[V].context!==_)&&j.push($[V]);j.length?this._events[M]=j.length===1?j[0]:j:ee(this,M)}return this},y.prototype.removeAllListeners=function(p){var v;return p?(v=E?E+p:p,this._events[v]&&ee(this,v)):(this._events=new U,this._eventsCount=0),this},y.prototype.off=y.prototype.removeListener,y.prototype.addListener=y.prototype.on,y.prefixed=E,y.EventEmitter=y,D.exports=y},717:D=>{typeof Object.create=="function"?D.exports=function(h,E){h.super_=E,h.prototype=Object.create(E.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}})}:D.exports=function(h,E){h.super_=E;var U=function(){};U.prototype=E.prototype,h.prototype=new U,h.prototype.constructor=h}},824:D=>{var h=1e3,E=60*h,U=60*E,O=24*U,P=7*O,ee=365.25*O;function y(p,v,_,R){var M=v>=1.5*_;return Math.round(p/_)+" "+R+(M?"s":"")}D.exports=function(p,v){v=v||{};var _=typeof p;if(_==="string"&&p.length>0)return function(R){if(!((R=String(R)).length>100)){var M=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(R);if(M){var $=parseFloat(M[1]);switch((M[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return $*ee;case"weeks":case"week":case"w":return $*P;case"days":case"day":case"d":return $*O;case"hours":case"hour":case"hrs":case"hr":case"h":return $*U;case"minutes":case"minute":case"mins":case"min":case"m":return $*E;case"seconds":case"second":case"secs":case"sec":case"s":return $*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return $;default:return}}}}(p);if(_==="number"&&isFinite(p))return v.long?function(R){var M=Math.abs(R);return M>=O?y(R,M,O,"day"):M>=U?y(R,M,U,"hour"):M>=E?y(R,M,E,"minute"):M>=h?y(R,M,h,"second"):R+" ms"}(p):function(R){var M=Math.abs(R);return M>=O?Math.round(R/O)+"d":M>=U?Math.round(R/U)+"h":M>=E?Math.round(R/E)+"m":M>=h?Math.round(R/h)+"s":R+"ms"}(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))}},520:(D,h,E)=>{var U=E(155),O=U.platform==="win32",P=E(539);function ee(a,l){for(var m=[],k=0;k<a.length;k++){var J=a[k];J&&J!=="."&&(J===".."?m.length&&m[m.length-1]!==".."?m.pop():l&&m.push(".."):m.push(J))}return m}function y(a){for(var l=a.length-1,m=0;m<=l&&!a[m];m++);for(var k=l;k>=0&&!a[k];k--);return m===0&&k===l?a:m>k?[]:a.slice(m,k+1)}var p=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,v=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,_={};function R(a){var l=p.exec(a),m=(l[1]||"")+(l[2]||""),k=l[3]||"",J=v.exec(k);return[m,J[1],J[2],J[3]]}function M(a){var l=p.exec(a),m=l[1]||"",k=!!m&&m[1]!==":";return{device:m,isUnc:k,isAbsolute:k||!!l[2],tail:l[3]}}function $(a){return"\\\\"+a.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}_.resolve=function(){for(var a="",l="",m=!1,k=arguments.length-1;k>=-1;k--){var J;if(k>=0?J=arguments[k]:a?(J=U.env["="+a])&&J.substr(0,3).toLowerCase()===a.toLowerCase()+"\\"||(J=a+"\\"):J=U.cwd(),!P.isString(J))throw new TypeError("Arguments to path.resolve must be strings");if(J){var te=M(J),se=te.device,ye=te.isUnc,Ce=te.isAbsolute,ke=te.tail;if((!se||!a||se.toLowerCase()===a.toLowerCase())&&(a||(a=se),m||(l=ke+"\\"+l,m=Ce),a&&m))break}}return ye&&(a=$(a)),a+(m?"\\":"")+(l=ee(l.split(/[\\\/]+/),!m).join("\\"))||"."},_.normalize=function(a){var l=M(a),m=l.device,k=l.isUnc,J=l.isAbsolute,te=l.tail,se=/[\\\/]$/.test(te);return(te=ee(te.split(/[\\\/]+/),!J).join("\\"))||J||(te="."),te&&se&&(te+="\\"),k&&(m=$(m)),m+(J?"\\":"")+te},_.isAbsolute=function(a){return M(a).isAbsolute},_.join=function(){for(var a=[],l=0;l<arguments.length;l++){var m=arguments[l];if(!P.isString(m))throw new TypeError("Arguments to path.join must be strings");m&&a.push(m)}var k=a.join("\\");return/^[\\\/]{2}[^\\\/]/.test(a[0])||(k=k.replace(/^[\\\/]{2,}/,"\\")),_.normalize(k)},_.relative=function(a,l){a=_.resolve(a),l=_.resolve(l);for(var m=a.toLowerCase(),k=l.toLowerCase(),J=y(l.split("\\")),te=y(m.split("\\")),se=y(k.split("\\")),ye=Math.min(te.length,se.length),Ce=ye,ke=0;ke<ye;ke++)if(te[ke]!==se[ke]){Ce=ke;break}if(Ce==0)return l;var ge=[];for(ke=Ce;ke<te.length;ke++)ge.push("..");return(ge=ge.concat(J.slice(Ce))).join("\\")},_._makeLong=function(a){if(!P.isString(a))return a;if(!a)return"";var l=_.resolve(a);return/^[a-zA-Z]\:\\/.test(l)?"\\\\?\\"+l:/^\\\\[^?.]/.test(l)?"\\\\?\\UNC\\"+l.substring(2):a},_.dirname=function(a){var l=R(a),m=l[0],k=l[1];return m||k?(k&&(k=k.substr(0,k.length-1)),m+k):"."},_.basename=function(a,l){var m=R(a)[2];return l&&m.substr(-1*l.length)===l&&(m=m.substr(0,m.length-l.length)),m},_.extname=function(a){return R(a)[3]},_.format=function(a){if(!P.isObject(a))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof a);var l=a.root||"";if(!P.isString(l))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof a.root);var m=a.dir,k=a.base||"";return m?m[m.length-1]===_.sep?m+k:m+_.sep+k:k},_.parse=function(a){if(!P.isString(a))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof a);var l=R(a);if(!l||l.length!==4)throw new TypeError("Invalid path '"+a+"'");return{root:l[0],dir:l[0]+l[1].slice(0,-1),base:l[2],ext:l[3],name:l[2].slice(0,l[2].length-l[3].length)}},_.sep="\\",_.delimiter=";";var V=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,j={};function N(a){return V.exec(a).slice(1)}j.resolve=function(){for(var a="",l=!1,m=arguments.length-1;m>=-1&&!l;m--){var k=m>=0?arguments[m]:U.cwd();if(!P.isString(k))throw new TypeError("Arguments to path.resolve must be strings");k&&(a=k+"/"+a,l=k[0]==="/")}return(l?"/":"")+(a=ee(a.split("/"),!l).join("/"))||"."},j.normalize=function(a){var l=j.isAbsolute(a),m=a&&a[a.length-1]==="/";return(a=ee(a.split("/"),!l).join("/"))||l||(a="."),a&&m&&(a+="/"),(l?"/":"")+a},j.isAbsolute=function(a){return a.charAt(0)==="/"},j.join=function(){for(var a="",l=0;l<arguments.length;l++){var m=arguments[l];if(!P.isString(m))throw new TypeError("Arguments to path.join must be strings");m&&(a+=a?"/"+m:m)}return j.normalize(a)},j.relative=function(a,l){a=j.resolve(a).substr(1),l=j.resolve(l).substr(1);for(var m=y(a.split("/")),k=y(l.split("/")),J=Math.min(m.length,k.length),te=J,se=0;se<J;se++)if(m[se]!==k[se]){te=se;break}var ye=[];for(se=te;se<m.length;se++)ye.push("..");return(ye=ye.concat(k.slice(te))).join("/")},j._makeLong=function(a){return a},j.dirname=function(a){var l=N(a),m=l[0],k=l[1];return m||k?(k&&(k=k.substr(0,k.length-1)),m+k):"."},j.basename=function(a,l){var m=N(a)[2];return l&&m.substr(-1*l.length)===l&&(m=m.substr(0,m.length-l.length)),m},j.extname=function(a){return N(a)[3]},j.format=function(a){if(!P.isObject(a))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof a);var l=a.root||"";if(!P.isString(l))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof a.root);return(a.dir?a.dir+j.sep:"")+(a.base||"")},j.parse=function(a){if(!P.isString(a))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof a);var l=N(a);if(!l||l.length!==4)throw new TypeError("Invalid path '"+a+"'");return l[1]=l[1]||"",l[2]=l[2]||"",l[3]=l[3]||"",{root:l[0],dir:l[0]+l[1].slice(0,-1),base:l[2],ext:l[3],name:l[2].slice(0,l[2].length-l[3].length)}},j.sep="/",j.delimiter=":",D.exports=O?_:j,D.exports.posix=j,D.exports.win32=_},155:D=>{var h,E,U=D.exports={};function O(){throw new Error("setTimeout has not been defined")}function P(){throw new Error("clearTimeout has not been defined")}function ee(j){if(h===setTimeout)return setTimeout(j,0);if((h===O||!h)&&setTimeout)return h=setTimeout,setTimeout(j,0);try{return h(j,0)}catch{try{return h.call(null,j,0)}catch{return h.call(this,j,0)}}}(function(){try{h=typeof setTimeout=="function"?setTimeout:O}catch{h=O}try{E=typeof clearTimeout=="function"?clearTimeout:P}catch{E=P}})();var y,p=[],v=!1,_=-1;function R(){v&&y&&(v=!1,y.length?p=y.concat(p):_=-1,p.length&&M())}function M(){if(!v){var j=ee(R);v=!0;for(var N=p.length;N;){for(y=p,p=[];++_<N;)y&&y[_].run();_=-1,N=p.length}y=null,v=!1,function(a){if(E===clearTimeout)return clearTimeout(a);if((E===P||!E)&&clearTimeout)return E=clearTimeout,clearTimeout(a);try{E(a)}catch{try{return E.call(null,a)}catch{return E.call(this,a)}}}(j)}}function $(j,N){this.fun=j,this.array=N}function V(){}U.nextTick=function(j){var N=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)N[a-1]=arguments[a];p.push(new $(j,N)),p.length!==1||v||ee(M)},$.prototype.run=function(){this.fun.apply(null,this.array)},U.title="browser",U.browser=!0,U.env={},U.argv=[],U.version="",U.versions={},U.on=V,U.addListener=V,U.once=V,U.off=V,U.removeListener=V,U.removeAllListeners=V,U.emit=V,U.prependListener=V,U.prependOnceListener=V,U.listeners=function(j){return[]},U.binding=function(j){throw new Error("process.binding is not supported")},U.cwd=function(){return"/"},U.chdir=function(j){throw new Error("process.chdir is not supported")},U.umask=function(){return 0}},384:D=>{D.exports=function(h){return h&&typeof h=="object"&&typeof h.copy=="function"&&typeof h.fill=="function"&&typeof h.readUInt8=="function"}},539:(D,h,E)=>{var U=E(155),O=/%[sdj%]/g;h.format=function(d){if(!a(d)){for(var b=[],F=0;F<arguments.length;F++)b.push(y(arguments[F]));return b.join(" ")}F=1;for(var oe=arguments,Oe=oe.length,q=String(d).replace(O,function(de){if(de==="%%")return"%";if(F>=Oe)return de;switch(de){case"%s":return String(oe[F++]);case"%d":return Number(oe[F++]);case"%j":try{return JSON.stringify(oe[F++])}catch{return"[Circular]"}default:return de}}),Z=oe[F];F<Oe;Z=oe[++F])j(Z)||!k(Z)?q+=" "+Z:q+=" "+y(Z);return q},h.deprecate=function(d,b){if(l(E.g.process))return function(){return h.deprecate(d,b).apply(this,arguments)};if(U.noDeprecation===!0)return d;var F=!1;return function(){if(!F){if(U.throwDeprecation)throw new Error(b);U.traceDeprecation?console.trace(b):console.error(b),F=!0}return d.apply(this,arguments)}};var P,ee={};function y(d,b){var F={seen:[],stylize:v};return arguments.length>=3&&(F.depth=arguments[2]),arguments.length>=4&&(F.colors=arguments[3]),V(b)?F.showHidden=b:b&&h._extend(F,b),l(F.showHidden)&&(F.showHidden=!1),l(F.depth)&&(F.depth=2),l(F.colors)&&(F.colors=!1),l(F.customInspect)&&(F.customInspect=!0),F.colors&&(F.stylize=p),_(F,d,F.depth)}function p(d,b){var F=y.styles[b];return F?"\x1B["+y.colors[F][0]+"m"+d+"\x1B["+y.colors[F][1]+"m":d}function v(d,b){return d}function _(d,b,F){if(d.customInspect&&b&&se(b.inspect)&&b.inspect!==h.inspect&&(!b.constructor||b.constructor.prototype!==b)){var oe=b.inspect(F,d);return a(oe)||(oe=_(d,oe,F)),oe}var Oe=function(me,pe){if(l(pe))return me.stylize("undefined","undefined");if(a(pe)){var Te="'"+JSON.stringify(pe).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return me.stylize(Te,"string")}if(N(pe))return me.stylize(""+pe,"number");if(V(pe))return me.stylize(""+pe,"boolean");if(j(pe))return me.stylize("null","null")}(d,b);if(Oe)return Oe;var q=Object.keys(b),Z=function(me){var pe={};return me.forEach(function(Te,je){pe[Te]=!0}),pe}(q);if(d.showHidden&&(q=Object.getOwnPropertyNames(b)),te(b)&&(q.indexOf("message")>=0||q.indexOf("description")>=0))return R(b);if(q.length===0){if(se(b)){var de=b.name?": "+b.name:"";return d.stylize("[Function"+de+"]","special")}if(m(b))return d.stylize(RegExp.prototype.toString.call(b),"regexp");if(J(b))return d.stylize(Date.prototype.toString.call(b),"date");if(te(b))return R(b)}var Ae,Ee="",We=!1,ot=["{","}"];return $(b)&&(We=!0,ot=["[","]"]),se(b)&&(Ee=" [Function"+(b.name?": "+b.name:"")+"]"),m(b)&&(Ee=" "+RegExp.prototype.toString.call(b)),J(b)&&(Ee=" "+Date.prototype.toUTCString.call(b)),te(b)&&(Ee=" "+R(b)),q.length!==0||We&&b.length!=0?F<0?m(b)?d.stylize(RegExp.prototype.toString.call(b),"regexp"):d.stylize("[Object]","special"):(d.seen.push(b),Ae=We?function(me,pe,Te,je,Le){for(var Pe=[],Be=0,Pt=pe.length;Be<Pt;++Be)Me(pe,String(Be))?Pe.push(M(me,pe,Te,je,String(Be),!0)):Pe.push("");return Le.forEach(function(Ct){Ct.match(/^\d+$/)||Pe.push(M(me,pe,Te,je,Ct,!0))}),Pe}(d,b,F,Z,q):q.map(function(me){return M(d,b,F,Z,me,We)}),d.seen.pop(),function(me,pe,Te){return me.reduce(function(je,Le){return Le.indexOf(`
`)>=0,je+Le.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Te[0]+(pe===""?"":pe+`
 `)+" "+me.join(`,
  `)+" "+Te[1]:Te[0]+pe+" "+me.join(", ")+" "+Te[1]}(Ae,Ee,ot)):ot[0]+Ee+ot[1]}function R(d){return"["+Error.prototype.toString.call(d)+"]"}function M(d,b,F,oe,Oe,q){var Z,de,Ae;if((Ae=Object.getOwnPropertyDescriptor(b,Oe)||{value:b[Oe]}).get?de=Ae.set?d.stylize("[Getter/Setter]","special"):d.stylize("[Getter]","special"):Ae.set&&(de=d.stylize("[Setter]","special")),Me(oe,Oe)||(Z="["+Oe+"]"),de||(d.seen.indexOf(Ae.value)<0?(de=j(F)?_(d,Ae.value,null):_(d,Ae.value,F-1)).indexOf(`
`)>-1&&(de=q?de.split(`
`).map(function(Ee){return"  "+Ee}).join(`
`).substr(2):`
`+de.split(`
`).map(function(Ee){return"   "+Ee}).join(`
`)):de=d.stylize("[Circular]","special")),l(Z)){if(q&&Oe.match(/^\d+$/))return de;(Z=JSON.stringify(""+Oe)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Z=Z.substr(1,Z.length-2),Z=d.stylize(Z,"name")):(Z=Z.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Z=d.stylize(Z,"string"))}return Z+": "+de}function $(d){return Array.isArray(d)}function V(d){return typeof d=="boolean"}function j(d){return d===null}function N(d){return typeof d=="number"}function a(d){return typeof d=="string"}function l(d){return d===void 0}function m(d){return k(d)&&ye(d)==="[object RegExp]"}function k(d){return typeof d=="object"&&d!==null}function J(d){return k(d)&&ye(d)==="[object Date]"}function te(d){return k(d)&&(ye(d)==="[object Error]"||d instanceof Error)}function se(d){return typeof d=="function"}function ye(d){return Object.prototype.toString.call(d)}function Ce(d){return d<10?"0"+d.toString(10):d.toString(10)}h.debuglog=function(d){if(l(P)&&(P=U.env.NODE_DEBUG||""),d=d.toUpperCase(),!ee[d])if(new RegExp("\\b"+d+"\\b","i").test(P)){var b=U.pid;ee[d]=function(){var F=h.format.apply(h,arguments);console.error("%s %d: %s",d,b,F)}}else ee[d]=function(){};return ee[d]},h.inspect=y,y.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},y.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},h.isArray=$,h.isBoolean=V,h.isNull=j,h.isNullOrUndefined=function(d){return d==null},h.isNumber=N,h.isString=a,h.isSymbol=function(d){return typeof d=="symbol"},h.isUndefined=l,h.isRegExp=m,h.isObject=k,h.isDate=J,h.isError=te,h.isFunction=se,h.isPrimitive=function(d){return d===null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||typeof d=="symbol"||d===void 0},h.isBuffer=E(384);var ke=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ge(){var d=new Date,b=[Ce(d.getHours()),Ce(d.getMinutes()),Ce(d.getSeconds())].join(":");return[d.getDate(),ke[d.getMonth()],b].join(" ")}function Me(d,b){return Object.prototype.hasOwnProperty.call(d,b)}h.log=function(){console.log("%s - %s",ge(),h.format.apply(h,arguments))},h.inherits=E(717),h._extend=function(d,b){if(!b||!k(b))return d;for(var F=Object.keys(b),oe=F.length;oe--;)d[F[oe]]=b[F[oe]];return d}}},re={};function W(D){var h=re[D];if(h!==void 0)return h.exports;var E=re[D]={exports:{}};return Y[D].call(E.exports,E,E.exports,W),E.exports}W.n=D=>{var h=D&&D.__esModule?()=>D.default:()=>D;return W.d(h,{a:h}),h},W.d=(D,h)=>{for(var E in h)W.o(h,E)&&!W.o(D,E)&&Object.defineProperty(D,E,{enumerable:!0,get:h[E]})},W.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),W.o=(D,h)=>Object.prototype.hasOwnProperty.call(D,h),W.r=D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})};var he={};return(()=>{W.r(he),W.d(he,{LSPluginUser:()=>sr,setupPluginUserInstance:()=>Jr});var D=W(520);W(856);const h=function(){this.__data__=[],this.size=0},E=function(t,e){return t===e||t!=t&&e!=e},U=function(t,e){for(var n=t.length;n--;)if(E(t[n][0],e))return n;return-1};var O=Array.prototype.splice;const P=function(t){var e=this.__data__,n=U(e,t);return!(n<0)&&(n==e.length-1?e.pop():O.call(e,n,1),--this.size,!0)},ee=function(t){var e=this.__data__,n=U(e,t);return n<0?void 0:e[n][1]},y=function(t){return U(this.__data__,t)>-1},p=function(t,e){var n=this.__data__,r=U(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function v(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}v.prototype.clear=h,v.prototype.delete=P,v.prototype.get=ee,v.prototype.has=y,v.prototype.set=p;const _=v,R=function(){this.__data__=new _,this.size=0},M=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},$=function(t){return this.__data__.get(t)},V=function(t){return this.__data__.has(t)},j=typeof Mn=="object"&&Mn&&Mn.Object===Object&&Mn;var N=typeof self=="object"&&self&&self.Object===Object&&self;const a=j||N||Function("return this")(),l=a.Symbol;var m=Object.prototype,k=m.hasOwnProperty,J=m.toString,te=l?l.toStringTag:void 0;const se=function(t){var e=k.call(t,te),n=t[te];try{t[te]=void 0;var r=!0}catch{}var i=J.call(t);return r&&(e?t[te]=n:delete t[te]),i};var ye=Object.prototype.toString;const Ce=function(t){return ye.call(t)};var ke=l?l.toStringTag:void 0;const ge=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":ke&&ke in Object(t)?se(t):Ce(t)},Me=function(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")},d=function(t){if(!Me(t))return!1;var e=ge(t);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"},b=a["__core-js_shared__"];var F,oe=(F=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+F:"";const Oe=function(t){return!!oe&&oe in t};var q=Function.prototype.toString;const Z=function(t){if(t!=null){try{return q.call(t)}catch{}try{return t+""}catch{}}return""};var de=/^\[object .+?Constructor\]$/,Ae=Function.prototype,Ee=Object.prototype,We=Ae.toString,ot=Ee.hasOwnProperty,me=RegExp("^"+We.call(ot).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const pe=function(t){return!(!Me(t)||Oe(t))&&(d(t)?me:de).test(Z(t))},Te=function(t,e){return t?.[e]},je=function(t,e){var n=Te(t,e);return pe(n)?n:void 0},Le=je(a,"Map"),Pe=je(Object,"create"),Be=function(){this.__data__=Pe?Pe(null):{},this.size=0},Pt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var Ct=Object.prototype.hasOwnProperty;const Nn=function(t){var e=this.__data__;if(Pe){var n=e[t];return n==="__lodash_hash_undefined__"?void 0:n}return Ct.call(e,t)?e[t]:void 0};var Fn=Object.prototype.hasOwnProperty;const qn=function(t){var e=this.__data__;return Pe?e[t]!==void 0:Fn.call(e,t)},Rn=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Pe&&e===void 0?"__lodash_hash_undefined__":e,this};function it(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}it.prototype.clear=Be,it.prototype.delete=Pt,it.prototype.get=Nn,it.prototype.has=qn,it.prototype.set=Rn;const cn=it,Bn=function(){this.size=0,this.__data__={hash:new cn,map:new(Le||_),string:new cn}},Dn=function(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null},ht=function(t,e){var n=t.__data__;return Dn(e)?n[typeof e=="string"?"string":"hash"]:n.map},S=function(t){var e=ht(this,t).delete(t);return this.size-=e?1:0,e},T=function(t){return ht(this,t).get(t)},H=function(t){return ht(this,t).has(t)},Q=function(t,e){var n=ht(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function ce(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ce.prototype.clear=Bn,ce.prototype.delete=S,ce.prototype.get=T,ce.prototype.has=H,ce.prototype.set=Q;const Ne=ce,Xe=function(t,e){var n=this.__data__;if(n instanceof _){var r=n.__data__;if(!Le||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ne(r)}return n.set(t,e),this.size=n.size,this};function Fe(t){var e=this.__data__=new _(t);this.size=e.size}Fe.prototype.clear=R,Fe.prototype.delete=M,Fe.prototype.get=$,Fe.prototype.has=V,Fe.prototype.set=Xe;const et=Fe,ft=function(){try{var t=je(Object,"defineProperty");return t({},"",{}),t}catch{}}(),kt=function(t,e,n){e=="__proto__"&&ft?ft(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Nt=function(t,e,n){(n!==void 0&&!E(t[e],n)||n===void 0&&!(e in t))&&kt(t,e,n)},un=function(t){return function(e,n,r){for(var i=-1,s=Object(e),c=r(e),u=c.length;u--;){var f=c[t?u:++i];if(n(s[f],f,s)===!1)break}return e}}();var dn=x&&!x.nodeType&&x,gt=dn&&!0&&g&&!g.nodeType&&g,pn=gt&&gt.exports===dn?a.Buffer:void 0,hn=pn?pn.allocUnsafe:void 0;const $n=function(t,e){if(e)return t.slice();var n=t.length,r=hn?hn(n):new t.constructor(n);return t.copy(r),r},at=a.Uint8Array,Ft=function(t){var e=new t.constructor(t.byteLength);return new at(e).set(new at(t)),e},Ge=function(t,e){var n=e?Ft(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},fn=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e};var mt=Object.create;const qt=function(){function t(){}return function(e){if(!Me(e))return{};if(mt)return mt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),gn=function(t,e){return function(n){return t(e(n))}},mn=gn(Object.getPrototypeOf,Object);var zn=Object.prototype;const Rt=function(t){var e=t&&t.constructor;return t===(typeof e=="function"&&e.prototype||zn)},bn=function(t){return typeof t.constructor!="function"||Rt(t)?{}:qt(mn(t))},we=function(t){return t!=null&&typeof t=="object"},st=function(t){return we(t)&&ge(t)=="[object Arguments]"};var Ve=Object.prototype,Bt=Ve.hasOwnProperty,Dt=Ve.propertyIsEnumerable;const Ot=st(function(){return arguments}())?st:function(t){return we(t)&&Bt.call(t,"callee")&&!Dt.call(t,"callee")},Ue=Array.isArray,$t=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991},bt=function(t){return t!=null&&$t(t.length)&&!d(t)},zt=function(t){return we(t)&&bt(t)},ve=function(){return!1};var Ht=x&&!x.nodeType&&x,_e=Ht&&!0&&g&&!g.nodeType&&g,Wt=_e&&_e.exports===Ht?a.Buffer:void 0;const ue=(Wt?Wt.isBuffer:void 0)||ve;var yt=Function.prototype,Gt=Object.prototype,Vt=yt.toString,Jt=Gt.hasOwnProperty,yn=Vt.call(Object);const lt=function(t){if(!we(t)||ge(t)!="[object Object]")return!1;var e=mn(t);if(e===null)return!0;var n=Jt.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Vt.call(n)==yn};var ne={};ne["[object Float32Array]"]=ne["[object Float64Array]"]=ne["[object Int8Array]"]=ne["[object Int16Array]"]=ne["[object Int32Array]"]=ne["[object Uint8Array]"]=ne["[object Uint8ClampedArray]"]=ne["[object Uint16Array]"]=ne["[object Uint32Array]"]=!0,ne["[object Arguments]"]=ne["[object Array]"]=ne["[object ArrayBuffer]"]=ne["[object Boolean]"]=ne["[object DataView]"]=ne["[object Date]"]=ne["[object Error]"]=ne["[object Function]"]=ne["[object Map]"]=ne["[object Number]"]=ne["[object Object]"]=ne["[object RegExp]"]=ne["[object Set]"]=ne["[object String]"]=ne["[object WeakMap]"]=!1;const Zt=function(t){return we(t)&&$t(t.length)&&!!ne[ge(t)]},Kt=function(t){return function(e){return t(e)}};var tt=x&&!x.nodeType&&x,Je=tt&&!0&&g&&!g.nodeType&&g,ct=Je&&Je.exports===tt&&j.process,Yt=function(){try{var t=Je&&Je.require&&Je.require("util").types;return t||ct&&ct.binding&&ct.binding("util")}catch{}}(),Et=Yt&&Yt.isTypedArray;const nt=Et?Kt(Et):Zt,Ze=function(t,e){if((e!=="constructor"||typeof t[e]!="function")&&e!="__proto__")return t[e]};var ut=Object.prototype.hasOwnProperty;const vn=function(t,e,n){var r=t[e];ut.call(t,e)&&E(r,n)&&(n!==void 0||e in t)||kt(t,e,n)},_n=function(t,e,n,r){var i=!n;n||(n={});for(var s=-1,c=e.length;++s<c;){var u=e[s],f=r?r(n[u],t[u],u,n,t):void 0;f===void 0&&(f=t[u]),i?kt(n,u,f):vn(n,u,f)}return n},wn=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var Qt=/^(?:0|[1-9]\d*)$/;const Tt=function(t,e){var n=typeof t;return!!(e=e??9007199254740991)&&(n=="number"||n!="symbol"&&Qt.test(t))&&t>-1&&t%1==0&&t<e};var Xt=Object.prototype.hasOwnProperty;const jt=function(t,e){var n=Ue(t),r=!n&&Ot(t),i=!n&&!r&&ue(t),s=!n&&!r&&!i&&nt(t),c=n||r||i||s,u=c?wn(t.length,String):[],f=u.length;for(var A in t)!e&&!Xt.call(t,A)||c&&(A=="length"||i&&(A=="offset"||A=="parent")||s&&(A=="buffer"||A=="byteLength"||A=="byteOffset")||Tt(A,f))||u.push(A);return u},Ke=function(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e};var At=Object.prototype.hasOwnProperty;const xn=function(t){if(!Me(t))return Ke(t);var e=Rt(t),n=[];for(var r in t)(r!="constructor"||!e&&At.call(t,r))&&n.push(r);return n},Sn=function(t){return bt(t)?jt(t,!0):xn(t)},Hn=function(t){return _n(t,Sn(t))},dt=function(t,e,n,r,i,s,c){var u=Ze(t,n),f=Ze(e,n),A=c.get(f);if(A)Nt(t,n,A);else{var I=s?s(u,f,n+"",t,e,c):void 0,L=I===void 0;if(L){var z=Ue(f),K=!z&&ue(f),G=!z&&!K&&nt(f);I=f,z||K||G?Ue(u)?I=u:zt(u)?I=fn(u):K?(L=!1,I=$n(f,!0)):G?(L=!1,I=Ge(f,!0)):I=[]:lt(f)||Ot(f)?(I=u,Ot(u)?I=Hn(u):Me(u)&&!d(u)||(I=bn(f))):L=!1}L&&(c.set(f,I),i(I,f,r,s,c),c.delete(f)),Nt(t,n,I)}},Wn=function t(e,n,r,i,s){e!==n&&un(n,function(c,u){if(s||(s=new et),Me(c))dt(e,n,u,r,t,i,s);else{var f=i?i(Ze(e,u),c,u+"",e,n,s):void 0;f===void 0&&(f=c),Nt(e,u,f)}},Sn)},It=function(t){return t},en=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var tn=Math.max;const Cn=function(t,e,n){return e=tn(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=tn(r.length-e,0),c=Array(s);++i<s;)c[i]=r[e+i];i=-1;for(var u=Array(e+1);++i<e;)u[i]=r[i];return u[e]=n(c),en(t,this,u)}},Gn=function(t){return function(){return t}},Lt=ft?function(t,e){return ft(t,"toString",{configurable:!0,enumerable:!1,value:Gn(e),writable:!0})}:It;var nn=Date.now;const Vn=function(t){var e=0,n=0;return function(){var r=nn(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Lt),De=function(t,e){return Vn(Cn(t,e,It),t+"")},kn=function(t,e,n){if(!Me(n))return!1;var r=typeof e;return!!(r=="number"?bt(n)&&Tt(e,n.length):r=="string"&&e in n)&&E(n[e],t)},On=function(t){return De(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,c=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,c&&kn(n[0],n[1],c)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var u=n[r];u&&t(e,u,r,s)}return e})}(function(t,e,n){Wn(t,e,n)});var vt=function(){return vt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},vt.apply(this,arguments)};function Jn(t){return t.toLowerCase()}var _t=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],$e=/[^A-Z0-9]+/gi;function rn(t,e,n){return e instanceof RegExp?t.replace(e,n):e.reduce(function(r,i){return r.replace(i,n)},t)}function En(t,e){return e===void 0&&(e={}),function(n,r){r===void 0&&(r={});for(var i=r.splitRegexp,s=i===void 0?_t:i,c=r.stripRegexp,u=c===void 0?$e:c,f=r.transform,A=f===void 0?Jn:f,I=r.delimiter,L=I===void 0?" ":I,z=rn(rn(n,s,"$1\0$2"),u,"\0"),K=0,G=z.length;z.charAt(K)==="\0";)K++;for(;z.charAt(G-1)==="\0";)G--;return z.slice(K,G).split("\0").map(A).join(L)}(t,vt({delimiter:"."},e))}var on=W(729),wt=W.n(on);function an(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const o=navigator.platform.toLowerCase()==="win32"?D.win32:D.posix,C=function(t,e){return e===void 0&&(e={}),En(t,vt({delimiter:"_"},e))},w=On;class ie extends wt(){constructor(e,n){super(),an(this,"_tag",void 0),an(this,"_opts",void 0),an(this,"_logs",[]),this._tag=e,this._opts=n}write(e,n,r){var i;n!=null&&n.length&&n[n.length-1]===!0&&(r=!0,n.pop());const s=n.reduce((u,f)=>(f&&f instanceof Error?u+=`${f.message} ${f.stack}`:u+=f.toString(),u),`[${this._tag}][${new Date().toLocaleTimeString()}] `);var c;this._logs.push([e,s]),(r||(i=this._opts)!==null&&i!==void 0&&i.console)&&((c=console)===null||c===void 0||c[e==="ERROR"?"error":"debug"](`${e}: ${s}`)),this.emit("change")}clear(){this._logs=[],this.emit("change")}info(...e){this.write("INFO",e)}error(...e){this.write("ERROR",e)}warn(...e){this.write("WARN",e)}setTag(e){this._tag=e}toJSON(){return this._logs}}function fe(t,...e){try{const n=new URL(t);if(!n.origin)throw new Error(null);const r=o.join(t.substr(n.origin.length),...e);return n.origin+r}catch{return o.join(t,...e)}}function xe(t,e){let n,r,i=!1;const s=u=>f=>{t&&clearTimeout(t),u(f),i=!0},c=new Promise((u,f)=>{n=s(u),r=s(f),t&&(t=setTimeout(()=>r(new Error(`[deferred timeout] ${e}`)),t))});return{created:Date.now(),setTag:u=>e=u,resolve:n,reject:r,promise:c,get settled(){return i}}}const Se=new Map;window.__injectedUIEffects=Se;var xt=W(227),ze=W.n(xt);function X(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const rt="application/x-postmate-v1+json";let yr=0;const go={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},Zn=(t,e)=>(typeof e!="string"||t.origin===e)&&!!t.data&&(typeof t.data!="object"||"postmate"in t.data)&&t.data.type===rt&&!!go[t.data.postmate];class mo{constructor(e){X(this,"parent",void 0),X(this,"frame",void 0),X(this,"child",void 0),X(this,"events",{}),X(this,"childOrigin",void 0),X(this,"listener",void 0),this.parent=e.parent,this.frame=e.frame,this.child=e.child,this.childOrigin=e.childOrigin,this.listener=n=>{if(!Zn(n,this.childOrigin))return!1;const{data:r,name:i}=((n||{}).data||{}).value||{};n.data.postmate==="emit"&&i in this.events&&this.events[i].forEach(s=>{s.call(this,r)})},this.parent.addEventListener("message",this.listener,!1)}get(e,...n){return new Promise(r=>{const i=++yr,s=c=>{c.data.uid===i&&c.data.postmate==="reply"&&(this.parent.removeEventListener("message",s,!1),r(c.data.value))};this.parent.addEventListener("message",s,!1),this.child.postMessage({postmate:"request",type:rt,property:e,args:n,uid:i},this.childOrigin)})}call(e,n){this.child.postMessage({postmate:"call",type:rt,property:e,data:n},this.childOrigin)}on(e,n){this.events[e]||(this.events[e]=[]),this.events[e].push(n)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class bo{constructor(e){X(this,"model",void 0),X(this,"parent",void 0),X(this,"parentOrigin",void 0),X(this,"child",void 0),this.model=e.model,this.parent=e.parent,this.parentOrigin=e.parentOrigin,this.child=e.child,this.child.addEventListener("message",n=>{if(!Zn(n,this.parentOrigin))return;const{property:r,uid:i,data:s,args:c}=n.data;n.data.postmate!=="call"?((u,f,A)=>{const I=typeof u[f]=="function"?u[f].apply(null,A):u[f];return Promise.resolve(I)})(this.model,r,c).then(u=>{n.source.postMessage({property:r,postmate:"reply",type:rt,uid:i,value:u},n.origin)}):r in this.model&&typeof this.model[r]=="function"&&this.model[r](s)})}emit(e,n){this.parent.postMessage({postmate:"emit",type:rt,value:{name:e,data:n}},this.parentOrigin)}}class Kn{constructor(e){X(this,"container",void 0),X(this,"parent",void 0),X(this,"frame",void 0),X(this,"child",void 0),X(this,"childOrigin",void 0),X(this,"url",void 0),X(this,"model",void 0),this.container=e.container,this.url=e.url,this.parent=window,this.frame=document.createElement("iframe"),e.id&&(this.frame.id=e.id),e.name&&(this.frame.name=e.name),this.frame.classList.add.apply(this.frame.classList,e.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=e.model||{}}sendHandshake(e){const n=(s=>{const c=document.createElement("a");c.href=s;const u=c.protocol.length>4?c.protocol:window.location.protocol,f=c.host.length?c.port==="80"||c.port==="443"?c.hostname:c.host:window.location.host;return c.origin||`${u}//${f}`})(e=e||this.url);let r,i=0;return new Promise((s,c)=>{const u=A=>!!Zn(A,n)&&(A.data.postmate==="handshake-reply"?(clearInterval(r),this.parent.removeEventListener("message",u,!1),this.childOrigin=A.origin,s(new mo(this))):c("Failed handshake"));this.parent.addEventListener("message",u,!1);const f=()=>{i++,this.child.postMessage({postmate:"handshake",type:rt,model:this.model},n),i===5&&clearInterval(r)};this.frame.addEventListener("load",()=>{f(),r=setInterval(f,500)}),this.frame.src=e})}destroy(){this.frame.parentNode.removeChild(this.frame)}}X(Kn,"debug",!1),X(Kn,"Model",void 0);class yo{constructor(e){X(this,"child",void 0),X(this,"model",void 0),X(this,"parent",void 0),X(this,"parentOrigin",void 0),this.child=window,this.model=e,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((e,n)=>{const r=i=>{if(i.data.postmate){if(i.data.postmate==="handshake"){this.child.removeEventListener("message",r,!1),i.source.postMessage({postmate:"handshake-reply",type:rt},i.origin),this.parentOrigin=i.origin;const s=i.data.model;return s&&Object.keys(s).forEach(c=>{this.model[c]=s[c]}),e(new bo(this))}return n("Handshake Reply Failed")}};this.child.addEventListener("message",r,!1)})}}function sn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const{importHTML:vo,createSandboxContainer:_o}=window.QSandbox||{};function wo(t,e){return t.startsWith("http")?fetch(t,e):(t=t.replace("file://",""),new Promise(async(n,r)=>{try{const i=await window.apis.doAction(["readFile",t]);n({text:()=>i})}catch(i){console.error(i),r(i)}}))}class xo extends wt(){constructor(e){super(),sn(this,"_pluginLocal",void 0),sn(this,"_frame",void 0),sn(this,"_root",void 0),sn(this,"_loaded",!1),sn(this,"_unmountFns",[]),this._pluginLocal=e,e._dispose(()=>{this._unmount()})}async load(){const{name:e,entry:n}=this._pluginLocal.options;if(this.loaded||!n)return;const{template:r,execScripts:i}=await vo(n,{fetch:wo});this._mount(r,document.body);const s=_o(e,{elementGetter:()=>{var u;return(u=this._root)===null||u===void 0?void 0:u.firstChild}}).instance.proxy;s.__shadow_mode__=!0,s.LSPluginLocal=this._pluginLocal,s.LSPluginShadow=this,s.LSPluginUser=s.logseq=new sr(this._pluginLocal.toJSON(),this._pluginLocal.caller);const c=await i(s,!0);this._unmountFns.push(c.unmount),this._loaded=!0}_mount(e,n){const r=this._frame=document.createElement("div");r.classList.add("lsp-shadow-sandbox"),r.id=this._pluginLocal.id,this._root=r.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${e}</div>`,n.appendChild(r),this.emit("mounted")}_unmount(){for(const e of this._unmountFns)e&&e.call(null)}destroy(){var e,n;(e=this.frame)===null||e===void 0||(n=e.parentNode)===null||n===void 0||n.removeChild(this.frame)}get loaded(){return this._loaded}get document(){var e;return(e=this._root)===null||e===void 0?void 0:e.firstChild}get frame(){return this._frame}}function Ye(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const pt=ze()("LSPlugin:caller"),ln="#await#response#",So="#lspmsg#",vr="#lspmsg#error#",Tn=t=>`#lspmsg#${t}`;class Co extends wt(){constructor(e){super(),Ye(this,"_pluginLocal",void 0),Ye(this,"_connected",!1),Ye(this,"_parent",void 0),Ye(this,"_child",void 0),Ye(this,"_shadow",void 0),Ye(this,"_status",void 0),Ye(this,"_userModel",{}),Ye(this,"_call",void 0),Ye(this,"_callUserModel",void 0),Ye(this,"_debugTag",""),this._pluginLocal=e,e&&(this._debugTag=e.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:e}=this._pluginLocal;e?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(e={}){if(this._connected)return;const n=this,r=this._pluginLocal!=null;let i=0;const s=new Map,c=xe(6e4),u=this._extendUserModel({"#lspmsg#ready#":async I=>{u[Tn(I?.pid)]=({type:L,payload:z})=>{pt(`[host (_call) -> *user] ${this._debugTag}`,L,z),n.emit(L,z)},await c.resolve()},"#lspmsg#beforeunload#":async I=>{const L=xe(1e4);n.emit("beforeunload",Object.assign({actor:L},I)),await L.promise},"#lspmsg#settings#":async({type:I,payload:L})=>{n.emit("settings:changed",L)},[So]:async({ns:I,type:L,payload:z})=>{pt(`[host (async) -> *user] ${this._debugTag} ns=${I} type=${L}`,z),I&&I.startsWith("hook")?n.emit(`${I}:${L}`,z):n.emit(L,z)},"#lspmsg#reply#":({_sync:I,result:L})=>{if(pt(`[sync host -> *user] #${I}`,L),s.has(I)){const z=s.get(I);z&&(L!=null&&L.hasOwnProperty(vr)?z.reject(L[vr]):z.resolve(L),s.delete(I))}},...e});var f;if(r)return await c.promise,JSON.parse(JSON.stringify((f=this._pluginLocal)===null||f===void 0?void 0:f.toJSON()));const A=new yo(u).sendHandshakeReply();return this._status="pending",await A.then(I=>{this._child=I,this._connected=!0,this._call=async(L,z={},K)=>{if(K){const G=++i;s.set(G,K),z._sync=G,K.setTag(`async call #${G}`),pt(`async call #${G}`)}return I.emit(Tn(u.baseInfo.id),{type:L,payload:z}),K?.promise},this._callUserModel=async(L,z)=>{try{u[L](z)}catch{pt(`[model method] #${L} not existed`)}},setInterval(()=>{if(s.size>100)for(const[L,z]of s)z.settled&&s.delete(L)},18e5)}).finally(()=>{this._status=void 0}),await c.promise,u.baseInfo}async call(e,n={}){var r;return(r=this._call)===null||r===void 0?void 0:r.call(this,e,n)}async callAsync(e,n={}){var r;const i=xe(1e4);return(r=this._call)===null||r===void 0?void 0:r.call(this,e,n,i)}async callUserModel(e,...n){var r;return(r=this._callUserModel)===null||r===void 0?void 0:r.apply(this,[e,...n])}async callUserModelAsync(e,...n){var r;return e=`${ln}${e}`,(r=this._callUserModel)===null||r===void 0?void 0:r.apply(this,[e,...n])}async _setupIframeSandbox(){const e=this._pluginLocal,n=e.id,r=`${n}_lsp_main`,i=new URL(e.options.entry);i.searchParams.set("__v__",e.options.version);const s=document.querySelector(`#${r}`);s&&s.parentElement.removeChild(s);const c=document.createElement("div");c.classList.add("lsp-iframe-sandbox-container"),c.id=r,c.dataset.pid=n;try{var u;const L=(u=await this._pluginLocal._loadLayoutsData())===null||u===void 0?void 0:u.$$0;if(L){c.dataset.inited_layout="true";let{width:z,height:K,left:G,top:ae,vw:be,vh:Ie}=L;G=Math.max(G,0),G=typeof be=="number"?`${Math.min(100*G/be,99)}%`:`${G}px`,ae=Math.max(ae,45),ae=typeof Ie=="number"?`${Math.min(100*ae/Ie,99)}%`:`${ae}px`,Object.assign(c.style,{width:z+"px",height:K+"px",left:G,top:ae})}}catch(L){console.error("[Restore Layout Error]",L)}document.body.appendChild(c);const f=new Kn({id:n+"_iframe",container:c,url:i.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(e.toJSON()))}});let A,I=f.sendHandshake();return this._status="pending",new Promise((L,z)=>{A=setTimeout(()=>{z(new Error("handshake Timeout")),f.destroy()},4e3),I.then(K=>{this._parent=K,this._connected=!0,this.emit("connected"),K.on(Tn(e.id),({type:G,payload:ae})=>{var be,Ie;pt("[user -> *host] ",G,ae),(be=this._pluginLocal)===null||be===void 0||be.emit(G,ae||{}),(Ie=this._pluginLocal)===null||Ie===void 0||Ie.caller.emit(G,ae||{})}),this._call=async(...G)=>{await K.call(Tn(e.id),{type:G[0],payload:Object.assign(G[1]||{},{$$pid:e.id})})},this._callUserModel=async(G,...ae)=>{if(G.startsWith(ln))return await K.get(G.replace(ln,""),...ae);K.call(G,ae?.[0])},L(null)}).catch(K=>{z(K)}).finally(()=>{clearTimeout(A)})}).catch(L=>{throw pt("[iframe sandbox] error",L),L}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){const e=this._pluginLocal,n=this._shadow=new xo(e);try{this._status="pending",await n.load(),this._connected=!0,this.emit("connected"),this._call=async(r,i={},s)=>{var c;return s&&(i.actor=s),(c=this._pluginLocal)===null||c===void 0||c.emit(r,Object.assign(i,{$$pid:e.id})),s?.promise},this._callUserModel=async(...r)=>{var i;let s=r[0];(i=s)!==null&&i!==void 0&&i.startsWith(ln)&&(s=s.replace(ln,""));const c=r[1]||{},u=this._userModel[s];typeof u=="function"&&await u.call(null,c)}}catch(r){throw pt("[shadow sandbox] error",r),r}finally{this._status=void 0}}_extendUserModel(e){return Object.assign(this._userModel,e)}_getSandboxIframeContainer(){var e;return(e=this._parent)===null||e===void 0?void 0:e.frame.parentNode}_getSandboxShadowContainer(){var e;return(e=this._shadow)===null||e===void 0?void 0:e.frame.parentNode}_getSandboxIframeRoot(){var e;return(e=this._parent)===null||e===void 0?void 0:e.frame}_getSandboxShadowRoot(){var e;return(e=this._shadow)===null||e===void 0?void 0:e.frame}set debugTag(e){this._debugTag=e}async destroy(){var e;let n=null;this._parent&&(n=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(n=this._getSandboxShadowContainer(),this._shadow.destroy()),(e=n)===null||e===void 0||e.parentNode.removeChild(n)}}function _r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class wr{constructor(e,n){_r(this,"ctx",void 0),_r(this,"opts",void 0),this.ctx=e,this.opts=n}get ctxId(){return this.ctx.baseInfo.id}setItem(e,n){var r;return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,e,n,(r=this.opts)===null||r===void 0?void 0:r.assets]})}getItem(e){var n;return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,e,(n=this.opts)===null||n===void 0?void 0:n.assets]})}removeItem(e){var n;return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,e,(n=this.opts)===null||n===void 0?void 0:n.assets]})}allKeys(){var e;return this.ctx.caller.callAsync("api:call",{method:"list-plugin-storage-files",args:[this.ctxId,(e=this.opts)===null||e===void 0?void 0:e.assets]})}clear(){var e;return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId,(e=this.opts)===null||e===void 0?void 0:e.assets]})}hasItem(e){var n;return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,e,(n=this.opts)===null||n===void 0?void 0:n.assets]})}}class ko{constructor(e){var n,r,i;i=void 0,(r="ctx")in(n=this)?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this.ctx=e}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(e,...n){var r,i;const s=this.ensureHostScope();return e=(r=C(e))===null||r===void 0?void 0:r.toLowerCase(),(i=s.logseq.api["exper_"+e])===null||i===void 0?void 0:i.apply(s,n)}async loadScripts(...e){(e=e.map(n=>n!=null&&n.startsWith("http")?n:this.ctx.resolveResourceFullUrl(n))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...e)}registerFencedCodeRenderer(e,n){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,e,n)}registerExtensionsEnhancer(e,n){const r=this.ensureHostScope();return e==="katex"&&r.katex&&n(r.katex).catch(console.error),r.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,e,n)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}function Ut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const xr=t=>`task_callback_${t}`;class Oo{constructor(e,n,r={}){Ut(this,"_client",void 0),Ut(this,"_requestId",void 0),Ut(this,"_requestOptions",void 0),Ut(this,"_promise",void 0),Ut(this,"_aborted",!1),this._client=e,this._requestId=n,this._requestOptions=r,this._promise=new Promise((u,f)=>{if(!this._requestId)return f(null);this._client.once(xr(this._requestId),A=>{A&&A instanceof Error?f(A):u(A)})});const{success:i,fail:s,final:c}=this._requestOptions;this._promise.then(u=>{i?.(u)}).catch(u=>{s?.(u)}).finally(()=>{c?.()})}abort(){this._requestOptions.abortable&&!this._aborted&&(this._client.ctx._execCallableAPI("http_request_abort",this._requestId),this._aborted=!0)}get promise(){return this._promise}get client(){return this._client}get requestId(){return this._requestId}}class Yn extends on.EventEmitter{constructor(e){super(),Ut(this,"_ctx",void 0),this._ctx=e,this.ctx.caller.on("#lsp#request#callback",n=>{const r=n?.requestId;r&&this.emit(xr(r),n?.payload)})}static createRequestTask(e,n,r){return new Oo(e,n,r)}async _request(e){const n=this.ctx.baseInfo.id,{success:r,fail:i,final:s,...c}=e,u=this.ctx.Experiments.invokeExperMethod("request",n,c),f=Yn.createRequestTask(this.ctx.Request,u,e);return c.abortable?f:f.promise}get ctx(){return this._ctx}}const Eo=gn(Object.keys,Object);var To=Object.prototype.hasOwnProperty;const jo=function(t){if(!Rt(t))return Eo(t);var e=[];for(var n in Object(t))To.call(t,n)&&n!="constructor"&&e.push(n);return e},Qn=function(t){return bt(t)?jt(t):jo(t)},Ao=function(t,e){return t&&un(t,e,Qn)},Io=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Lo=function(t){return this.__data__.has(t)};function jn(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Ne;++e<n;)this.add(t[e])}jn.prototype.add=jn.prototype.push=Io,jn.prototype.has=Lo;const Uo=jn,Mo=function(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},Po=function(t,e){return t.has(e)},Sr=function(t,e,n,r,i,s){var c=1&n,u=t.length,f=e.length;if(u!=f&&!(c&&f>u))return!1;var A=s.get(t),I=s.get(e);if(A&&I)return A==e&&I==t;var L=-1,z=!0,K=2&n?new Uo:void 0;for(s.set(t,e),s.set(e,t);++L<u;){var G=t[L],ae=e[L];if(r)var be=c?r(ae,G,L,e,t,s):r(G,ae,L,t,e,s);if(be!==void 0){if(be)continue;z=!1;break}if(K){if(!Mo(e,function(Ie,Qe){if(!Po(K,Qe)&&(G===Ie||i(G,Ie,n,r,s)))return K.push(Qe)})){z=!1;break}}else if(G!==ae&&!i(G,ae,n,r,s)){z=!1;break}}return s.delete(t),s.delete(e),z},No=function(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n},Fo=function(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n};var Cr=l?l.prototype:void 0,Xn=Cr?Cr.valueOf:void 0;const qo=function(t,e,n,r,i,s,c){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!s(new at(t),new at(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return E(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var u=No;case"[object Set]":var f=1&r;if(u||(u=Fo),t.size!=e.size&&!f)return!1;var A=c.get(t);if(A)return A==e;r|=2,c.set(t,e);var I=Sr(u(t),u(e),r,i,s,c);return c.delete(t),I;case"[object Symbol]":if(Xn)return Xn.call(t)==Xn.call(e)}return!1},Ro=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},Bo=function(t,e,n){var r=e(t);return Ue(t)?r:Ro(r,n(t))},Do=function(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var c=t[n];e(c,n,t)&&(s[i++]=c)}return s},$o=function(){return[]};var zo=Object.prototype.propertyIsEnumerable,kr=Object.getOwnPropertySymbols;const Ho=kr?function(t){return t==null?[]:(t=Object(t),Do(kr(t),function(e){return zo.call(t,e)}))}:$o,Or=function(t){return Bo(t,Qn,Ho)};var Wo=Object.prototype.hasOwnProperty;const Go=function(t,e,n,r,i,s){var c=1&n,u=Or(t),f=u.length;if(f!=Or(e).length&&!c)return!1;for(var A=f;A--;){var I=u[A];if(!(c?I in e:Wo.call(e,I)))return!1}var L=s.get(t),z=s.get(e);if(L&&z)return L==e&&z==t;var K=!0;s.set(t,e),s.set(e,t);for(var G=c;++A<f;){var ae=t[I=u[A]],be=e[I];if(r)var Ie=c?r(be,ae,I,e,t,s):r(ae,be,I,t,e,s);if(!(Ie===void 0?ae===be||i(ae,be,n,r,s):Ie)){K=!1;break}G||(G=I=="constructor")}if(K&&!G){var Qe=t.constructor,Un=e.constructor;Qe==Un||!("constructor"in t)||!("constructor"in e)||typeof Qe=="function"&&Qe instanceof Qe&&typeof Un=="function"&&Un instanceof Un||(K=!1)}return s.delete(t),s.delete(e),K},er=je(a,"DataView"),tr=je(a,"Promise"),nr=je(a,"Set"),rr=je(a,"WeakMap");var Er="[object Map]",Tr="[object Promise]",jr="[object Set]",Ar="[object WeakMap]",Ir="[object DataView]",Vo=Z(er),Jo=Z(Le),Zo=Z(tr),Ko=Z(nr),Yo=Z(rr),St=ge;(er&&St(new er(new ArrayBuffer(1)))!=Ir||Le&&St(new Le)!=Er||tr&&St(tr.resolve())!=Tr||nr&&St(new nr)!=jr||rr&&St(new rr)!=Ar)&&(St=function(t){var e=ge(t),n=e=="[object Object]"?t.constructor:void 0,r=n?Z(n):"";if(r)switch(r){case Vo:return Ir;case Jo:return Er;case Zo:return Tr;case Ko:return jr;case Yo:return Ar}return e});const Lr=St;var Ur="[object Arguments]",Mr="[object Array]",An="[object Object]",Pr=Object.prototype.hasOwnProperty;const Qo=function(t,e,n,r,i,s){var c=Ue(t),u=Ue(e),f=c?Mr:Lr(t),A=u?Mr:Lr(e),I=(f=f==Ur?An:f)==An,L=(A=A==Ur?An:A)==An,z=f==A;if(z&&ue(t)){if(!ue(e))return!1;c=!0,I=!1}if(z&&!I)return s||(s=new et),c||nt(t)?Sr(t,e,n,r,i,s):qo(t,e,f,n,r,i,s);if(!(1&n)){var K=I&&Pr.call(t,"__wrapped__"),G=L&&Pr.call(e,"__wrapped__");if(K||G){var ae=K?t.value():t,be=G?e.value():e;return s||(s=new et),i(ae,be,n,r,s)}}return!!z&&(s||(s=new et),Go(t,e,n,r,i,s))},Nr=function t(e,n,r,i,s){return e===n||(e==null||n==null||!we(e)&&!we(n)?e!=e&&n!=n:Qo(e,n,r,i,t,s))},Xo=function(t,e,n,r){var i=n.length,s=i,c=!r;if(t==null)return!s;for(t=Object(t);i--;){var u=n[i];if(c&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<s;){var f=(u=n[i])[0],A=t[f],I=u[1];if(c&&u[2]){if(A===void 0&&!(f in t))return!1}else{var L=new et;if(r)var z=r(A,I,f,t,e,L);if(!(z===void 0?Nr(I,A,3,r,L):z))return!1}}return!0},Fr=function(t){return t==t&&!Me(t)},ei=function(t){for(var e=Qn(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Fr(i)]}return e},qr=function(t,e){return function(n){return n!=null&&n[t]===e&&(e!==void 0||t in Object(n))}},ti=function(t){var e=ei(t);return e.length==1&&e[0][2]?qr(e[0][0],e[0][1]):function(n){return n===t||Xo(n,t,e)}},or=function(t){return typeof t=="symbol"||we(t)&&ge(t)=="[object Symbol]"};var ni=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ri=/^\w*$/;const ir=function(t,e){if(Ue(t))return!1;var n=typeof t;return!(n!="number"&&n!="symbol"&&n!="boolean"&&t!=null&&!or(t))||ri.test(t)||!ni.test(t)||e!=null&&t in Object(e)};function ar(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var c=t.apply(this,r);return n.cache=s.set(i,c)||s,c};return n.cache=new(ar.Cache||Ne),n}ar.Cache=Ne;const oi=ar;var ii=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ai=/\\(\\)?/g;const si=function(t){var e=oi(t,function(r){return n.size===500&&n.clear(),r}),n=e.cache;return e}(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(ii,function(n,r,i,s){e.push(i?s.replace(ai,"$1"):r||n)}),e}),li=function(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i};var Rr=l?l.prototype:void 0,Br=Rr?Rr.toString:void 0;const ci=function t(e){if(typeof e=="string")return e;if(Ue(e))return li(e,t)+"";if(or(e))return Br?Br.call(e):"";var n=e+"";return n=="0"&&1/e==-1/0?"-0":n},ui=function(t){return t==null?"":ci(t)},Dr=function(t,e){return Ue(t)?t:ir(t,e)?[t]:si(ui(t))},In=function(t){if(typeof t=="string"||or(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e},$r=function(t,e){for(var n=0,r=(e=Dr(e,t)).length;t!=null&&n<r;)t=t[In(e[n++])];return n&&n==r?t:void 0},di=function(t,e,n){var r=t==null?void 0:$r(t,e);return r===void 0?n:r},pi=function(t,e){return t!=null&&e in Object(t)},hi=function(t,e,n){for(var r=-1,i=(e=Dr(e,t)).length,s=!1;++r<i;){var c=In(e[r]);if(!(s=t!=null&&n(t,c)))break;t=t[c]}return s||++r!=i?s:!!(i=t==null?0:t.length)&&$t(i)&&Tt(c,i)&&(Ue(t)||Ot(t))},fi=function(t,e){return t!=null&&hi(t,e,pi)},gi=function(t,e){return ir(t)&&Fr(e)?qr(In(t),e):function(n){var r=di(n,t);return r===void 0&&r===e?fi(n,t):Nr(e,r,3)}},mi=function(t){return function(e){return e?.[t]}},bi=function(t){return function(e){return $r(e,t)}},yi=function(t){return ir(t)?mi(In(t)):bi(t)},vi=function(t){return typeof t=="function"?t:t==null?It:typeof t=="object"?Ue(t)?gi(t[0],t[1]):ti(t):yi(t)},_i=function(t,e){var n={};return e=vi(e),Ao(t,function(r,i,s){kt(n,e(r,i,s),r)}),n};function zr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class wi{constructor(e,n){zr(this,"ctx",void 0),zr(this,"serviceHooks",void 0),this.ctx=e,this.serviceHooks=n,e._execCallableAPI("register-search-service",e.baseInfo.id,n.name,n.options),Object.entries({query:{f:"onQuery",args:["graph","q",!0],reply:!0,transformOutput:r=>(Ue(r?.blocks)&&(r.blocks=r.blocks.map(i=>i&&_i(i,(s,c)=>`block/${c}`))),r)},rebuildBlocksIndice:{f:"onIndiceInit",args:["graph","blocks"]},transactBlocks:{f:"onBlocksChanged",args:["graph","data"]},truncateBlocks:{f:"onIndiceReset",args:["graph"]},removeDb:{f:"onGraph",args:["graph"]}}).forEach(([r,i])=>{const s=(c=>`service:search:${c}:${n.name}`)(r);e.caller.on(s,async c=>{if(d(n?.[i.f])){let u=null;try{u=await n[i.f].apply(n,(i.args||[]).map(f=>{if(c){if(f===!0)return c;if(c.hasOwnProperty(f)){const A=c[f];return delete c[f],A}}})),i.transformOutput&&(u=i.transformOutput(u))}catch(f){console.error("[SearchService] ",f),u=f}finally{i.reply&&e.caller.call(`${s}:reply`,u)}}})})}}function He(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const xi=Symbol.for("proxy-continue"),Si=ze()("LSPlugin:user"),Hr=new ie("",{console:!0});function Mt(t,e,n){var r;if(typeof n!="function")return!1;const{key:i,label:s,desc:c,palette:u,keybinding:f,extras:A}=e,I=`SimpleCommandHook${i}${++Vr}`;this.Editor["on"+I](n),(r=this.caller)===null||r===void 0||r.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:i,label:s,type:t,desc:c,keybinding:f,extras:A},["editor/hook",I]],u]})}function Wr(t){return!(typeof(e=t)!="string"||e.length!==36||!/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(e))||(Hr.error(`#${t} is not a valid UUID string.`),!1);var e}let Ln=null,Gr=new Map;const Ci={async getInfo(t){return Ln||(Ln=await this._execCallableAPIAsync("get-app-info")),typeof t=="string"?Ln[t]:Ln},registerCommand:Mt,registerSearchService(t){if(Gr.has(t.name))throw new Error(`SearchService: #${t.name} has registered!`);Gr.set(t.name,new wi(this,t))},registerCommandPalette(t,e){const{key:n,label:r,keybinding:i}=t;return Mt.call(this,"$palette$",{key:n,label:r,palette:!0,keybinding:i},e)},registerCommandShortcut(t,e){const{binding:n}=t,r="$shortcut$",i=r+C(n);return Mt.call(this,r,{key:i,palette:!1,keybinding:t},e)},registerUIItem(t,e){var n;const r=this.baseInfo.id;(n=this.caller)===null||n===void 0||n.call("api:call",{method:"register-plugin-ui-item",args:[r,t,e]})},registerPageMenuItem(t,e){if(typeof e!="function")return!1;const n=t+"_"+this.baseInfo.id,r=t;Mt.call(this,"page-menu-item",{key:n,label:r},e)},onBlockRendererSlotted(t,e){if(!Wr(t))return;const n=this.baseInfo.id,r=`hook:editor:${C(`slot:${t}`)}`;return this.caller.on(r,e),this.App._installPluginHook(n,r),()=>{this.caller.off(r,e),this.App._uninstallPluginHook(n,r)}},invokeExternalPlugin(t,...e){var n;if(!(t=(n=t)===null||n===void 0?void 0:n.trim()))return;let[r,i]=t.split(".");if(!["models","commands"].includes(i?.toLowerCase()))throw new Error("Type only support '.models' or '.commands' currently.");const s=t.replace(`${r}.${i}.`,"");if(!r||!i||!s)throw new Error(`Illegal type of #${t} to invoke external plugin.`);return this._execCallableAPIAsync("invoke_external_plugin_cmd",r,i.toLowerCase(),s,e)},setFullScreen(t){const e=(...n)=>this._callWin("setFullScreen",...n);t==="toggle"?this._callWin("isFullScreen").then(n=>{n?e():e(!0)}):t?e(!0):e()}};let Vr=0;const ki={newBlockUUID(){return this._execCallableAPIAsync("new_block_uuid")},registerSlashCommand(t,e){var n;Si("Register slash command #",this.baseInfo.id,t,e),typeof e=="function"&&(e=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",e]]),e=e.map(r=>{const[i,...s]=r;if(i==="editor/hook"){let c=s[0],u=()=>{var A;(A=this.caller)===null||A===void 0||A.callUserModel(c)};typeof c=="function"&&(u=c);const f=`SlashCommandHook${i}${++Vr}`;r[1]=f,this.Editor["on"+f](u)}return r}),(n=this.caller)===null||n===void 0||n.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[t,e]]})},registerBlockContextMenuItem(t,e){if(typeof e!="function")return!1;const n=t+"_"+this.baseInfo.id;Mt.call(this,"block-context-menu-item",{key:n,label:t},e)},registerHighlightContextMenuItem(t,e,n){if(typeof e!="function")return!1;const r=t+"_"+this.baseInfo.id;Mt.call(this,"highlight-context-menu-item",{key:r,label:t,extras:n},e)},scrollToBlockInPage(t,e,n){const r="block-content-"+e;n!=null&&n.replaceState?this.App.replaceState("page",{name:t},{anchor:r}):this.App.pushState("page",{name:t},{anchor:r})}},Oi={onBlockChanged(t,e){if(!Wr(t))return;const n=this.baseInfo.id,r=`hook:db:${C(`block:${t}`)}`,i=({block:s,txData:c,txMeta:u})=>{s.uuid===t&&e(s,c,u)};return this.caller.on(r,i),this.App._installPluginHook(n,r),()=>{this.caller.off(r,i),this.App._uninstallPluginHook(n,r)}},datascriptQuery(t,...e){return e.pop(),e!=null&&e.some(n=>typeof n=="function")?this.Experiments.ensureHostScope().logseq.api.datascript_query(t,...e):this._execCallableAPIAsync("datascript_query",t,...e)}},Ei={},Ti={},ji={makeSandboxStorage(){return new wr(this,{assets:!0})}};class sr extends wt(){constructor(e,n){super(),He(this,"_baseInfo",void 0),He(this,"_caller",void 0),He(this,"_version","0.0.14"),He(this,"_debugTag",""),He(this,"_settingsSchema",void 0),He(this,"_connected",!1),He(this,"_ui",new Map),He(this,"_mFileStorage",void 0),He(this,"_mRequest",void 0),He(this,"_mExperiments",void 0),He(this,"_beforeunloadCallback",void 0),this._baseInfo=e,this._caller=n,n.on("sys:ui:visible",r=>{r!=null&&r.toggle&&this.toggleMainUI()}),n.on("settings:changed",r=>{const i=Object.assign({},this.settings),s=Object.assign(this._baseInfo.settings,r);this.emit("settings:changed",{...s},i)}),n.on("beforeunload",async r=>{const{actor:i,...s}=r,c=this._beforeunloadCallback;try{c&&await c(s),i?.resolve(null)}catch(u){console.debug(`${n.debugTag} [beforeunload] `,u),i?.reject(u)}})}async ready(e,n){if(!this._connected)try{var r;typeof e=="function"&&(n=e,e={});let i=await this._caller.connectToParent(e);this._connected=!0,i=w(this._baseInfo,i),(r=i)!==null&&r!==void 0&&r.id&&(this._debugTag=this._caller.debugTag=`#${i.id} [${i.name}]`,this.logger.setTag(this._debugTag)),this._settingsSchema&&(i.settings=function(s,c){const u=(c||[]).reduce((f,A)=>("default"in A&&(f[A.key]=A.default),f),{});return Object.assign(u,s)}(i.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema));try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(s){console.warn(s)}n&&n.call(this,i)}catch(i){console.error(`${this._debugTag} [Ready Error]`,i)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(e){typeof e=="function"&&(this._beforeunloadCallback=e)}provideModel(e){return this.caller._extendUserModel(e),this}provideTheme(e){return this.caller.call("provider:theme",e),this}provideStyle(e){return this.caller.call("provider:style",e),this}provideUI(e){return this.caller.call("provider:ui",e),this}useSettingsSchema(e){return this.connected&&this.caller.call("settings:schema",{schema:e,isSync:!0}),this._settingsSchema=e,this}updateSettings(e){this.caller.call("settings:update",e)}onSettingsChanged(e){const n="settings:changed";return this.on(n,e),()=>this.off(n,e)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(e){this.caller.call("main-ui:attrs",e)}setMainUIInlineStyle(e){this.caller.call("main-ui:style",e)}hideMainUI(e){const n={key:0,visible:!1,cursor:e?.restoreEditingCursor};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}showMainUI(e){const n={key:0,visible:!0,autoFocus:e?.autoFocus};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}toggleMainUI(){const n=this._ui.get(0);n&&n.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const e=this._ui.get(0);return Boolean(e&&e.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get effect(){return(e=this)&&(((n=e.baseInfo)===null||n===void 0?void 0:n.effect)||!((r=e.baseInfo)!==null&&r!==void 0&&r.iir));var e,n,r}get logger(){return Hr}get settings(){var e;return(e=this.baseInfo)===null||e===void 0?void 0:e.settings}get caller(){return this._caller}resolveResourceFullUrl(e){if(this.ensureConnected(),e)return e=e.replace(/^[.\\/]+/,""),fe(this._baseInfo.lsr,e)}_makeUserProxy(e,n){const r=this,i=this.caller;return new Proxy(e,{get(s,c,u){const f=s[c];return function(...A){if(f){const L=f.apply(r,A.concat(n));if(L!==xi)return L}if(n){const L=c.toString().match(/^(once|off|on)/i);if(L!=null){const z=L[0].toLowerCase(),K=L.input.slice(z.length),G=z==="off",ae=r.baseInfo.id,be=`hook:${n}:${C(K)}`,Ie=A[0];i[z](be,Ie);const Qe=()=>{i.off(be,Ie),i.listenerCount(be)||r.App._uninstallPluginHook(ae,be)};return G?void Qe():(r.App._installPluginHook(ae,be),Qe)}}let I=c;return["git","ui","assets"].includes(n)&&(I=n+"_"+I),i.callAsync("api:call",{tag:n,method:I,args:A})}}})}_execCallableAPIAsync(e,...n){return this._caller.callAsync("api:call",{method:e,args:n})}_execCallableAPI(e,...n){this._caller.call("api:call",{method:e,args:n})}_callWin(...e){return this._execCallableAPIAsync("_callMainWin",...e)}get App(){return this._makeUserProxy(Ci,"app")}get Editor(){return this._makeUserProxy(ki,"editor")}get DB(){return this._makeUserProxy(Oi,"db")}get Git(){return this._makeUserProxy(Ei,"git")}get UI(){return this._makeUserProxy(Ti,"ui")}get Assets(){return this._makeUserProxy(ji,"assets")}get FileStorage(){let e=this._mFileStorage;return e||(e=this._mFileStorage=new wr(this)),e}get Request(){let e=this._mRequest;return e||(e=this._mRequest=new Yn(this)),e}get Experiments(){let e=this._mExperiments;return e||(e=this._mExperiments=new ko(this)),e}}function Jr(t,e){return new sr(t,e)}if(window.__LSP__HOST__==null){const t=new Co(null);window.logseq=Jr({},t)}})(),he})())})(Ai,ur);const Ii={title:"Awesome UI",icon:"./icon.png",id:"logseq-awesome-ui"},B=parent.document,qe=B.documentElement,Re=B.body,le={pluginID:Ii.id,pluginConfig:null,isPluginEnabled:"is-awUi-enabled",isSearchOpenedClass:"is-search-opened",isThemesOpenedClass:"is-themes-opened",tabsPluginIframe:null},Li="2.2.6",Ui=(g,x)=>Object.keys(g).filter(re=>g[re]!==x[re]),Mi=async()=>{const g=await fetch(`https://api.github.com/repos/yoyurec/${le.pluginID}/releases/latest`,{headers:{Accept:"application/vnd.github.v3+json"}});if(!g.ok){const Y=`An error has occurred: ${g.status}`;throw new Error(Y)}const x=await g.json();x&&x.tag_name.replace("v","").localeCompare(Li,void 0,{numeric:!0,sensitivity:"base"})==1&&logseq.UI.showMsg(`"${le.pluginID}" new version is available! Please, update!`,"warning",{timeout:3e4})},Kr=(g,x,Y)=>{const re=B.getElementById(g);re&&(dr(g,x),re.contentDocument?.head.insertAdjacentHTML("beforeend",`<style id='${x}'>
            ${Y}
        </style>`))},dr=(g,x)=>{const Y=B.getElementById(g);Y&&Y.contentDocument?.getElementById(x)?.remove()},Pi=()=>{const g=B.createElement("span");g.textContent="span",g.style.color="var(--ls-primary-text-color)",g.style.backgroundColor="var(--ls-primary-background-color)",Re.insertAdjacentElement("beforeend",g);const x=getComputedStyle(g).color.trim(),Y=getComputedStyle(g).backgroundColor.trim();g.remove();const re=B.createElement("a");re.style.border="1px solid var(--ls-border-color)",re.style.backgroundColor="var(--ls-a-chosen-bg)",Re.insertAdjacentElement("beforeend",re);const W=getComputedStyle(re).color.trim(),he=getComputedStyle(re).backgroundColor.trim(),D=getComputedStyle(re).borderColor.trim();return re.remove(),`
        :root {
            --ls-primary-text-color:${x};
            --ls-primary-background-color:${Y};
            --ls-link-text-color:${W};
            --ls-a-chosen-bg:${he};
            --ls-border-color:${D};
        }
    `},Ni=`[data-pid=logseq-agenda]{z-index:10!important;width:calc(100% - var(--awUi-calc-left-sidebar-width, var(--ls-left-sidebar-width)) - var(--awUi-calc-right-sidebar-width, var(--ls-right-sidebar-width)))!important;height:calc(100vh - var(--awUi-tabs-height, 0px) - var(--awUi-header-height))!important;left:var(--awUi-calc-left-sidebar-width, var(--ls-left-sidebar-width));right:var(--awUi-calc-right-sidebar-width, var(--ls-right-sidebar-width));top:calc(var(--awUi-tabs-height, 0px) + var(--awUi-header-height))!important}#--awUi-calendar-menu .ls-icon-calendar-time:before{content:"\\ee21"}
`;let Pn=null,pr=null;const hr="/page/calendar",Yr=()=>{le.pluginConfig.menuCalendar?Fi():Qr()},Fi=()=>{if(Ri(),logseq.provideStyle({key:"--awUi-calendar-css",style:Ni}),window.parent.location.hash.toLowerCase()===`#${hr}`&&setTimeout(()=>{Zr()},1e3),pr=B.getElementById("logseq-agenda_lsp_main"),!pr){console.log("AwesomeUi: agenda plugin not found!");return}Pn=B.getElementById("--awUi-calendar-menu"),B.getElementById("left-menu").addEventListener("click",fr),logseq.App.onRouteChanged(({path:x})=>{le.pluginConfig.menuCalendar&&(x.toLowerCase()===hr?Zr():qi())}),logseq.App.onSidebarVisibleChanged(()=>{fr()})},Qr=()=>{B.head.querySelector('style[data-injected-style^="--awUi-calendar-css"]')?.remove(),B.querySelector(".nav-header .calendar-nav")?.remove()},Zr=async()=>{fr(),pr&&Pn&&(await logseq.App.invokeExternalPlugin("logseq-agenda.models.show"),Pn.classList.add("active"),setTimeout(()=>{B.getElementById("logseq-agenda_iframe")?.blur()},150))},qi=()=>{logseq.App.invokeExternalPlugin("logseq-agenda.models.hide"),Pn?.classList.remove("active")},Ri=()=>{const g=B.querySelector(".nav-header .journals-nav"),x=`
        <div class="calendar-nav">
            <a href="#${hr}" class="item group flex items-center text-sm font-medium rounded-md" id="--awUi-calendar-menu">
                <span class="ui__icon ti ls-icon-calendar-time"></span><span class="flex-1">Calendar</span>
                </a>
        </div>
    `;g?.insertAdjacentHTML("afterend",x)},fr=()=>{setTimeout(()=>{let g;B.getElementById("left-sidebar")?.classList.contains("is-open")?g=B.getElementById("left-sidebar")?.getBoundingClientRect()?.width:g=0,qe.style.setProperty("--awUi-calc-left-sidebar-width",`${g}px`);const x=B.getElementById("right-sidebar")?.getBoundingClientRect()?.width;qe.style.setProperty("--awUi-calc-right-sidebar-width",`${x}px`)},500)};const Xr=()=>{le.pluginConfig.hideHomeButton?qe.style.setProperty("--awUi-home-button","none"):qe.style.removeProperty("--awUi-home-button"),le.pluginConfig.hideAddNewPage?qe.style.removeProperty("--awUi-sidebar-new-page"):qe.style.setProperty("--awUi-sidebar-new-page","block"),le.pluginConfig.hideSidebarPageIcons?qe.style.removeProperty("--awUi-sidebar-page-icon"):qe.style.setProperty("--awUi-sidebar-page-icon","visible"),le.pluginConfig.alwaysShowNewBlockBullet?qe.style.setProperty("--awUi-new-bullet-hidden","none"):qe.style.removeProperty("--awUi-new-bullet-hidden"),le.pluginConfig.hideBottomHelpButton?qe.style.setProperty("--awUi-help-button-hidden","none"):qe.style.removeProperty("--awUi-help-button-hidden")};const Bi=()=>{const g=B.querySelector("#right-sidebar .toggle-right-sidebar");eo(!!g),logseq.App.onSidebarVisibleChanged(({visible:x})=>{$i(x)})},Di=()=>{const g=B.querySelector("#head .hide-right-sidebar-button"),x=B.querySelector(".cp__right-sidebar-topbar");x&&g&&x.insertAdjacentElement("beforeend",g)},eo=g=>{if(g){const x=B.querySelector("#right-sidebar .toggle-right-sidebar");x?.classList.add("hide-right-sidebar-button");const Y=B.querySelector("#head .r");Y&&x&&Y.insertAdjacentElement("beforeend",x)}else B.querySelector("#head .hide-right-sidebar-button")?.remove()},$i=g=>{Re.classList.contains("is-awUi-enabled")&&eo(g)},zi=`:root{--awUi-tabs-height: 36px;--awUi-header-height: 44px;--ls-headbar-inner-top-padding: var(--awUi-tabs-height)}#main-content-container{height:calc(100vh - var(--awUi-header-height) - var(--awUi-tabs-height))!important}#left-sidebar .left-sidebar-inner>.wrap{margin-top:var(--ls-headbar-height)!important;height:calc(100vh - var(--ls-headbar-height) - var(--awUi-tabs-height))!important}#right-sidebar,.sidebar-item-list,.whiteboard-page,body[data-page=graph] .graph{height:calc(100vh - var(--awUi-header-height) - var(--awUi-tabs-height))!important}.cp__sidebar-main-content{padding-top:0!important}.is-mac #head>.l{padding-left:.5rem}#logseq-tabs_iframe{position:static!important;top:unset!important;right:unset!important;bottom:unset!important;left:unset!important;z-index:unset!important;height:var(--awUi-tabs-height)!important}[data-pid=logseq-tabs]{position:fixed!important;top:0!important;left:unset!important;right:unset!important;bottom:unset!important;z-index:99!important;height:var(--awUi-tabs-height)!important;width:100%!important;max-width:100%!important;background-color:var(--ls-tertiary-background-color)}.is-mac [data-pid=logseq-tabs]:before{position:fixed;top:0;left:0;display:block;content:"";width:84px;height:var(--awUi-tabs-height);border-bottom:1px solid #80808080;background-color:var(--ls-tertiary-background-color)}.is-mac [data-pid=logseq-tabs]{left:84px!important}html.is-mac.is-fullscreen body:not(.is-pdf-active) [data-pid=logseq-tabs]{left:0!important}body.is-pdf-active [data-pid=logseq-tabs]{left:calc(var(--ph-view-container-width))!important}html.is-mac.is-fullscreen [data-pid=logseq-tabs]:before,html.is-mac .is-pdf-active [data-pid=logseq-tabs]:before{display:none}
`,Hi=`main{border-bottom:1px solid #80808080}main .flex{align-items:flex-end}.light .logseq-tab,.dark .logseq-tab{padding:4px 8px;height:auto;color:var(--ls-primary-text-color)!important;background-color:var(--ls-primary-background-color)!important;box-shadow:none;border-color:#80808080!important;border-bottom:0;border-bottom-left-radius:0;border-bottom-right-radius:0;-webkit-app-region:no-drag}.light .logseq-tab[data-active=false]:hover,.dark .logseq-tab[data-active=false]:hover{box-shadow:var(--ls-link-text-color) 0 -1px 1px 0}.light .logseq-tab[data-active=true],.dark .logseq-tab[data-active=true]{box-shadow:var(--ls-link-text-color) 0 -1px 1px 0;transform:translateY(1px)}.light .logseq-tab div,.dark .logseq-tab div{border:0;background-color:transparent}.light .logseq-tab button:hover,.dark .logseq-tab button:hover,.light .logseq-tab[data-active=true] button:hover,.dark .logseq-tab[data-active=true] button:hover{background-color:transparent!important}.logseq-tab-title{transition:none}.close-all .logseq-tab-title:before{content:"\\274c";margin-right:4px;opacity:.8}
`,to=()=>{B.getElementById("logseq-tabs_iframe")&&(le.pluginConfig.tabsOnTop?(Wi(),Gi()):(no(),Vi()))},Wi=()=>{logseq.provideStyle({key:"--awUi-tabs-css",style:zi})},no=()=>{B.head.querySelector('style[data-injected-style^="--awUi-tabs-css"]')?.remove()},Gi=()=>{B.getElementById("logseq-tabs_iframe")&&(setTimeout(()=>{Kr("logseq-tabs_iframe","awUi-tabs-styles",Hi)},400),ro())},Vi=()=>{dr("logseq-tabs_iframe","awUi-tabs-styles"),dr("logseq-tabs_iframe","awUi-tabs-vars")},ro=()=>{const g=B.getElementById("logseq-tabs_iframe");g&&(g.style.visibility="hidden",setTimeout(()=>{const x=Pi();Kr("logseq-tabs_iframe","awUi-tabs-vars",x),setTimeout(()=>{g.style.visibility="visible"},100)},1e3))},Ji=`#search-button{display:flex;justify-content:start;flex-grow:1;overflow:hidden;height:34px;margin:0 10px;padding:0 6px;border-radius:5px;border:1px solid #88888850;transition:all .3s;font-family:var(--awUi-font)}#search-button:after{display:block;content:"Search or create page";margin:0 0 0 5px;font-size:calc(var(--awUi-font-size) + 2px)}.ui__modal[label=ls-modal-search] .ui__modal-panel{transition:none!important}.is-search-opened .ui__modal{top:calc(var(--awUi-tabs-height, 0px) + 5px);padding:0}.is-search-opened .panel-content,.is-search-opened .cp__palette-main,.ui__modal-panel .panel-content .ls-search{min-width:unset;width:auto}.is-search-opened .cp__palette-main{margin:-2rem -1.5rem}@media (min-width: 640px){.is-search-opened .cp__palette-main{margin:-2rem}}.ls-search{border-radius:4px;border:1px solid #88888850}.ls-search .input-wrap{height:34px}.ls-search .input-wrap:before{font-family:tabler-icons;content:"\\eb1c";font-size:20px;position:absolute;left:7px;top:1px}.ls-search .input-wrap .cp__palette-input{font-size:calc(var(--awUi-font-size) + 2px);padding:0 31px 2px}.ls-search .search-result,.ls-search .search-result .font-medium{font-weight:400}.ls-search .search-results .menu-link{padding-top:0;padding-bottom:0}.ls-search .menu-link{border-top:1px dashed var(--ls-secondary-background-color)}.ls-search .menu-link:hover,.ls-search .menu-link .chosen{background-color:var(--ls-primary-background-color)}
`,Zi=g=>{if(le.pluginConfig.headerVariant!=="Browser-like (wide search)"||Re.classList.contains("is-pdf-active"))return;Re.classList.add(le.isSearchOpenedClass);const x=g.closest(".ui__modal"),Y=B.getElementById("search-button");if(!Y||!x)return;const re=Y.getBoundingClientRect().left,W=Y.offsetWidth;W&&W>600?(g.style.width=W+"px",x.style.left=re+"px",x.style.justifyContent="flex-start"):(g.style.width="90vw",x.style.left="0",x.style.justifyContent="center")},Ki=()=>{if(!le.pluginConfig.featureWideSearchEnabled)return;Re.classList.remove(le.isSearchOpenedClass);const g=B.querySelector(".ui__modal");g.style.left="",g.style.justifyContent=""},Yi=async()=>{setTimeout(()=>{logseq.provideStyle({key:"--awUi-wide-search-css",style:Ji})},500);const g=B.querySelector("#head .r");if(g){const x=B.getElementById("search-button");x&&g.insertAdjacentElement("afterbegin",x)}},gr=()=>{B.head.querySelector('style[data-injected-style^="--awUi-wide-search-css"]')?.remove();const g=B.querySelector("#head .l");if(!g)return;const x=B.getElementById("search-button");x&&g.insertAdjacentElement("beforeend",x)};let lr=null,br,oo;const Qi=()=>{ta(),na()},Xi=()=>{ra()},ea=g=>{for(let x=0;x<g.length;x++){const Y=g[x],re=Y.addedNodes[0],W=Y.removedNodes[0];if(re&&re.childNodes.length){const he=re.querySelector(".ls-search");he&&Zi(he),re.querySelector(".cp__themes-installed")&&Re.classList.add(le.isThemesOpenedClass)}W&&W.childNodes.length&&(W.querySelector(".ls-search")&&Ki(),W.querySelector(".cp__themes-installed")&&Re.classList.remove(le.isThemesOpenedClass))}},ta=()=>{oo={childList:!0},br=new MutationObserver(ea)},na=()=>{lr=B.querySelector(".ui__modal-panel"),lr&&br.observe(lr,oo)},ra=()=>{br.disconnect()},oa=`#left-sidebar .nav-header{flex-direction:row;gap:4px;height:30px}#left-sidebar .nav-header .ui__icon{margin:0;padding:0}#left-sidebar .nav-header .journals-nav .ui__icon{margin-top:1px}#left-sidebar .nav-header .whiteboard .ui__icon{margin-top:0;font-size:20px}#left-sidebar .nav-header .all-pages-nav .ui__icon{margin-top:2px}#left-sidebar .nav-header .item:hover{background-color:var(--ls-secondary-background-color)}#left-sidebar .nav-header .ui__icon+span{display:none}#left-sidebar .flashcards-nav .rounded-full{margin:0;padding:0;white-space:nowrap}
`,io=()=>{le.pluginConfig.compactSidebarMenu?ia():ao()},ia=()=>{logseq.provideStyle({key:"--awUi-compactSidebarMenu-css",style:oa})},ao=()=>{B.head.querySelector('style[data-injected-style^="--awUi-compactSidebarMenu-css"]')?.remove()};const aa=`:root{--awUi-header-height: 0px !important}#head{background:none!important}#main-content-container{padding:1rem}#right-sidebar{border-top:var(--ls-headbar-height) solid var(--awSt-ui-rsidebar-bg, transparent)!important}#head{pointer-events:none}#head .l *,#head .r *{pointer-events:auto}[data-pid=logseq-agenda]{top:var(--awUi-tabs-height, 0px)!important}
`,sa=async()=>{Re.dataset.awuiCompactHeader="",setTimeout(()=>{logseq.provideStyle({key:"awUi-compact-header-css",style:aa})},500)},mr=async()=>{delete Re.dataset.awuiCompactHeader,B.head.querySelector('style[data-injected-style^="awUi-compact-header-css"]')?.remove()},la=()=>{da(),pa(),so()},ca=()=>{ua()},so=()=>{switch(le.pluginConfig.headerVariant){case"Browser-like (wide search)":Yi(),mr();break;case"Standard":mr(),gr();break;case"Compact":sa(),gr();break}},ua=()=>{gr(),mr()},da=()=>{const g=B.getElementById("head");if(g){const x=B.getElementById("app-container");x&&x.insertAdjacentElement("beforebegin",g)}},pa=()=>{const g=B.getElementById("head"),x=g?.querySelector(".r .flex.flex-row"),Y=g?.querySelector(".l")?.firstElementChild,re=x?.innerHTML;if(Y&&re){Y.insertAdjacentHTML("afterend",re),x.style.display="none";const W=g?.querySelector(".l .nav-left"),he=g?.querySelector(".l .nav-right");W?.addEventListener("click",()=>{parent.window.history.back()}),he?.addEventListener("click",()=>{parent.window.history.forward()})}},ha=`#head .flashcards-nav .flex-1{display:none}#head .flashcards-nav .text-xs{margin:0 0 0 6px;padding:0;white-space:nowrap}
`,lo=()=>{le.pluginConfig.headerFlashcardsButton?fa():co()},fa=()=>{const g=B.querySelector(".cp__file-sync-indicator");if(g){const x=B.querySelector(".flashcards-nav");x&&g.insertAdjacentElement("beforebegin",x)}logseq.provideStyle({key:"--awUi-flashcardsButton-css",style:ha})},co=()=>{const g=B.querySelector("#left-sidebar .graph-view-nav");if(!g)return;const x=B.querySelector(".flashcards-nav");x&&g.insertAdjacentElement("beforebegin",x),B.head.querySelector('style[data-injected-style^="--awUi-flashcardsButton-css"]')?.remove()},ga=`#right-sidebar .cp__right-sidebar-topbar{display:none}.cp__sidebar-main-content>div{position:relative}.cp__sidebar-main-content .cp__right-sidebar-settings-btn{position:absolute;right:8px;top:21px;z-index:1;padding:0;width:34px;height:30px;font-size:0;font-weight:400;transition:.3s;color:var(--ls-link-text-color);opacity:.2}.cp__sidebar-main-content .cp__right-sidebar-settings-btn:hover{opacity:1}.cp__sidebar-main-content .cp__right-sidebar-settings-btn:before{content:"\\edff";font-family:tabler-icons;font-size:18px}.cp__sidebar-main-content .cp__right-sidebar-settings-btn:after{content:"Show page graph";font-size:14px;white-space:nowrap;display:none;position:absolute;top:-1.5em;right:0;transition:1s;opacity:0}.cp__sidebar-main-content .cp__right-sidebar-settings-btn:hover:after{display:block;opacity:.8}body:is([data-page="whiteboard"],[data-page="all-pages"]) .cp__sidebar-main-content .cp__right-sidebar-settings-btn{display:none}
`,uo=()=>{le.pluginConfig.hideRightSidebarToolbar?ma():po()},ma=()=>{logseq.provideStyle({key:"--awUi-hideRightSidebarToolbar-css",style:ga}),setTimeout(()=>{ba()},500)},ba=()=>{const g=B.querySelector("#right-sidebar .cp__right-sidebar-settings > .text-sm:nth-child(2) > .cp__right-sidebar-settings-btn");if(g){const x=B.querySelector(".cp__sidebar-main-content div");x&&x.insertAdjacentElement("afterbegin",g)}},ya=()=>{const g=B.querySelector("#right-sidebar .cp__right-sidebar-settings .text-sm:nth-child(2)");if(g){const x=B.querySelector(".cp__sidebar-main-content .cp__right-sidebar-settings-btn");x&&g.insertAdjacentElement("beforeend",x)}},po=()=>{ya(),B.head.querySelector('style[data-injected-style^="--awUi-hideRightSidebarToolbar-css"]')?.remove()};const va=`.cp__menubar-repos .ui__dropdown-trigger{position:fixed;left:0;bottom:0;margin:0 .5rem;width:calc(var(--ls-left-sidebar-width) - 1rem)}.left-sidebar-inner .nav-contents-container{height:calc(100% - 36px)}.cp__menubar-repos .dropdown-wrapper{bottom:30px;box-shadow:none}.cp__menubar-repos .menu-links-wrapper{box-shadow:none}#left-sidebar .left-sidebar-inner .create{bottom:26px}
`,ho=()=>{le.pluginConfig.vaultButtonToBottom?_a():fo()},_a=()=>{logseq.provideStyle({key:"--awUi-vaultButton-css",style:va})},fo=()=>{B.head.querySelector('style[data-injected-style^="--awUi-vaultButton-css"]')?.remove()},wa=()=>{Re.classList.add(le.isPluginEnabled),Sa(),ka(),setTimeout(()=>{logseq.beforeunload(async()=>{xa()})},2e3),le.pluginConfig.pluginUpdateNotify&&setTimeout(()=>{Mi()},8e3)},xa=()=>{Re.classList.remove(le.isPluginEnabled),Ca(),Oa()},Sa=async()=>{logseq.provideModel({onThemeChangedCallback:cr}),setTimeout(()=>{if(B.head){const g=document.styleSheets[0].href;B.head.querySelector('link[href="./css/style.css"]').insertAdjacentHTML("afterend",`<link rel="stylesheet" id="css-awesomeUi" href="${g}">`)}},100),setTimeout(()=>{logseq.App.onThemeChanged(()=>{cr()}),logseq.App.onThemeModeChanged(()=>{cr()})},2e3)},Ca=()=>{B.getElementById("css-awesomeUi")?.remove()},ka=()=>{setTimeout(()=>{Xr(),io(),lo(),uo(),Qi(),Yr(),la(),to(),ho()},2e3),setTimeout(()=>{Bi()},3e3)},Oa=()=>{ao(),co(),po(),Di(),Xi(),Qr(),ca(),no(),fo()},cr=()=>{ro()},Ea=[{key:"headerHeading",title:"Header",description:"",type:"heading",default:null},{key:"tabsOnTop",title:"",description:"Move Tabs panel on top?",type:"boolean",default:!0},{key:"headerVariant",title:"",description:"Choose app header variant:",type:"enum",enumPicker:"radio",enumChoices:["Browser-like (wide search)","Standard","Compact"],default:"Browser-like (wide search)"},{key:"hideHomeButton",title:"",description:'Hide "Home" button on header?',type:"boolean",default:!0},{key:"leftSidebarHeading",title:"Left sidebar",description:"",type:"heading",default:null},{key:"vaultButtonToBottom",title:"",description:"Move vaults list to bottom of left sidebar?",type:"boolean",default:!1},{key:"compactSidebarMenu",title:"",description:"Compact menu (horizontal, no labels) on left sidebar?",type:"boolean",default:!1},{key:"menuCalendar",title:"",description:'Show "Calendar" page link on left menu? (can be integrated with "Agenda" plugin, see README!)',type:"boolean",default:!0},{key:"headerFlashcardsButton",title:"",description:'Move "Flashcards" button to header plugins toolbar?',type:"boolean",default:!1},{key:"hideSidebarPageIcons",title:"",description:"Hide default page icons on left sidebar favs/recent?",type:"boolean",default:!1},{key:"hideAddNewPage",title:"",description:'Hide "New Page" button on bottom of left sidebar?',type:"boolean",default:!0},{key:"rightSidebarHeading",title:"Right sidebar",description:"",type:"heading",default:null},{key:"hideRightSidebarToolbar",title:"",description:"Hide toolbar on right sidebar?",type:"boolean",default:!1},{key:"hideBottomHelpButton",title:"",description:"Hide bottom help button",type:"boolean",default:!1},{key:"contentHeading",title:"Content",description:"",type:"heading",default:null},{key:"alwaysShowNewBlockBullet",title:"",description:"Always (not just on hover) show add block bullet on page bottom?",type:"boolean",default:!1},{key:"otherHeading",title:"Other",description:"",type:"heading",default:null},{key:"pluginUpdateNotify",title:"",description:"Enable new version notifier on app load?",type:"boolean",default:!0}];const Ta=()=>{logseq.useSettingsSchema(Ea),le.pluginConfig=logseq.settings,logseq.onSettingsChanged((g,x)=>{ja(g,x)})},ja=(g,x)=>{le.pluginConfig={...g};const Y=Ui({...x},le.pluginConfig);Y.length&&(Y.includes("tabsOnTop")&&to(),Y.includes("headerVariant")&&so(),Y.includes("menuCalendar")&&Yr(),Y.includes("compactSidebarMenu")&&io(),Y.includes("headerFlashcardsButton")&&lo(),Y.includes("hideRightSidebarToolbar")&&uo(),Y.includes("vaultButtonToBottom")&&ho(),Xr())};const Aa=async()=>{console.log("AwesomeUi: plugin loaded"),Ta(),wa()};logseq.ready(Aa).catch(null);
//# sourceMappingURL=awesomeUi-c2048b0f.js.map
