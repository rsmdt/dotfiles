# List of awesome resources
#   @see https://github.com/rothgar/awesome-tmux
#
# Useful helpers
#   C-b :show-options -g # list all options

##
# General Options
#
set -gw aggressive-resize on              # Super useful when using "grouped sessions" and multi-monitor setup
set -sa terminal-overrides ",xterm*:Tc"
set -g default-terminal "screen-256color" # Upgrade $TERM
set -g mouse on                           # mouse behavior
set -g renumber-windows on                # renumber windows when when any window is clsoed
set -g set-clipboard on                   # use system clipboard
set -g focus-events on                    # Focus events enabled for terminals that support them
set -s escape-time 0                      # Address vim mode switching delay (http://superuser.com/a/252717/65504)
set -g history-limit 50000                # Increase scrollback buffer size from 2000 to 50000 lines
set -g display-time 4000                  # Increase tmux messages display duration from 750ms to 4s
set -g status-interval 1                  # update the status bar every X seconds
set -g status-keys vi                     # vi-mode for copy-mode
set -g base-index 1                       # start window index at 1 (instead of 0)

# set -g detach-on-destroy off # don't exit from tmux when closing a session
# set -g status-position top                # macOS / darwin style

# Automatically set window title
set -wg automatic-rename on
set -g  set-titles on

##
# Keymaps
#
# change default prefix to C-<space>
# unbind C-b
# set -g prefix C-Space
# bind C-a send-prefix
set -g prefix2 C-Space # @ # same as C-Space
bind C-Space send-prefix -2 # for nested session

# better split windows
bind v split-window -h  -c "#{pane_current_path}" # split right
bind V split-window -hb -c "#{pane_current_path}" # split left
bind s split-window -v  -c "#{pane_current_path}" # split bottom
bind S split-window -vb -c "#{pane_current_path}" # split top

# splitting like vim
bind l split-window -h  -c "#{pane_current_path}" # split right
bind h split-window -hb -c "#{pane_current_path}" # split left
bind j split-window -v  -c "#{pane_current_path}" # split bottom
bind k split-window -vb -c "#{pane_current_path}" # split top

bind s choose-tree  # switch sessions easily

# skip "kill-pane 1? (y/n)" prompt
bind x kill-pane
bind -n M-x kill-pane

bind -n M-s choose-tree
bind -n M-c new-window
bind -n M-n new-session

# <Option>+<arrow> to switch windows
bind -n M-Left  previous-window
bind -n M-Right next-window

# https://aliquote.org/post/tmux-little-hacks/
bind -n M-Up display-menu -T " Menu " -x 0 -y S \
  " Create Window"                   c "new-window" \
  " Kill Window"                     C "kill-window" \
  "" \
  " Create Pane Right"               l "split-window -h -c '#{pane_current_path}'" \
  " Create Pane Left"                h "split-window -hb -c '#{pane_current_path}'" \
  " Create Pane Down"                j "split-window -v -c '#{pane_current_path}'" \
  " Create Pane Up"                  k "split-window -vb -c '#{pane_current_path}'" \
  " Move other panes to new window"  t "break-pane" \
  " Kill Pane"                       x "kill-pane" \
  "" \
  " New Session"                     n "new-session" \
  " Rename Session"                  r "command-prompt -p \"Reame Session:\" \"rename-session '%%'\"" \
  " Choose Session"                  s "choose-session" \
  " Kill Other Session(s)"           X "kill-session -a" \
  " Kill Session"                    Q "kill-session" \
  "" \
  " Show Keymap"                     ? "list-keys -N" \
  "Close menu"                        q ""

  # " New Session"                       n "command-prompt -p \"New Session Name:\" \"new-session -A -s '%%'\"" \
  # "Swap Right"                          H "swap-pane -t -1" \
  # "Swap Left"                           L "swap-pane -t +1" \
  # "" \
  # "New Session"                         S "command-prompt -p \"New Session:\" \"new-session -A -s '%%'\"" \
  # "Kill Session"                        X "kill-session" \
  # "Kill Other Session(s)"               C "kill-session -a" \
  # "" \
  # "Layout Horizontal"                  h "select-layout even-horizontal"  \
  # "Layout Vertical"                    k "select-layout even-horizontal"  \
  # "" \
  # "Swap Pane Up"                       < "swap-pane -U" \
  # "Swap Pane Down"                     > "swap-pane -D" \
  # "Break Pane"                         t break-pane \
  # "Join Pane"                          j "choose-window 'join-pane -h -s \"%%\"'" \
  # "#{?window_zoomed_flag,Unzoom,Zoom}" z "resize-pane -Z" \
  # "#{?window_zoomed_flag,Unzoom,Zoom}" z "resize-pane -Z"


##
# Theme
#
set -g status-style "fg=#a1aab8 bg=#202020"

set -g  status-left-length 50
set -g  status-left ""

set -ga status-left "#{?client_prefix,#[fg=#50fa7a bg=#202020],#[fg=#6cbdcc bg=#202020]}█"   # padding
set -ga status-left "#{?client_prefix,#[fg=#202020 bg=#50fa7a]P,#[fg=#202020 bg=#6cbdcc]N}"  # icon
set -ga status-left "#{?client_prefix,#[fg=#50fa7a bg=#202020],#[fg=#6cbdcc bg=#202020]}█"   # padding
set -ga status-left "#{?client_prefix,#[fg=#50fa7a bg=#202020],#[fg=#6cbdcc bg=#202020]}║"   # section separator

set -ga status-left "#[fg=#202020 bg=#202020]█"    # padding
set -ga status-left "#[fg=#a1aab8 bg=#202020] #S" # sessions
set -ga status-left "#[fg=#202020 bg=#202020]█"    # padding

set -g status-justify right
set -g  window-status-separator "#[fg=#202020]█"

set -g  window-status-format ""
set -ga window-status-format "#[fg=#2d3041]#[bg=#f8f8f2]█"
set -ga window-status-format "#[fg=#f8f8f2]#[bg=#2d3041]#I | #{?pane_in_mode,#{pane_mode}  ,}#W"
set -ga window-status-format "#[fg=#2d3041]#[bg=#f8f8f2]█"

set -g  window-status-current-format ""
set -ga window-status-current-format "#[fg=#fa50c0 bg=#44475a]█"
set -ga window-status-current-format "#[fg=#202020 bg=#fa50c0]#I | #{?pane_in_mode,#{pane_mode}  ,}#W"
set -ga window-status-current-format "#[fg=#fa50c0 bg=#44475a]█"

set -g  status-right-style "bg=#2d3041"
set -g  status-right ""

set -g message-command-style "fg=#202020 bg=#50fa7a"
set -g message-style "fg=#202020 bg=#50fa7a"

# set -g pane-border-status off # top, bottom
# set -g pane-border-format " #{pane_index} #{pane_current_path} "
# set -g pane-border-style "fg=#a1aab8"
# set -g pane-active-border-style "fg=#50fa7a"
# set -g popup-border-style "fg=#fa50c0"
# set -g popup-border-lines double

##
# Tmux Plugin manager
#
# @see https://github.com/tmux-plugins/tpm
#
# Install: <prefix> I
# Update: <prefix> U
# Clean (remove): <prefix> <alt> u
# 
# set -g @tpm-install "i" # changed from <prefix> I
# set -g @tpm-clean "u" # changed from <prefix> <ALT> u

# plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'christoomey/vim-tmux-navigator'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
